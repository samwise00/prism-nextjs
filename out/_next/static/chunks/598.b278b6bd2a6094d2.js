(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[598],{75508:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ComposedStore=void 0;let ObservableStore_1=__webpack_require__(28877);class ComposedStore extends ObservableStore_1.ObservableStore{constructor(children){super({}),this._children=children||{},Object.keys(this._children).forEach(childKey=>{let child=this._children[childKey];this._addChild(childKey,child)})}_addChild(childKey,child){let updateFromChild=childValue=>{let state=this.getState();state[childKey]=childValue,this.putState(state)};child.subscribe(updateFromChild),updateFromChild(child.getState())}}exports.ComposedStore=ComposedStore},70401:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MergedStore=void 0;let ObservableStore_1=__webpack_require__(28877);class MergedStore extends ObservableStore_1.ObservableStore{constructor(children=[]){super({}),this._children=children,children.forEach(child=>this._addChild(child)),this._updateWholeState()}_addChild(child){child.subscribe(()=>this._updateWholeState())}_updateWholeState(){let childStates=this._children.map(child=>child.getState()),state=Object.assign({},...childStates);this.putState(state)}}exports.MergedStore=MergedStore},28877:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.ObservableStore=void 0;let safe_event_emitter_1=__importDefault(__webpack_require__(19394));class ObservableStore extends safe_event_emitter_1.default{constructor(initState){super(),initState?this._state=initState:this._state={}}getState(){return this._getState()}putState(newState){this._putState(newState),this.emit("update",newState)}updateState(partialState){if(partialState&&"object"==typeof partialState){let state=this.getState();this.putState(Object.assign(Object.assign({},state),partialState))}else this.putState(partialState)}subscribe(handler){this.on("update",handler)}unsubscribe(handler){this.removeListener("update",handler)}_getState(){return this._state}_putState(newState){this._state=newState}}exports.ObservableStore=ObservableStore},97969:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.storeAsStream=void 0;let stream_1=__webpack_require__(79681);class ObservableStoreStream extends stream_1.Duplex{constructor(obsStore){super({objectMode:!0}),this.resume(),this.handler=state=>this.push(state),this.obsStore=obsStore,this.obsStore.subscribe(this.handler)}pipe(dest,options){let result=super.pipe(dest,options);return dest.write(this.obsStore.getState()),result}_write(chunk,_encoding,callback){this.obsStore.putState(chunk),callback()}_read(_size){}_destroy(err,callback){this.obsStore.unsubscribe(this.handler),super._destroy(err,callback)}}exports.storeAsStream=function(obsStore){return new ObservableStoreStream(obsStore)}},12724:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(97969),exports),__exportStar(__webpack_require__(75508),exports),__exportStar(__webpack_require__(70401),exports),__exportStar(__webpack_require__(28877),exports),__exportStar(__webpack_require__(26546),exports)},26546:function(__unused_webpack_module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.storeTransformStream=void 0;let through2_1=__webpack_require__(14650);exports.storeTransformStream=function(syncTransformFn){return through2_1.obj((state,_encoding,cb)=>{try{let newState=syncTransformFn(state);cb(null,newState);return}catch(err){cb(err);return}})}},35796:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{d:function(){return BaseEvmAdapter}});var _web3auth_base__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45624);class BaseEvmAdapter extends _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.J5{async authenticateUser(){var _this$chainConfig;if(!this.provider||!(null!==(_this$chainConfig=this.chainConfig)&&void 0!==_this$chainConfig&&_this$chainConfig.chainId))throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.notConnectedError();let{chainNamespace,chainId}=this.chainConfig;if(this.status!==_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.CONNECTED)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.notConnectedError("Not connected with wallet, Please login/connect first");let accounts=await this.provider.request({method:"eth_accounts"});if(accounts&&accounts.length>0){let existingToken=(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.Cb)(accounts[0],this.name);if(existingToken){let isExpired=(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.$E)(existingToken);if(!isExpired)return{idToken:existingToken}}let payload={domain:window.location.origin,uri:window.location.href,address:accounts[0],chainId:parseInt(chainId,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},challenge=await (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.tV)(payload,chainNamespace),signedMessage=await this.provider.request({method:"personal_sign",params:[challenge,accounts[0]]}),idToken=await (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.rn)(chainNamespace,signedMessage,challenge,this.name,this.sessionTime);return(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.Fr)(accounts[0],this.name,idToken),{idToken}}throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnect(){if(this.status!==_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.CONNECTED)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.disconnectionError("Not connected with wallet");let accounts=await this.provider.request({method:"eth_accounts"});accounts&&accounts.length>0&&(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.qz)(accounts[0],this.name)}}},6598:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{TorusWalletAdapter:function(){return TorusWalletAdapter}});var defineProperty=__webpack_require__(4942),httpHelpers_esm=__webpack_require__(20917),openloginJrpc_esm=__webpack_require__(95844),lodash_merge=__webpack_require__(72378),lodash_merge_default=__webpack_require__.n(lodash_merge),dist=__webpack_require__(12724),eth_rpc_errors_dist=__webpack_require__(79826),fast_deep_equal=__webpack_require__(64063),fast_deep_equal_default=__webpack_require__.n(fast_deep_equal),is_stream=__webpack_require__(24970),pump=__webpack_require__(74286),pump_default=__webpack_require__.n(pump),loglevel=__webpack_require__(2043),loglevel_default=__webpack_require__.n(loglevel),browser=__webpack_require__(23482),browser_default=__webpack_require__.n(browser),events=__webpack_require__(17187),Buffer=__webpack_require__(48764).Buffer;let LOGIN_PROVIDER={GOOGLE:"google",FACEBOOK:"facebook",TWITCH:"twitch",REDDIT:"reddit",DISCORD:"discord"},WALLET_VERIFIERS={GOOGLE:"google",FACEBOOK:"facebook",TWITCH:"twitch",REDDIT:"reddit",DISCORD:"discord",EMAIL_PASSWORDLESS:"torus-auth0-email-passwordless"},WALLET_OPENLOGIN_VERIFIER_MAP={[WALLET_VERIFIERS.GOOGLE]:"tkey-google",[WALLET_VERIFIERS.FACEBOOK]:"tkey-facebook",[WALLET_VERIFIERS.TWITCH]:"tkey-twitch",[WALLET_VERIFIERS.REDDIT]:"tkey-reddit",[WALLET_VERIFIERS.DISCORD]:"tkey-discord",[WALLET_VERIFIERS.EMAIL_PASSWORDLESS]:"tkey-auth0-email-passwordless"},PAYMENT_PROVIDER={MOONPAY:"moonpay",WYRE:"wyre",RAMPNETWORK:"rampnetwork",XANPOOL:"xanpool",MERCURYO:"mercuryo",TRANSAK:"transak",BANXA:"banxa"},SUPPORTED_PAYMENT_NETWORK={MAINNET:"mainnet",MATIC:"matic",BSC_MAINNET:"bsc_mainnet",AVALANCHE_MAINNET:"avalanche_mainnet",XDAI:"xdai"},TORUS_BUILD_ENV={PRODUCTION:"production",DEVELOPMENT:"development",BINANCE:"binance",TESTING:"testing",LRC:"lrc",BETA:"beta",BNB:"bnb",POLYGON:"polygon"},BUTTON_POSITION={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},PROVIDER_SUPPORTED_FIAT_CURRENCIES={[PAYMENT_PROVIDER.MOONPAY]:["AUD","BGN","BRL","CAD","CHF","CNY","COP","CZK","DKK","DOP","EGP","EUR","GBP","HKD","HRK","IDR","ILS","JPY","JOD","KES","KRW","KWD","LKR","MAD","MXN","MYR","NGN","NOK","NZD","OMR","PEN","PKR","PLN","RON","RUB","SEK","SGD","THB","TRY","TWD","USD","VND","ZAR"],[PAYMENT_PROVIDER.WYRE]:["USD","EUR","GBP","AUD","CAD","NZD","ARS","BRL","CHF","CLP","COP","CZK","DKK","HKD","ILS","INR","ISK","JPY","KRW","MXN","MYR","NOK","PHP","PLN","SEK","THB","VND","ZAR"],[PAYMENT_PROVIDER.RAMPNETWORK]:["USD","EUR","GBP"],[PAYMENT_PROVIDER.XANPOOL]:["SGD","HKD","THB","PHP","INR","IDR","MYR","AUD","NZD","KRW"],[PAYMENT_PROVIDER.MERCURYO]:["EUR","USD","GBP","TRY","JPY","BRL","NGN","VND","MXN","KRW"],[PAYMENT_PROVIDER.TRANSAK]:["ARS","AUD","BBD","BGN","BMD","BRL","CAD","CHF","CLP","CRC","CZK","DKK","DOP","EUR","FJD","FKP","GBP","GIP","HRK","HUF","IDR","ILS","ISK","JMD","JPY","KES","KRW","MDL","MXN","MYR","NOK","NZD","PEN","PHP","PLN","PYG","RON","SEK","SGD","THB","TRY","TZS","USD","ZAR"],[PAYMENT_PROVIDER.BANXA]:["EUR","GBP","USD"]},cryptoCompareCurrenciesSet=new Set(["ETH","USDT","USDC","TUSD","EOSDT","USD","DAI","GUSD","DKKT","PAX","ILS","RUB","BYN","EUR","GBP","JPY","KRW","PLN","MXN","AUD","BRL","CAD","CHF","KPW","LAK","LBP","LKR","XOF","CNHT","DOGE","UAH","TRY","HKD","XJP","SGD","USC","NZD","NGN","RUR","COP","GHS","EGP","IDR","BHD","CRC","PEN","AED","DOP","PKR","HUF","VND","XAR","LTC","RON","OMR","MYR","DKK","UGX","ZMW","SAR","SEK","GEL","RWF","IRR","TZS","CNY","VEF","BDT","HRK","CLP","THB","XAF","ARS","UYU","SZL","KZT","NOK","KES","PAB","INR","CZK","MAD","TWD","PHP","ZAR","BOB","CDF","DASH","VES","ISK","MWK","BAM","TTD","XRP","JOD","RSD","HNL","BGN","GTQ","BWP","XMR","MMK","QAR","AOA","KWD","MUR","WUSD","WEUR","WAVES","WTRY","LRD","LSL","LYD","AWG","MDL","BTO","EURS","CHFT","MKD","MNT","MOP","MRO","MVR","VOLLAR","CKUSD","KHR","VUV","BITCNY","QC","BBD","NAD","NPR","PGK","PYG","BIF","BMD","BND","XLM","BNB","SCR","BAT","CRO","HT","KCS","LEO","LINK","MKR","NPXS","OMG","REP","ZB","ZIL","ZRX","BCH","BZD","CUP","CVE","DJF","DZD","ERN","ETB","FJD","FKP","BUSD","ANCT","ALL","AMD","ANG","CNYX","IQD","UZS","TND","GGP","XAU","KGS","GIP","JMD","ZEC","USDP","BSV","EMC2","SNT","GTO","POWR","EUSD","EURT","BCY","BTS","ATM","BLOCKPAY","ARDR","AMP","B2X","BITGOLD","BITEUR","ATB","BITUSD","AGRS","DFXT","HIKEN","BIX","KNC","EOS","COB","COSS","BMH","NANO","BDG","BNT","XVG","LKK1Y","LKK","USDK","EURN","NZDT","JSE","GMD","GNF","GYD","YER","XPF","HTG","SLL","SOS","WST","SVC","SYP","NEO","KMF","JUMP","AYA","BLAST","WGR","BCN","BTG","URALS","INN","USDQ","CNH","HUSD","BKRW","NZDX","EURX","CADX","USDEX","JPYX","AUDX","VNDC","EON","GBPX","CHFX","USDJ","IDRT","USDS","USDN","BIDR","IDK","BSD","BTN","KYD","NIO","SBD","SDG","SHP","TOP","XCD","XCHF","CNYT","GYEN","ZUSD","GOLD","TRX","TRYB","PLATC","STRAX","UST","GLM","VAI","BRZ","DDRST","XAUT","MIM"]);function supportedFiatCurrencies(provider){let providerSupportedFiatCurrencies=PROVIDER_SUPPORTED_FIAT_CURRENCIES[provider];return providerSupportedFiatCurrencies.filter(currency=>cryptoCompareCurrenciesSet.has(currency))}let paymentProviders$1={[PAYMENT_PROVIDER.MOONPAY]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"4.5% or 5 USD",line3:"2,000€/day, 10,000€/mo",supportPage:"https://help.moonpay.io/en/",minOrderValue:24.99,maxOrderValue:5e4,validCurrencies:supportedFiatCurrencies(PAYMENT_PROVIDER.MOONPAY),validCryptoCurrenciesByChain:{[SUPPORTED_PAYMENT_NETWORK.MAINNET]:[{value:"aave",display:"AAVE"},{value:"bat",display:"BAT"},{value:"dai",display:"DAI"},{value:"eth",display:"ETH"},{value:"mkr",display:"MKR"},{value:"matic",display:"MATIC"},{value:"usdt",display:"USDT"},{value:"usdc",display:"USDC"}],[SUPPORTED_PAYMENT_NETWORK.MATIC]:[{value:"eth_polygon",display:"ETH"},{value:"matic_polygon",display:"MATIC"},{value:"usdc_polygon",display:"USDC"}],[SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET]:[{value:"bnb_bsc",display:"BNB"},{value:"busd_bsc",display:"BUSD"}],[SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET]:[{value:"avax_cchain",display:"AVAX"}]},includeFees:!0,api:!0,enforceMax:!1},[PAYMENT_PROVIDER.WYRE]:{line1:"Apple Pay/ Debit/ Credit Card",line2:"4.9% + 30\xa2 or 5 USD",line3:"$250/day",supportPage:"https://support.sendwyre.com/en/",minOrderValue:5,maxOrderValue:500,validCurrencies:supportedFiatCurrencies(PAYMENT_PROVIDER.WYRE),validCryptoCurrenciesByChain:{[SUPPORTED_PAYMENT_NETWORK.MAINNET]:[{value:"AAVE",display:"AAVE"},{value:"BAT",display:"BAT"},{value:"BUSD",display:"BUSD"},{value:"DAI",display:"DAI"},{value:"ETH",display:"ETH"},{value:"MKR",display:"MKR"},{value:"UNI",display:"UNI"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[SUPPORTED_PAYMENT_NETWORK.MATIC]:[{value:"MUSDC",display:"USDC"}],[SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET]:[{value:"AVAXC",display:"AVAXC"}]},includeFees:!1,api:!0,enforceMax:!1},[PAYMENT_PROVIDER.RAMPNETWORK]:{line1:"Debit Card/ <br>Apple Pay/ Bank transfer",line2:"0.49% - 2.9%",line3:"5,000€/purchase, 20,000€/mo",supportPage:"https://instant.ramp.network/",minOrderValue:50,maxOrderValue:2e4,validCurrencies:supportedFiatCurrencies(PAYMENT_PROVIDER.RAMPNETWORK),validCryptoCurrenciesByChain:{[SUPPORTED_PAYMENT_NETWORK.MAINNET]:[{value:"ETH",display:"ETH"},{value:"DAI",display:"DAI"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[SUPPORTED_PAYMENT_NETWORK.MATIC]:[{value:"MATIC_DAI",display:"DAI"},{value:"MATIC_MATIC",display:"MATIC"},{value:"MATIC_USDC",display:"USDC"}],[SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET]:[{value:"AVAX",display:"AVAX"}]},includeFees:!0,api:!0,receiveHint:"walletTopUp.receiveHintRamp",enforceMax:!1},[PAYMENT_PROVIDER.XANPOOL]:{line1:"PayNow/ InstaPay/ FPS/ GoJekPay/ UPI/ PromptPay/ <br>ViettelPay/ DuitNow",line2:"2.5% buying, 3% selling",line3:"$2,500 / day",supportPage:"mailto:support@xanpool.com",minOrderValue:100,maxOrderValue:2500,validCurrencies:supportedFiatCurrencies(PAYMENT_PROVIDER.XANPOOL),validCryptoCurrenciesByChain:{[SUPPORTED_PAYMENT_NETWORK.MAINNET]:[{value:"ETH",display:"ETH"},{value:"USDT",display:"USDT"}]},includeFees:!0,api:!0,sell:!0,enforceMax:!1},[PAYMENT_PROVIDER.MERCURYO]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"3.95% or 4 USD",line3:"10,000€/day, 25,000€/mo",supportPage:"mailto:support@mercuryo.io",minOrderValue:30,maxOrderValue:5e3,validCurrencies:supportedFiatCurrencies(PAYMENT_PROVIDER.MERCURYO),validCryptoCurrenciesByChain:{[SUPPORTED_PAYMENT_NETWORK.MAINNET]:[{value:"ETH",display:"ETH"},{value:"BAT",display:"BAT"},{value:"USDT",display:"USDT"},{value:"DAI",display:"DAI"}],[SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET]:[{value:"BNB",display:"BNB"},{value:"BUSD",display:"BUSD"},{value:"1INCH",display:"1INCH"}]},includeFees:!0,api:!0,enforceMax:!1},[PAYMENT_PROVIDER.TRANSAK]:{line1:"Apple & Google Pay / Credit/Debit Card<br/>Bangkok Bank Mobile & iPay<br/>Bank Transfer (sepa/gbp) / SCB Mobile & Easy",line2:"0.99% - 5.5% or 5 USD",line3:"$5,000/day, $28,000/mo",supportPage:"https://support.transak.com/hc/en-US",minOrderValue:30,maxOrderValue:500,validCurrencies:supportedFiatCurrencies(PAYMENT_PROVIDER.TRANSAK),validCryptoCurrenciesByChain:{[SUPPORTED_PAYMENT_NETWORK.MAINNET]:[{value:"AAVE",display:"AAVE"},{value:"DAI",display:"DAI"},{value:"ETH",display:"ETH"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[SUPPORTED_PAYMENT_NETWORK.MATIC]:[{value:"AAVE",display:"AAVE"},{value:"DAI",display:"DAI"},{value:"MATIC",display:"MATIC"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"},{value:"WETH",display:"WETH"}],[SUPPORTED_PAYMENT_NETWORK.BSC_MAINNET]:[{value:"BNB",display:"BNB"},{value:"BUSD",display:"BUSD"}],[SUPPORTED_PAYMENT_NETWORK.AVALANCHE_MAINNET]:[{value:"AVAX",display:"AVAX"}]},includeFees:!0,enforceMax:!0},[PAYMENT_PROVIDER.BANXA]:{line1:"Debit Card/ <br>Apple Pay/ Bank transfer",line2:"0.49% - 2.9%",line3:"5,000€/purchase, 20,000€/mo",supportPage:"https://support.banxa.com",minOrderValue:20,maxOrderValue:15e3,validCurrencies:supportedFiatCurrencies(PAYMENT_PROVIDER.BANXA),validCryptoCurrenciesByChain:{[SUPPORTED_PAYMENT_NETWORK.MAINNET]:[{value:"ETH",display:"ETH"},{value:"USDT",display:"USDT"},{value:"BUSD",display:"BUSD"},{value:"LINK",display:"LINK"},{value:"USDC",display:"USDC"},{value:"CHZ",display:"CHZ"},{value:"BAT",display:"BAT"},{value:"MANA",display:"MANA"},{value:"AAVE",display:"AAVE"},{value:"COMP",display:"COMP"},{value:"ENJ",display:"ENJ"}],[SUPPORTED_PAYMENT_NETWORK.MATIC]:[{value:"MATIC",display:"MATIC"}]},includeFees:!0,enforceMax:!0}};var configuration={supportedVerifierList:Object.values(WALLET_VERIFIERS),paymentProviders:paymentProviders$1,api:"https://api.tor.us",translations:{en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies ben\xf6tigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"継続する",actionRequired:"認証が必要です",pendingAction:"続行をクリックして、ポップアップでリクエストを続行します",cookiesRequired:"必要なクッキー",enableCookies:"Torusにアクセスするには、ブラウザの設定でCookieを有効にしてください。",clickHere:"詳しくは"}},ko:{embed:{continue:"계속하다",actionRequired:"승인 필요",pendingAction:"팝업에서 요청을 진행하려면 계속을 클릭하십시오.",cookiesRequired:"쿠키 필요",enableCookies:"브라우저 환경 설정에서 쿠키를 활성화하여 Torus에 액세스하십시오.",clickHere:"더 많은 정보"}},zh:{embed:{continue:"继续",actionRequired:"需要授权",pendingAction:"单击继续以在弹出窗口中继续您的请求",cookiesRequired:"必填Cookie",enableCookies:"请在您的浏览器首选项中启用cookie以访问Torus。",clickHere:"更多信息"}}},prodTorusUrl:"",localStorageKeyPrefix:"torus-"};let runOnLoad=fn=>new Promise((resolve,reject)=>{null!=window.document.body?Promise.resolve(fn()).then(resolve).catch(reject):window.document.addEventListener("DOMContentLoaded",()=>{Promise.resolve(fn()).then(resolve).catch(reject)})}),htmlToElement=html=>{let template=window.document.createElement("template"),trimmedHtml=html.trim();return template.innerHTML=trimmedHtml,template.content.firstChild},handleEvent=function(handle,eventName,handler){for(var _len=arguments.length,handlerArgs=Array(_len>3?_len-3:0),_key=3;_key<_len;_key++)handlerArgs[_key-3]=arguments[_key];let handlerWrapper=()=>{handler(...handlerArgs),handle.removeEventListener(eventName,handlerWrapper)};handle.addEventListener(eventName,handlerWrapper)},handleStream=(handle,eventName,handler)=>{let handlerWrapper=chunk=>{handler(chunk),handle.removeListener(eventName,handlerWrapper)};handle.on(eventName,handlerWrapper)};async function documentReady(){return new Promise(resolve=>{"loading"!==document.readyState?resolve():handleEvent(document,"DOMContentLoaded",resolve)})}var log=loglevel_default().getLogger("torus-embed"),messages={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",sendSiteMetadata:()=>"Torus: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:method=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${method} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:(maxEventListeners,shouldSendMetadata)=>`Invalid options. Received: { maxEventListeners: ${maxEventListeners}, shouldSendMetadata: ${shouldSendMetadata} }`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:method=>`'args.logger' must include required method '${method}'.`},info:{connected:chainId=>`Torus: Connected to chain with ID "${chainId}".`},warnings:{enableDeprecation:'Torus: ""ethereum.enable()" is deprecated and may be removed in the future. Please use "ethereum.send("eth_requestAccounts")" instead. For more information, see: https://eips.ethereum.org/EIPS/eip-1102',sendDeprecation:'Torus: "ethereum.send(...)" is deprecated and may be removed in the future. Please use "ethereum.sendAsync(...)" or "ethereum.request(...)" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',events:{close:'Torus: The event "close" is deprecated and may be removed in the future. Please use "disconnect" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',data:'Torus: The event "data" is deprecated and will be removed in the future.Use "message" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message',networkChanged:'Torus: The event "networkChanged" is deprecated and may be removed in the future. Please use "chainChanged" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',notification:'Torus: The event "notification" is deprecated and may be removed in the future. Please use "message" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193'},publicConfigStore:'Torus: The property "publicConfigStore" is deprecated and WILL be removed in the future.'}};let{paymentProviders}=configuration,validatePaymentProvider=(provider,params)=>{let errors={};if(!provider)return{errors,isValid:!0};if(provider&&!paymentProviders[provider])return errors.provider="Invalid Provider",{errors,isValid:0===Object.keys(errors).length};let selectedProvider=paymentProviders[provider],selectedParams=params||{};if(selectedParams.fiatValue){let requestedOrderAmount=+parseFloat(selectedParams.fiatValue.toString())||0;requestedOrderAmount<selectedProvider.minOrderValue&&(errors.fiatValue="Requested amount is lower than supported"),requestedOrderAmount>selectedProvider.maxOrderValue&&selectedProvider.enforceMax&&(errors.fiatValue="Requested amount is higher than supported")}if(selectedParams.selectedCurrency&&!selectedProvider.validCurrencies.includes(selectedParams.selectedCurrency)&&(errors.selectedCurrency="Unsupported currency"),selectedParams.selectedCryptoCurrency){let validCryptoCurrenciesByChain=Object.values(selectedProvider.validCryptoCurrenciesByChain).flat().map(currency=>currency.value),finalCryptoCurrency=provider===PAYMENT_PROVIDER.MOONPAY?selectedParams.selectedCryptoCurrency.toLowerCase():selectedParams.selectedCryptoCurrency;validCryptoCurrenciesByChain&&!validCryptoCurrenciesByChain.includes(finalCryptoCurrency)&&(errors.selectedCryptoCurrency="Unsupported cryptoCurrency")}return{errors,isValid:0===Object.keys(errors).length}};function logStreamDisconnectWarning(remoteLabel,error,emitter){let warningMsg=`MetaMask: Lost connection to "${remoteLabel}".`;null!=error&&error.stack&&(warningMsg+=`
${error.stack}`),log.warn(warningMsg),emitter&&emitter.listenerCount("error")>0&&emitter.emit("error",warningMsg)}let getPreopenInstanceId=()=>Math.random().toString(36).slice(2),getTorusUrl=async(buildEnv,integrity)=>{let torusUrl,logLevel;let version="1.38.4",versionUsed=integrity.version||version;try{if(("binance"===buildEnv||"production"===buildEnv)&&!integrity.version){let response;versionUsed=(response=configuration.prodTorusUrl?{data:configuration.prodTorusUrl}:await (0,httpHelpers_esm.U2)(`${configuration.api}/latestversion?name=@toruslabs/torus-embed&version=${version}`,{},{useAPIKey:!0})).data,configuration.prodTorusUrl=response.data}}catch(error){log.error(error,"unable to fetch latest version")}switch(log.info("version used: ",versionUsed),buildEnv){case"binance":torusUrl=`https://binance.tor.us/v${versionUsed}`,logLevel="info";break;case"testing":torusUrl="https://testing.tor.us",logLevel="debug";break;case"bnb":torusUrl="https://bnb.tor.us",logLevel="error";break;case"polygon":torusUrl="https://polygon.tor.us",logLevel="error";break;case"lrc":torusUrl="https://lrc.tor.us",logLevel="debug";break;case"beta":torusUrl="https://beta.tor.us",logLevel="debug";break;case"development":torusUrl="http://localhost:4050",logLevel="debug";break;default:torusUrl=`https://app.tor.us/v${versionUsed}`,logLevel="error"}return{torusUrl,logLevel}},getUserLanguage=()=>{let userLanguage=window.navigator.language||"en-US",userLanguages=userLanguage.split("-");return Object.prototype.hasOwnProperty.call(configuration.translations,userLanguages[0])?userLanguages[0]:"en"},EMITTED_NOTIFICATIONS=["eth_subscription"],NOOP=()=>{},FEATURES_PROVIDER_CHANGE_WINDOW="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375",FEATURES_CONFIRM_WINDOW="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=450";function ownKeys$1(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}openloginJrpc_esm.Ue.defaultMaxListeners=100;let getRpcPromiseCallback=function(resolve,reject){let unwrapResult=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return(error,response)=>error||response.error?reject(error||response.error):!unwrapResult||Array.isArray(response)?resolve(response):resolve(response.result)};class TorusInpageProvider extends openloginJrpc_esm.Ue{constructor(connectionStream){let{maxEventListeners=100,shouldSendMetadata=!0,jsonRpcStreamName="provider"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(super(),(0,defineProperty.Z)(this,"chainId",void 0),(0,defineProperty.Z)(this,"selectedAddress",void 0),(0,defineProperty.Z)(this,"_rpcEngine",void 0),(0,defineProperty.Z)(this,"networkVersion",void 0),(0,defineProperty.Z)(this,"shouldSendMetadata",void 0),(0,defineProperty.Z)(this,"isTorus",void 0),(0,defineProperty.Z)(this,"_publicConfigStore",void 0),(0,defineProperty.Z)(this,"tryPreopenHandle",void 0),(0,defineProperty.Z)(this,"enable",void 0),(0,defineProperty.Z)(this,"_state",void 0),(0,defineProperty.Z)(this,"_jsonRpcConnection",void 0),(0,defineProperty.Z)(this,"_sentWarnings",{enable:!1,experimentalMethods:!1,send:!1,publicConfigStore:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}}),!(0,is_stream.duplex)(connectionStream))throw Error(messages.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(maxEventListeners),this._state=function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys$1(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys$1(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}({},TorusInpageProvider._defaultState),this.selectedAddress=null,this.networkVersion=null,this.chainId=null,this.shouldSendMetadata=shouldSendMetadata,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._sendSync=this._sendSync.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this);let mux=new openloginJrpc_esm.O4;pump_default()(connectionStream,mux,connectionStream,this._handleStreamDisconnect.bind(this,"MetaMask")),this._publicConfigStore=new dist.ObservableStore({storageKey:"Metamask-Config"}),pump_default()(mux.createStream("publicConfig"),(0,dist.storeAsStream)(this._publicConfigStore),logStreamDisconnectWarning.bind(this,"MetaMask PublicConfigStore")),mux.ignoreStream("phishing"),this.on("connect",()=>{this._state.isConnected=!0});let jsonRpcConnection=(0,openloginJrpc_esm.AP)();pump_default()(jsonRpcConnection.stream,mux.createStream(jsonRpcStreamName),jsonRpcConnection.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider"));let rpcEngine=new openloginJrpc_esm.eI;rpcEngine.push((0,openloginJrpc_esm.Rq)()),rpcEngine.push((req,res,next)=>{"string"==typeof req.method&&req.method||(res.error=eth_rpc_errors_dist.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:req})),next(done=>{let{error}=res;return error&&log.error(`MetaMask - RPC Error: ${error.message}`,error),done()})}),rpcEngine.push(jsonRpcConnection.middleware),this._rpcEngine=rpcEngine,jsonRpcConnection.events.on("notification",payload=>{let{method,params}=payload;"wallet_accountsChanged"===method?this._handleAccountsChanged(params):"wallet_unlockStateChanged"===method?this._handleUnlockStateChanged(params):"wallet_chainChanged"===method?this._handleChainChanged(params):EMITTED_NOTIFICATIONS.includes(payload.method)&&(this.emit("data",payload),this.emit("notification",params.result),this.emit("message",{type:method,data:params}))})}get publicConfigStore(){return this._sentWarnings.publicConfigStore||(log.warn(messages.warnings.publicConfigStore),this._sentWarnings.publicConfigStore=!0),this._publicConfigStore}isConnected(){return this._state.isConnected}async request(args){if(!args||"object"!=typeof args||Array.isArray(args))throw eth_rpc_errors_dist.ethErrors.rpc.invalidRequest({message:messages.errors.invalidRequestArgs(),data:args});let{method,params}=args;if("string"!=typeof method||0===method.length)throw eth_rpc_errors_dist.ethErrors.rpc.invalidRequest({message:messages.errors.invalidRequestMethod(),data:args});if(void 0!==params&&!Array.isArray(params)&&("object"!=typeof params||null===params))throw eth_rpc_errors_dist.ethErrors.rpc.invalidRequest({message:messages.errors.invalidRequestParams(),data:args});return new Promise((resolve,reject)=>{this._rpcRequest({method,params},getRpcPromiseCallback(resolve,reject))})}sendAsync(payload,callback){this._rpcRequest(payload,callback)}addListener(eventName,listener){return this._warnOfDeprecation(eventName),super.addListener(eventName,listener)}on(eventName,listener){return this._warnOfDeprecation(eventName),super.on(eventName,listener)}once(eventName,listener){return this._warnOfDeprecation(eventName),super.once(eventName,listener)}prependListener(eventName,listener){return this._warnOfDeprecation(eventName),super.prependListener(eventName,listener)}prependOnceListener(eventName,listener){return this._warnOfDeprecation(eventName),super.prependOnceListener(eventName,listener)}async _initializeState(){try{let{accounts,chainId,isUnlocked,networkVersion}=await this.request({method:"wallet_getProviderState"});this.emit("connect",{chainId}),this._handleChainChanged({chainId,networkVersion}),this._handleUnlockStateChanged({accounts,isUnlocked}),this._handleAccountsChanged(accounts)}catch(error){log.error("MetaMask: Failed to get initial state. Please report this bug.",error)}finally{log.info("initialized state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(payload,callback){let isInternal=arguments.length>2&&void 0!==arguments[2]&&arguments[2],cb=callback,_payload=payload;if(!Array.isArray(_payload)){if(_payload.jsonrpc||(_payload.jsonrpc="2.0"),"eth_accounts"===_payload.method||"eth_requestAccounts"===_payload.method)cb=(err,res)=>{this._handleAccountsChanged(res.result||[],"eth_accounts"===_payload.method,isInternal),callback(err,res)};else if("wallet_getProviderState"===_payload.method){this._rpcEngine.handle(payload,cb);return}}this.tryPreopenHandle(_payload,cb)}send(methodOrPayload,callbackOrArgs){return(this._sentWarnings.send||(log.warn(messages.warnings.sendDeprecation),this._sentWarnings.send=!0),"string"==typeof methodOrPayload&&(!callbackOrArgs||Array.isArray(callbackOrArgs)))?new Promise((resolve,reject)=>{try{this._rpcRequest({method:methodOrPayload,params:callbackOrArgs},getRpcPromiseCallback(resolve,reject,!1))}catch(error){reject(error)}}):methodOrPayload&&"object"==typeof methodOrPayload&&"function"==typeof callbackOrArgs?this._rpcRequest(methodOrPayload,callbackOrArgs):this._sendSync(methodOrPayload)}_sendSync(payload){let result;switch(payload.method){case"eth_accounts":result=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":result=this.selectedAddress||null;break;case"eth_uninstallFilter":this._rpcRequest(payload,NOOP),result=!0;break;case"net_version":result=this.networkVersion||null;break;default:throw Error(messages.errors.unsupportedSync(payload.method))}return{id:payload.id,jsonrpc:payload.jsonrpc,result}}_handleConnect(chainId){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId}),log.debug(messages.info.connected(chainId)))}_handleDisconnect(isRecoverable,errorMessage){if(this._state.isConnected||!this._state.isPermanentlyDisconnected&&!isRecoverable){let error;this._state.isConnected=!1,isRecoverable?(error=new eth_rpc_errors_dist.EthereumRpcError(1013,errorMessage||messages.errors.disconnected()),log.debug(error)):(error=new eth_rpc_errors_dist.EthereumRpcError(1011,errorMessage||messages.errors.permanentlyDisconnected()),log.error(error),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",error)}}_handleStreamDisconnect(streamName,error){logStreamDisconnectWarning(streamName,error,this),this._handleDisconnect(!1,error?error.message:void 0)}_handleAccountsChanged(accounts){let isEthAccounts=arguments.length>1&&void 0!==arguments[1]&&arguments[1],isInternal=arguments.length>2&&void 0!==arguments[2]&&arguments[2],finalAccounts=accounts;for(let account of(Array.isArray(finalAccounts)||(log.error("MetaMask: Received non-array accounts parameter. Please report this bug.",finalAccounts),finalAccounts=[]),accounts))if("string"!=typeof account){log.error("MetaMask: Received non-string account. Please report this bug.",accounts),finalAccounts=[];break}fast_deep_equal_default()(this._state.accounts,finalAccounts)||(isEthAccounts&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!isInternal&&log.error('MetaMask: "eth_accounts" unexpectedly updated accounts. Please report this bug.',finalAccounts),this._state.accounts=finalAccounts,this.emit("accountsChanged",finalAccounts)),this.selectedAddress!==finalAccounts[0]&&(this.selectedAddress=finalAccounts[0]||null)}_handleChainChanged(){let{chainId,networkVersion}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!chainId||!networkVersion){log.error("MetaMask: Received invalid network parameters. Please report this bug.",{chainId,networkVersion});return}"loading"===networkVersion?this._handleDisconnect(!0):(this._handleConnect(chainId),chainId!==this.chainId&&(this.chainId=chainId,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts,isUnlocked}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("boolean"!=typeof isUnlocked){log.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked});return}isUnlocked!==this._state.isUnlocked&&(this._state.isUnlocked=isUnlocked,this._handleAccountsChanged(accounts||[]))}_warnOfDeprecation(eventName){!1===this._sentWarnings.events[eventName]&&(log.warn(messages.warnings.events[eventName]),this._sentWarnings.events[eventName]=!0)}}(0,defineProperty.Z)(TorusInpageProvider,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});let defaults=options=>({algorithms:options.algorithms||["sha256"],delimiter:options.delimiter||" ",full:options.full||!1}),hashes=(options,data)=>{let internalHashes={};return options.algorithms.forEach(algorithm=>{internalHashes[algorithm]=browser_default()(algorithm).update(data,"utf8").digest("base64")}),internalHashes},integrity=(options,sri)=>""+Object.keys(sri.hashes).map(algorithm=>`${algorithm}-${sri.hashes[algorithm]}`).join(options.delimiter),main=(options,data)=>{let finalOptions=defaults(options),sri={hashes:hashes(finalOptions,data),integrity:void 0};return sri.integrity=integrity(finalOptions,sri),finalOptions.full?sri:sri.integrity};class PopupHandler extends events.EventEmitter{constructor(_ref){let{url,target,features}=_ref;super(),(0,defineProperty.Z)(this,"url",void 0),(0,defineProperty.Z)(this,"target",void 0),(0,defineProperty.Z)(this,"features",void 0),(0,defineProperty.Z)(this,"window",void 0),(0,defineProperty.Z)(this,"windowTimer",void 0),(0,defineProperty.Z)(this,"iClosedWindow",void 0),this.url=url,this.target=target||"_blank",this.features=features||function(){let dualScreenLeft=void 0!==window.screenLeft?window.screenLeft:window.screenX,dualScreenTop=void 0!==window.screenTop?window.screenTop:window.screenY,width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,features=`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=1200,top=${Math.abs((height-700)/2/1+dualScreenTop)},left=${Math.abs((width-1200)/2/1+dualScreenLeft)}`;return features}(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0),void 0===this.window&&clearInterval(this.windowTimer)},500))}open(){var _this$window;return this.window=window.open(this.url.href,this.target,this.features),null!==(_this$window=this.window)&&void 0!==_this$window&&_this$window.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(locationReplaceOnRedirect){locationReplaceOnRedirect?window.location.replace(this.url.href):window.location.href=this.url.href}}function imgExists(url){return new Promise((resolve,reject)=>{try{let img=document.createElement("img");img.onload=()=>resolve(!0),img.onerror=()=>resolve(!1),img.src=url}catch(e){reject(e)}})}let getSiteName=window1=>{let{document:document1}=window1,siteName=document1.querySelector('head > meta[property="og:site_name"]');if(siteName)return siteName.content;let metaTitle=document1.querySelector('head > meta[name="title"]');return metaTitle?metaTitle.content:document1.title&&document1.title.length>0?document1.title:window1.location.hostname};async function getSiteIcon(window1){let{document:document1}=window1,icon=document1.querySelector('head > link[rel="shortcut icon"]');return icon&&await imgExists(icon.href)||(icon=Array.from(document1.querySelectorAll('head > link[rel="icon"]')).find(_icon=>Boolean(_icon.href)))&&await imgExists(icon.href)?icon.href:null}let getSiteMetadata=async()=>({name:getSiteName(window),icon:await getSiteIcon(window)});async function sendSiteMetadata(engine){try{let domainMetadata=await getSiteMetadata();engine.handle({jsonrpc:"2.0",id:getPreopenInstanceId(),method:"wallet_sendDomainMetadata",params:domainMetadata},NOOP)}catch(error){log.error({message:messages.errors.sendSiteMetadata(),originalError:error})}}let _excluded=["host","chainId","networkName"];function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}let defaultVerifiers={[LOGIN_PROVIDER.GOOGLE]:!0,[LOGIN_PROVIDER.FACEBOOK]:!0,[LOGIN_PROVIDER.REDDIT]:!0,[LOGIN_PROVIDER.TWITCH]:!0,[LOGIN_PROVIDER.DISCORD]:!0},iframeIntegrity="sha384-T+WCZ2MxsFPjNOD0tMu5/jE7uv/qYaegHp2g7rq6/4iGVBsFxAUMNYJK0g9MKDok",UNSAFE_METHODS=["eth_sendTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","eth_getEncryptionPublicKey","eth_decrypt"];!async function(){try{if("undefined"==typeof document)return;let torusIframeHtml=document.createElement("link"),{torusUrl}=await getTorusUrl("production",{check:!1,hash:iframeIntegrity,version:""});torusIframeHtml.href=`${torusUrl}/popup`,torusIframeHtml.crossOrigin="anonymous",torusIframeHtml.type="text/html",torusIframeHtml.rel="prefetch",torusIframeHtml.relList&&torusIframeHtml.relList.supports&&torusIframeHtml.relList.supports("prefetch")&&document.head.appendChild(torusIframeHtml)}catch(error){log.warn(error)}}();class Torus{constructor(){let{buttonPosition=BUTTON_POSITION.BOTTOM_LEFT,buttonSize=56,modalZIndex=99999,apiKey="torus-default"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,defineProperty.Z)(this,"buttonPosition",BUTTON_POSITION.BOTTOM_LEFT),(0,defineProperty.Z)(this,"buttonSize",void 0),(0,defineProperty.Z)(this,"torusUrl",void 0),(0,defineProperty.Z)(this,"torusIframe",void 0),(0,defineProperty.Z)(this,"styleLink",void 0),(0,defineProperty.Z)(this,"isLoggedIn",void 0),(0,defineProperty.Z)(this,"isInitialized",void 0),(0,defineProperty.Z)(this,"torusWidgetVisibility",void 0),(0,defineProperty.Z)(this,"torusAlert",void 0),(0,defineProperty.Z)(this,"apiKey",void 0),(0,defineProperty.Z)(this,"modalZIndex",void 0),(0,defineProperty.Z)(this,"alertZIndex",void 0),(0,defineProperty.Z)(this,"torusAlertContainer",void 0),(0,defineProperty.Z)(this,"isIframeFullScreen",void 0),(0,defineProperty.Z)(this,"whiteLabel",void 0),(0,defineProperty.Z)(this,"requestedVerifier",void 0),(0,defineProperty.Z)(this,"currentVerifier",void 0),(0,defineProperty.Z)(this,"embedTranslations",void 0),(0,defineProperty.Z)(this,"ethereum",void 0),(0,defineProperty.Z)(this,"provider",void 0),(0,defineProperty.Z)(this,"communicationMux",void 0),(0,defineProperty.Z)(this,"isLoginCallback",void 0),(0,defineProperty.Z)(this,"paymentProviders",configuration.paymentProviders),(0,defineProperty.Z)(this,"loginHint",""),(0,defineProperty.Z)(this,"useWalletConnect",void 0),(0,defineProperty.Z)(this,"isCustomLogin",!1),this.buttonPosition=buttonPosition,this.buttonSize=buttonSize,this.torusUrl="",this.isLoggedIn=!1,this.isInitialized=!1,this.torusWidgetVisibility=!0,this.requestedVerifier="",this.currentVerifier="",this.apiKey=apiKey,(0,httpHelpers_esm.ut)(apiKey),this.modalZIndex=modalZIndex,this.alertZIndex=modalZIndex+1e3,this.isIframeFullScreen=!1}async init(){let{buildEnv=TORUS_BUILD_ENV.PRODUCTION,enableLogging=!1,enabledVerifiers=defaultVerifiers,network={host:"mainnet",chainId:null,networkName:"",blockExplorer:"",ticker:"",tickerName:""},loginConfig={},showTorusButton=!0,integrity={check:!1,hash:iframeIntegrity,version:""},whiteLabel,skipTKey=!1,useWalletConnect=!1,mfaLevel="default"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isInitialized)throw Error("Already initialized");let{torusUrl,logLevel}=await getTorusUrl(buildEnv,integrity);log.info(torusUrl,"url loaded"),this.torusUrl=torusUrl,this.whiteLabel=whiteLabel,this.useWalletConnect=useWalletConnect,this.isCustomLogin=!!(loginConfig&&Object.keys(loginConfig).length>0)||!!(whiteLabel&&Object.keys(whiteLabel).length>0),log.setDefaultLevel(logLevel),enableLogging?log.enableAll():log.disableAll(),this.torusWidgetVisibility=showTorusButton;let torusIframeUrl=new URL(torusUrl);torusIframeUrl.pathname.endsWith("/")?torusIframeUrl.pathname+="popup":torusIframeUrl.pathname+="/popup",torusIframeUrl.hash=`#isCustomLogin=${this.isCustomLogin}`,this.torusIframe=htmlToElement(`<iframe
        id="torusIframe"
        allow=${useWalletConnect?"camera":""}
        class="torusIframe"
        src="${torusIframeUrl.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%; color-scheme: none;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex}"
      ></iframe>`),this.torusAlertContainer=htmlToElement('<div id="torusAlertContainer"></div>'),this.torusAlertContainer.style.display="none",this.torusAlertContainer.style.setProperty("z-index",this.alertZIndex.toString());let link=window.document.createElement("link");link.setAttribute("rel","stylesheet"),link.setAttribute("type","text/css"),link.setAttribute("href",`${torusUrl}/css/widget.css`),this.styleLink=link;let{defaultLanguage=getUserLanguage(),customTranslations={}}=this.whiteLabel||{},mergedTranslations=lodash_merge_default()(configuration.translations,customTranslations),languageTranslations=mergedTranslations[defaultLanguage]||configuration.translations[getUserLanguage()];this.embedTranslations=languageTranslations.embed;let handleSetup=async()=>(await documentReady(),new Promise((resolve,reject)=>{this.torusIframe.onload=async()=>{this._setupWeb3();let initStream=this.communicationMux.getStream("init_stream");initStream.on("data",chunk=>{let{name,data,error}=chunk;"init_complete"===name&&data.success?(this.isInitialized=!0,this._displayIframe(this.isIframeFullScreen),resolve(void 0)):error&&reject(Error(error))}),initStream.write({name:"init_stream",data:{enabledVerifiers,loginConfig,whiteLabel:this.whiteLabel,buttonPosition:this.buttonPosition,buttonSize:this.buttonSize,torusWidgetVisibility:this.torusWidgetVisibility,apiKey:this.apiKey,skipTKey,network,mfaLevel}})},window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}));if("production"===buildEnv&&integrity.check){let fetchUrl=`${torusUrl}/popup`,resp=await fetch(fetchUrl,{cache:"reload"});if("max-age=3600"!==resp.headers.get("Cache-Control"))throw Error(`Unexpected Cache-Control headers, got ${resp.headers.get("Cache-Control")}`);let response=await resp.text(),calculatedIntegrity=main({algorithms:["sha384"]},response);if(log.info(calculatedIntegrity,"integrity"),calculatedIntegrity===integrity.hash)await handleSetup();else throw this.clearInit(),Error("Integrity check failed")}else await handleSetup()}login(){let{verifier="",login_hint:loginHint=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isInitialized)throw Error("Call init() first");return this.requestedVerifier=verifier,this.loginHint=loginHint,this.ethereum.enable()}logout(){return new Promise((resolve,reject)=>{if(!this.isLoggedIn){reject(Error("User has not logged in yet"));return}let logOutStream=this.communicationMux.getStream("logout");logOutStream.write({name:"logOut"});let statusStream=this.communicationMux.getStream("status"),statusStreamHandler=status=>{status.loggedIn?reject(Error("Some Error Occured")):(this.isLoggedIn=!1,this.currentVerifier="",this.requestedVerifier="",resolve())};handleStream(statusStream,"data",statusStreamHandler)})}async cleanUp(){this.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function isElement(element){return element instanceof Element||element instanceof HTMLDocument}isElement(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),isElement(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),isElement(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.torusWidgetVisibility=!1,this._sendWidgetVisibilityStatus(!1),this._displayIframe()}showTorusButton(){this.torusWidgetVisibility=!0,this._sendWidgetVisibilityStatus(!0),this._displayIframe()}setProvider(_ref){let{host="mainnet",chainId=null,networkName=""}=_ref,rest=function(source,excluded){if(null==source)return{};var key,i,target=function(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}(_ref,_excluded);return new Promise((resolve,reject)=>{let providerChangeStream=this.communicationMux.getStream("provider_change"),handler=chunk=>{let{err,success}=chunk.data;log.info(chunk),err?reject(err):success?resolve():reject(Error("some error occured"))};handleStream(providerChangeStream,"data",handler);let preopenInstanceId=getPreopenInstanceId();this._handleWindow(preopenInstanceId,{target:"_blank",features:FEATURES_PROVIDER_CHANGE_WINDOW}),providerChangeStream.write({name:"show_provider_change",data:{network:function(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}({host,chainId,networkName},rest),preopenInstanceId,override:!1}})})}showWallet(path){let params=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},showWalletStream=this.communicationMux.getStream("show_wallet"),finalPath=path?`/${path}`:"";showWalletStream.write({name:"show_wallet",data:{path:finalPath}});let showWalletHandler=chunk=>{if("show_wallet_instance"===chunk.name){let{instanceId}=chunk.data,finalUrl=new URL(`${this.torusUrl}/wallet${finalPath}`);finalUrl.searchParams.append("integrity","true"),finalUrl.searchParams.append("instanceId",instanceId),Object.keys(params).forEach(x=>{finalUrl.searchParams.append(x,params[x])}),finalUrl.hash=`#isCustomLogin=${this.isCustomLogin}`;let walletWindow=new PopupHandler({url:finalUrl,features:"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=740,width=1315"});walletWindow.open()}};handleStream(showWalletStream,"data",showWalletHandler)}async getPublicAddress(_ref2){let{verifier,verifierId,isExtended=!1}=_ref2;if(!configuration.supportedVerifierList.includes(verifier)||!WALLET_OPENLOGIN_VERIFIER_MAP[verifier])throw Error("Unsupported verifier");let openloginVerifier=WALLET_OPENLOGIN_VERIFIER_MAP[verifier],url=new URL("https://api.tor.us/lookup/torus");return url.searchParams.append("verifier",openloginVerifier),url.searchParams.append("verifierId",verifierId),url.searchParams.append("walletVerifier",verifier),url.searchParams.append("network","mainnet"),url.searchParams.append("isExtended",isExtended.toString()),(0,httpHelpers_esm.U2)(url.href,{headers:{"Content-Type":"application/json; charset=utf-8"}},{useAPIKey:!0})}getUserInfo(message){return new Promise((resolve,reject)=>{if(this.isLoggedIn){let userInfoAccessStream=this.communicationMux.getStream("user_info_access");userInfoAccessStream.write({name:"user_info_access_request"});let userInfoAccessHandler=chunk=>{let{name,data:{approved,payload,rejected,newRequest}}=chunk;if("user_info_access_response"===name){if(approved)resolve(payload);else if(rejected)reject(Error("User rejected the request"));else if(newRequest){let userInfoStream=this.communicationMux.getStream("user_info"),userInfoHandler=handlerChunk=>{"user_info_response"===handlerChunk.name&&(handlerChunk.data.approved?resolve(handlerChunk.data.payload):reject(Error("User rejected the request")))};handleStream(userInfoStream,"data",userInfoHandler);let preopenInstanceId=getPreopenInstanceId();this._handleWindow(preopenInstanceId,{target:"_blank",features:FEATURES_PROVIDER_CHANGE_WINDOW}),userInfoStream.write({name:"user_info_request",data:{message,preopenInstanceId}})}}};handleStream(userInfoAccessStream,"data",userInfoAccessHandler)}else reject(Error("User has not logged in yet"))})}initiateTopup(provider,params){return new Promise((resolve,reject)=>{if(this.isInitialized){let{errors,isValid}=validatePaymentProvider(provider,params);if(!isValid){reject(Error(JSON.stringify(errors)));return}let topupStream=this.communicationMux.getStream("topup"),topupHandler=chunk=>{"topup_response"===chunk.name&&(chunk.data.success?resolve(chunk.data.success):reject(Error(chunk.data.error)))};handleStream(topupStream,"data",topupHandler);let preopenInstanceId=getPreopenInstanceId();this._handleWindow(preopenInstanceId),topupStream.write({name:"topup_request",data:{provider,params,preopenInstanceId}})}else reject(Error("Torus is not initialized yet"))})}async loginWithPrivateKey(loginParams){let{privateKey,userInfo}=loginParams;return new Promise((resolve,reject)=>{if(this.isInitialized){if(32!==Buffer.from(privateKey,"hex").length){reject(Error("Invalid private key, Please provide a 32 byte valid secp25k1 private key"));return}let loginPrivKeyStream=this.communicationMux.getStream("login_with_private_key"),loginHandler=chunk=>{"login_with_private_key_response"===chunk.name&&(chunk.data.success?resolve(chunk.data.success):reject(Error(chunk.data.error)))};handleStream(loginPrivKeyStream,"data",loginHandler),loginPrivKeyStream.write({name:"login_with_private_key_request",data:{privateKey,userInfo}})}else reject(Error("Torus is not initialized yet"))})}async showWalletConnectScanner(){if(!this.useWalletConnect)throw Error("Set `useWalletConnect` as true in init function options to use wallet connect scanner");return new Promise((resolve,reject)=>{if(this.isLoggedIn){let walletConnectStream=this.communicationMux.getStream("wallet_connect_stream"),walletConnectHandler=chunk=>{"wallet_connect_stream_res"===chunk.name&&(chunk.data.success?resolve(chunk.data.success):reject(Error(chunk.data.error)),this._displayIframe())};handleStream(walletConnectStream,"data",walletConnectHandler),walletConnectStream.write({name:"wallet_connect_stream_req"}),this._displayIframe(!0)}else reject(Error("User has not logged in yet"))})}_handleWindow(preopenInstanceId){let{url,target,features}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(preopenInstanceId){let windowStream=this.communicationMux.getStream("window"),finalUrl=new URL(url||`${this.torusUrl}/redirect?preopenInstanceId=${preopenInstanceId}`);finalUrl.hash?finalUrl.hash+=`&isCustomLogin=${this.isCustomLogin}`:finalUrl.hash=`#isCustomLogin=${this.isCustomLogin}`;let handledWindow=new PopupHandler({url:finalUrl,target,features});if(handledWindow.open(),!handledWindow.window){this._createPopupBlockAlert(preopenInstanceId,finalUrl.href);return}windowStream.write({name:"opened_window",data:{preopenInstanceId}});let closeHandler=_ref3=>{let{preopenInstanceId:receivedId,close}=_ref3;receivedId===preopenInstanceId&&close&&(handledWindow.close(),windowStream.removeListener("data",closeHandler))};windowStream.on("data",closeHandler),handledWindow.once("close",()=>{windowStream.write({data:{preopenInstanceId,closed:!0}}),windowStream.removeListener("data",closeHandler)})}}_setEmbedWhiteLabel(element){let{theme}=this.whiteLabel||{};if(theme){let{isDark=!1,colors={}}=theme;isDark&&element.classList.add("torus-dark"),colors.torusBrand1&&element.style.setProperty("--torus-brand-1",colors.torusBrand1),colors.torusGray2&&element.style.setProperty("--torus-gray-2",colors.torusGray2)}}_getLogoUrl(){var _this$whiteLabel,_this$whiteLabel$them,_this$whiteLabel2,_this$whiteLabel3;let logoUrl=`${this.torusUrl}/images/torus_icon-blue.svg`;return null!==(_this$whiteLabel=this.whiteLabel)&&void 0!==_this$whiteLabel&&null!==(_this$whiteLabel$them=_this$whiteLabel.theme)&&void 0!==_this$whiteLabel$them&&_this$whiteLabel$them.isDark?(null===(_this$whiteLabel2=this.whiteLabel)||void 0===_this$whiteLabel2?void 0:_this$whiteLabel2.logoLight)||logoUrl:(null===(_this$whiteLabel3=this.whiteLabel)||void 0===_this$whiteLabel3?void 0:_this$whiteLabel3.logoDark)||logoUrl}_sendWidgetVisibilityStatus(status){let torusWidgetVisibilityStream=this.communicationMux.getStream("torus-widget-visibility");torusWidgetVisibilityStream.write({data:status})}_displayIframe(){let isFull=arguments.length>0&&void 0!==arguments[0]&&arguments[0],style={},size=this.buttonSize+14;if(isFull)style.display="block",style.width="100%",style.height="100%",style.top="0px",style.right="0px",style.left="0px",style.bottom="0px";else switch(style.display=this.torusWidgetVisibility?"block":"none",style.height=`${size}px`,style.width=`${size}px`,this.buttonPosition){case BUTTON_POSITION.TOP_LEFT:style.top="0px",style.left="0px",style.right="auto",style.bottom="auto";break;case BUTTON_POSITION.TOP_RIGHT:style.top="0px",style.right="0px",style.left="auto",style.bottom="auto";break;case BUTTON_POSITION.BOTTOM_RIGHT:style.bottom="0px",style.right="0px",style.top="auto",style.left="auto";break;case BUTTON_POSITION.BOTTOM_LEFT:default:style.bottom="0px",style.left="0px",style.top="auto",style.right="auto"}Object.assign(this.torusIframe.style,style),this.isIframeFullScreen=isFull}_setupWeb3(){log.info("setupWeb3 running");let metamaskStream=new openloginJrpc_esm.XR({name:"embed_metamask",target:"iframe_metamask",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),communicationStream=new openloginJrpc_esm.XR({name:"embed_comm",target:"iframe_comm",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),inpageProvider=new TorusInpageProvider(metamaskStream),detectAccountRequestPrototypeModifier=m=>{let originalMethod=inpageProvider[m];inpageProvider[m]=function(method){if(method&&"eth_requestAccounts"===method)return inpageProvider.enable();for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return originalMethod.apply(this,[method,...args])}};detectAccountRequestPrototypeModifier("send"),detectAccountRequestPrototypeModifier("sendAsync"),inpageProvider.enable=()=>new Promise((resolve,reject)=>{inpageProvider.sendAsync({jsonrpc:"2.0",id:getPreopenInstanceId(),method:"eth_requestAccounts",params:[]},(err,response)=>{let{result:res}=response||{};if(err)setTimeout(()=>{reject(err)},50);else if(Array.isArray(res)&&res.length>0){let handleLoginCb=()=>{if(""!==this.requestedVerifier&&this.currentVerifier!==this.requestedVerifier){let{requestedVerifier}=this;this.logout().then(_=>{this.requestedVerifier=requestedVerifier,this._showLoginPopup(!0,resolve,reject)}).catch(error=>reject(error))}else resolve(res)};this.isLoggedIn?handleLoginCb():this.isLoginCallback=handleLoginCb}else this._showLoginPopup(!0,resolve,reject)})}),inpageProvider.tryPreopenHandle=(payload,cb)=>{let _payload=payload;if(!Array.isArray(_payload)&&UNSAFE_METHODS.includes(_payload.method)){let preopenInstanceId=getPreopenInstanceId();this._handleWindow(preopenInstanceId,{target:"_blank",features:FEATURES_CONFIRM_WINDOW}),_payload.preopenInstanceId=preopenInstanceId}inpageProvider._rpcEngine.handle(_payload,cb)};let proxiedInpageProvider=new Proxy(inpageProvider,{deleteProperty:()=>!0});this.ethereum=proxiedInpageProvider;let communicationMux=(0,openloginJrpc_esm.V2)(communicationStream);this.communicationMux=communicationMux;let windowStream=communicationMux.getStream("window");windowStream.on("data",chunk=>{"create_window"===chunk.name&&this._createPopupBlockAlert(chunk.data.preopenInstanceId,chunk.data.url)});let widgetStream=communicationMux.getStream("widget");widgetStream.on("data",chunk=>{let{data}=chunk;this._displayIframe(data)});let statusStream=communicationMux.getStream("status");statusStream.on("data",status=>{status.loggedIn?(this.isLoggedIn=status.loggedIn,this.currentVerifier=status.verifier):this._displayIframe(),this.isLoginCallback&&(this.isLoginCallback(),delete this.isLoginCallback)}),this.provider=proxiedInpageProvider,this.provider.shouldSendMetadata&&sendSiteMetadata(this.provider._rpcEngine),inpageProvider._initializeState(),log.debug("Torus - injected provider")}_showLoginPopup(calledFromEmbed,resolve,reject){let loginHandler=data=>{let{err,selectedAddress}=data;err?(log.error(err),reject&&reject(err)):resolve&&resolve([selectedAddress]),this.isIframeFullScreen&&this._displayIframe()},oauthStream=this.communicationMux.getStream("oauth");if(this.requestedVerifier){handleStream(oauthStream,"data",loginHandler);let preopenInstanceId=getPreopenInstanceId();this._handleWindow(preopenInstanceId),oauthStream.write({name:"oauth",data:{calledFromEmbed,verifier:this.requestedVerifier,preopenInstanceId,login_hint:this.loginHint}})}else this._displayIframe(!0),handleStream(oauthStream,"data",loginHandler),oauthStream.write({name:"oauth_modal",data:{calledFromEmbed}})}_createPopupBlockAlert(preopenInstanceId,url){let logoUrl=this._getLogoUrl(),torusAlert=htmlToElement(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${logoUrl}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),successAlert=htmlToElement(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),btnContainer=htmlToElement('<div id="torusAlert__btn-container"></div>');btnContainer.appendChild(successAlert),torusAlert.appendChild(btnContainer);let bindOnLoad=()=>{successAlert.addEventListener("click",()=>{this._handleWindow(preopenInstanceId,{url,target:"_blank",features:FEATURES_CONFIRM_WINDOW}),torusAlert.remove(),0===this.torusAlertContainer.children.length&&(this.torusAlertContainer.style.display="none")})};this._setEmbedWhiteLabel(torusAlert);let attachOnLoad=()=>{this.torusAlertContainer.style.display="block",this.torusAlertContainer.appendChild(torusAlert)};runOnLoad(attachOnLoad),runOnLoad(bindOnLoad)}}var base_esm=__webpack_require__(45624),baseEvmAdapter_esm=__webpack_require__(35796);function torusEvmAdapter_esm_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function torusEvmAdapter_esm_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?torusEvmAdapter_esm_ownKeys(Object(source),!0).forEach(function(key){(0,defineProperty.Z)(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):torusEvmAdapter_esm_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}class TorusWalletAdapter extends baseEvmAdapter_esm.d{constructor(){let params=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),(0,defineProperty.Z)(this,"name",base_esm.rW.TORUS_EVM),(0,defineProperty.Z)(this,"adapterNamespace",base_esm.yk.EIP155),(0,defineProperty.Z)(this,"currentChainNamespace",base_esm.EN.EIP155),(0,defineProperty.Z)(this,"type",base_esm.hN.EXTERNAL),(0,defineProperty.Z)(this,"status",base_esm.MP.NOT_READY),(0,defineProperty.Z)(this,"torusInstance",null),(0,defineProperty.Z)(this,"torusWalletOptions",void 0),(0,defineProperty.Z)(this,"initParams",void 0),(0,defineProperty.Z)(this,"loginSettings",{}),(0,defineProperty.Z)(this,"rehydrated",!1),this.torusWalletOptions=params.adapterSettings||{},this.initParams=params.initParams||{},this.loginSettings=params.loginSettings||{},this.chainConfig=params.chainConfig||null,this.sessionTime=params.sessionTime||86400}get provider(){return this.status===base_esm.MP.CONNECTED&&this.torusInstance?this.torusInstance.provider:null}set provider(_){throw Error("Not implemented")}async init(options){let network;if(super.checkInitializationRequirements(),this.chainConfig){let{chainId,blockExplorer,displayName,rpcTarget,ticker,tickerName}=this.chainConfig;network={chainId:Number.parseInt(chainId,16),host:rpcTarget,blockExplorer,networkName:displayName,ticker,tickerName}}else{this.chainConfig=(0,base_esm.h2)(base_esm.EN.EIP155,1);let{blockExplorer:blockExplorer1,displayName:displayName1,chainId:chainId1,ticker:ticker1,tickerName:tickerName1}=this.chainConfig;network={chainId:Number.parseInt(chainId1,16),host:"mainnet",blockExplorer:blockExplorer1,networkName:displayName1,ticker:ticker1,tickerName:tickerName1}}this.torusInstance=new Torus(this.torusWalletOptions),base_esm.cM.debug("initializing torus evm adapter init"),await this.torusInstance.init(torusEvmAdapter_esm_objectSpread(torusEvmAdapter_esm_objectSpread({showTorusButton:!1},this.initParams),{},{network})),this.status=base_esm.MP.READY,this.emit(base_esm.n2.READY,base_esm.rW.TORUS_EVM);try{base_esm.cM.debug("initializing torus evm adapter"),options.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(error){base_esm.cM.error("Failed to connect with torus evm provider",error),this.emit(base_esm.n2.ERRORED,error)}}async connect(){if(super.checkConnectionRequirements(),!this.torusInstance)throw base_esm.Ty.notReady("Torus wallet is not initialized");this.status=base_esm.MP.CONNECTING,this.emit(base_esm.n2.CONNECTING,{adapter:base_esm.rW.TORUS_EVM});try{await this.torusInstance.login(this.loginSettings);let{chainId}=this.torusInstance.provider;if(chainId&&parseInt(chainId)!==parseInt(this.chainConfig.chainId,16)){let{chainId:_chainId,blockExplorer,displayName,rpcTarget,ticker,tickerName}=this.chainConfig,network={chainId:Number.parseInt(_chainId,16),host:rpcTarget,blockExplorer,networkName:displayName,tickerName,ticker};await this.torusInstance.setProvider(torusEvmAdapter_esm_objectSpread({},network));let updatedChainID=await this.torusInstance.ethereum.request({method:"eth_chainId"});if(updatedChainID&&parseInt(updatedChainID)!==parseInt(this.chainConfig.chainId,16))throw base_esm.Ty.fromCode(5e3,"Not connected to correct chainId. Expected: ".concat(this.chainConfig.chainId,", Current: ").concat(updatedChainID))}return this.status=base_esm.MP.CONNECTED,this.torusInstance.showTorusButton(),this.emit(base_esm.MP.CONNECTED,{adapter:base_esm.rW.TORUS_EVM,reconnected:this.rehydrated}),this.provider}catch(error){throw this.status=base_esm.MP.READY,this.rehydrated=!1,this.emit(base_esm.MP.ERRORED,error),error instanceof base_esm.up?error:base_esm.RM.connectionError("Failed to login with torus wallet")}}async disconnect(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};if(!this.torusInstance)throw base_esm.Ty.notReady("Torus wallet is not initialized");await super.disconnect(),await this.torusInstance.logout(),this.torusInstance.hideTorusButton(),options.cleanup?(this.status=base_esm.MP.NOT_READY,this.torusInstance=null):this.status=base_esm.MP.READY,this.rehydrated=!1,this.emit(base_esm.n2.DISCONNECTED)}async getUserInfo(){if(this.status!==base_esm.MP.CONNECTED)throw base_esm.RM.notConnectedError("Not connected with wallet");if(!this.torusInstance)throw base_esm.Ty.notReady("Torus wallet is not initialized");let userInfo=await this.torusInstance.getUserInfo("");return userInfo}setAdapterSettings(options){this.status!==base_esm.MP.READY&&null!=options&&options.sessionTime&&(this.sessionTime=options.sessionTime)}}},16497:function(__unused_webpack_module,exports,__webpack_require__){var Buffer=__webpack_require__(48764).Buffer;function objectToString(o){return Object.prototype.toString.call(o)}exports.isArray=function(arg){return Array.isArray?Array.isArray(arg):"[object Array]"===objectToString(arg)},exports.isBoolean=function(arg){return"boolean"==typeof arg},exports.isNull=function(arg){return null===arg},exports.isNullOrUndefined=function(arg){return null==arg},exports.isNumber=function(arg){return"number"==typeof arg},exports.isString=function(arg){return"string"==typeof arg},exports.isSymbol=function(arg){return"symbol"==typeof arg},exports.isUndefined=function(arg){return void 0===arg},exports.isRegExp=function(re){return"[object RegExp]"===objectToString(re)},exports.isObject=function(arg){return"object"==typeof arg&&null!==arg},exports.isDate=function(d){return"[object Date]"===objectToString(d)},exports.isError=function(e){return"[object Error]"===objectToString(e)||e instanceof Error},exports.isFunction=function(arg){return"function"==typeof arg},exports.isPrimitive=function(arg){return null===arg||"boolean"==typeof arg||"number"==typeof arg||"string"==typeof arg||"symbol"==typeof arg||void 0===arg},exports.isBuffer=Buffer.isBuffer},64063:function(module){"use strict";module.exports=function equal(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;if(Array.isArray(a)){if((length=a.length)!=b.length)return!1;for(i=length;0!=i--;)if(!equal(a[i],b[i]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();if((length=(keys=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(i=length;0!=i--;)if(!Object.prototype.hasOwnProperty.call(b,keys[i]))return!1;for(i=length;0!=i--;){var length,i,keys,key=keys[i];if(!equal(a[key],b[key]))return!1}return!0}return a!=a&&b!=b}},24970:function(module){"use strict";let isStream=stream=>null!==stream&&"object"==typeof stream&&"function"==typeof stream.pipe;isStream.writable=stream=>isStream(stream)&&!1!==stream.writable&&"function"==typeof stream._write&&"object"==typeof stream._writableState,isStream.readable=stream=>isStream(stream)&&!1!==stream.readable&&"function"==typeof stream._read&&"object"==typeof stream._readableState,isStream.duplex=stream=>isStream.writable(stream)&&isStream.readable(stream),isStream.transform=stream=>isStream.duplex(stream)&&"function"==typeof stream._transform,module.exports=isStream},88212:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var process=__webpack_require__(34155);void 0!==process&&process.version&&0!==process.version.indexOf("v0.")&&(0!==process.version.indexOf("v1.")||0===process.version.indexOf("v1.8."))?module.exports=process:module.exports={nextTick:function(fn,arg1,arg2,arg3){if("function"!=typeof fn)throw TypeError('"callback" argument must be a function');var args,i,len=arguments.length;switch(len){case 0:case 1:return process.nextTick(fn);case 2:return process.nextTick(function(){fn.call(null,arg1)});case 3:return process.nextTick(function(){fn.call(null,arg1,arg2)});case 4:return process.nextTick(function(){fn.call(null,arg1,arg2,arg3)});default:for(args=Array(len-1),i=0;i<args.length;)args[i++]=arguments[i];return process.nextTick(function(){fn.apply(null,args)})}}}},35940:function(module){var toString={}.toString;module.exports=Array.isArray||function(arr){return"[object Array]"==toString.call(arr)}},45867:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var pna=__webpack_require__(88212),objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj)keys.push(key);return keys};module.exports=Duplex;var util=Object.create(__webpack_require__(16497));util.inherits=__webpack_require__(93524);var Readable=__webpack_require__(44278),Writable=__webpack_require__(10759);util.inherits(Duplex,Readable);for(var keys=objectKeys(Writable.prototype),v=0;v<keys.length;v++){var method=keys[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(options){if(!(this instanceof Duplex))return new Duplex(options);Readable.call(this,options),Writable.call(this,options),options&&!1===options.readable&&(this.readable=!1),options&&!1===options.writable&&(this.writable=!1),this.allowHalfOpen=!0,options&&!1===options.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||pna.nextTick(onEndNT,this)}function onEndNT(self1){self1.end()}Object.defineProperty(Duplex.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(Duplex.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(value){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=value,this._writableState.destroyed=value)}}),Duplex.prototype._destroy=function(err,cb){this.push(null),this.end(),pna.nextTick(cb,err)}},3431:function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=PassThrough;var Transform=__webpack_require__(60062),util=Object.create(__webpack_require__(16497));function PassThrough(options){if(!(this instanceof PassThrough))return new PassThrough(options);Transform.call(this,options)}util.inherits=__webpack_require__(93524),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(chunk,encoding,cb){cb(null,chunk)}},44278:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var Duplex,StringDecoder,process=__webpack_require__(34155),pna=__webpack_require__(88212);module.exports=Readable;var isArray=__webpack_require__(35940);Readable.ReadableState=ReadableState,__webpack_require__(17187).EventEmitter;var EElistenerCount=function(emitter,type){return emitter.listeners(type).length},Stream=__webpack_require__(84104),Buffer=__webpack_require__(64591).Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){},util=Object.create(__webpack_require__(16497));util.inherits=__webpack_require__(93524);var debugUtil=__webpack_require__(66882),debug=void 0;debug=debugUtil&&debugUtil.debuglog?debugUtil.debuglog("stream"):function(){};var BufferList=__webpack_require__(93912),destroyImpl=__webpack_require__(55513);util.inherits(Readable,Stream);var kProxyEvents=["error","close","destroy","pause","resume"];function ReadableState(options,stream){Duplex=Duplex||__webpack_require__(45867),options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.readableObjectMode);var hwm=options.highWaterMark,readableHwm=options.readableHighWaterMark,defaultHwm=this.objectMode?16:16384;hwm||0===hwm?this.highWaterMark=hwm:isDuplex&&(readableHwm||0===readableHwm)?this.highWaterMark=readableHwm:this.highWaterMark=defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=options.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,options.encoding&&(StringDecoder||(StringDecoder=__webpack_require__(47989).s),this.decoder=new StringDecoder(options.encoding),this.encoding=options.encoding)}function Readable(options){if(Duplex=Duplex||__webpack_require__(45867),!(this instanceof Readable))return new Readable(options);this._readableState=new ReadableState(options,this),this.readable=!0,options&&("function"==typeof options.read&&(this._read=options.read),"function"==typeof options.destroy&&(this._destroy=options.destroy)),Stream.call(this)}function readableAddChunk(stream,chunk,encoding,addToFront,skipChunkCheck){var state,chunk1,er,chunk2,er1,state1=stream._readableState;return null===chunk?(state1.reading=!1,function(stream,state){if(!state.ended){if(state.decoder){var chunk=state.decoder.end();chunk&&chunk.length&&(state.buffer.push(chunk),state.length+=state.objectMode?1:chunk.length)}state.ended=!0,emitReadable(stream)}}(stream,state1)):(skipChunkCheck||(state=state1,chunk1=chunk,Buffer.isBuffer(chunk1)||chunk1 instanceof OurUint8Array||"string"==typeof chunk1||void 0===chunk1||state.objectMode||(er=TypeError("Invalid non-string/buffer chunk")),er1=er),er1)?stream.emit("error",er1):state1.objectMode||chunk&&chunk.length>0?("string"==typeof chunk||state1.objectMode||Object.getPrototypeOf(chunk)===Buffer.prototype||(chunk2=chunk,chunk=Buffer.from(chunk2)),addToFront?state1.endEmitted?stream.emit("error",Error("stream.unshift() after end event")):addChunk(stream,state1,chunk,!0):state1.ended?stream.emit("error",Error("stream.push() after EOF")):(state1.reading=!1,state1.decoder&&!encoding?(chunk=state1.decoder.write(chunk),state1.objectMode||0!==chunk.length?addChunk(stream,state1,chunk,!1):maybeReadMore(stream,state1)):addChunk(stream,state1,chunk,!1))):addToFront||(state1.reading=!1),!state1.ended&&(state1.needReadable||state1.length<state1.highWaterMark||0===state1.length)}function addChunk(stream,state,chunk,addToFront){state.flowing&&0===state.length&&!state.sync?(stream.emit("data",chunk),stream.read(0)):(state.length+=state.objectMode?1:chunk.length,addToFront?state.buffer.unshift(chunk):state.buffer.push(chunk),state.needReadable&&emitReadable(stream)),maybeReadMore(stream,state)}function howMuchToRead(n,state){if(n<=0||0===state.length&&state.ended)return 0;if(state.objectMode)return 1;if(n!=n)return state.flowing&&state.length?state.buffer.head.data.length:state.length;if(n>state.highWaterMark){var n1;state.highWaterMark=((n1=n)>=8388608?n1=8388608:(n1--,n1|=n1>>>1,n1|=n1>>>2,n1|=n1>>>4,n1|=n1>>>8,n1|=n1>>>16,n1++),n1)}return n<=state.length?n:state.ended?state.length:(state.needReadable=!0,0)}function emitReadable(stream){var state=stream._readableState;state.needReadable=!1,state.emittedReadable||(debug("emitReadable",state.flowing),state.emittedReadable=!0,state.sync?pna.nextTick(emitReadable_,stream):emitReadable_(stream))}function emitReadable_(stream){debug("emit readable"),stream.emit("readable"),flow(stream)}function maybeReadMore(stream,state){state.readingMore||(state.readingMore=!0,pna.nextTick(maybeReadMore_,stream,state))}function maybeReadMore_(stream,state){for(var len=state.length;!state.reading&&!state.flowing&&!state.ended&&state.length<state.highWaterMark&&(debug("maybeReadMore read 0"),stream.read(0),len!==state.length);)len=state.length;state.readingMore=!1}function nReadingNextTick(self1){debug("readable nexttick read 0"),self1.read(0)}function resume_(stream,state){state.reading||(debug("resume read 0"),stream.read(0)),state.resumeScheduled=!1,state.awaitDrain=0,stream.emit("resume"),flow(stream),state.flowing&&!state.reading&&stream.read(0)}function flow(stream){var state=stream._readableState;for(debug("flow",state.flowing);state.flowing&&null!==stream.read(););}function fromList(n,state){var ret,list,hasStrings,ret1;return 0===state.length?null:(state.objectMode?ret=state.buffer.shift():!n||n>=state.length?(ret=state.decoder?state.buffer.join(""):1===state.buffer.length?state.buffer.head.data:state.buffer.concat(state.length),state.buffer.clear()):(list=state.buffer,hasStrings=state.decoder,n<list.head.data.length?(ret1=list.head.data.slice(0,n),list.head.data=list.head.data.slice(n)):ret1=n===list.head.data.length?list.shift():hasStrings?function(n,list){var p=list.head,c=1,ret=p.data;for(n-=ret.length;p=p.next;){var str=p.data,nb=n>str.length?str.length:n;if(nb===str.length?ret+=str:ret+=str.slice(0,n),0==(n-=nb)){nb===str.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=str.slice(nb));break}++c}return list.length-=c,ret}(n,list):function(n,list){var ret=Buffer.allocUnsafe(n),p=list.head,c=1;for(p.data.copy(ret),n-=p.data.length;p=p.next;){var buf=p.data,nb=n>buf.length?buf.length:n;if(buf.copy(ret,ret.length-n,0,nb),0==(n-=nb)){nb===buf.length?(++c,p.next?list.head=p.next:list.head=list.tail=null):(list.head=p,p.data=buf.slice(nb));break}++c}return list.length-=c,ret}(n,list),ret=ret1),ret)}function endReadable(stream){var state=stream._readableState;if(state.length>0)throw Error('"endReadable()" called on non-empty stream');state.endEmitted||(state.ended=!0,pna.nextTick(endReadableNT,state,stream))}function endReadableNT(state,stream){state.endEmitted||0!==state.length||(state.endEmitted=!0,stream.readable=!1,stream.emit("end"))}function indexOf(xs,x){for(var i=0,l=xs.length;i<l;i++)if(xs[i]===x)return i;return -1}Object.defineProperty(Readable.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(value){this._readableState&&(this._readableState.destroyed=value)}}),Readable.prototype.destroy=destroyImpl.destroy,Readable.prototype._undestroy=destroyImpl.undestroy,Readable.prototype._destroy=function(err,cb){this.push(null),cb(err)},Readable.prototype.push=function(chunk,encoding){var skipChunkCheck,state=this._readableState;return state.objectMode?skipChunkCheck=!0:"string"==typeof chunk&&((encoding=encoding||state.defaultEncoding)!==state.encoding&&(chunk=Buffer.from(chunk,encoding),encoding=""),skipChunkCheck=!0),readableAddChunk(this,chunk,encoding,!1,skipChunkCheck)},Readable.prototype.unshift=function(chunk){return readableAddChunk(this,chunk,null,!0,!1)},Readable.prototype.isPaused=function(){return!1===this._readableState.flowing},Readable.prototype.setEncoding=function(enc){return StringDecoder||(StringDecoder=__webpack_require__(47989).s),this._readableState.decoder=new StringDecoder(enc),this._readableState.encoding=enc,this},Readable.prototype.read=function(n){debug("read",n),n=parseInt(n,10);var ret,state=this._readableState,nOrig=n;if(0!==n&&(state.emittedReadable=!1),0===n&&state.needReadable&&(state.length>=state.highWaterMark||state.ended))return debug("read: emitReadable",state.length,state.ended),0===state.length&&state.ended?endReadable(this):emitReadable(this),null;if(0===(n=howMuchToRead(n,state))&&state.ended)return 0===state.length&&endReadable(this),null;var doRead=state.needReadable;return debug("need readable",doRead),(0===state.length||state.length-n<state.highWaterMark)&&debug("length less than watermark",doRead=!0),state.ended||state.reading?debug("reading or ended",doRead=!1):doRead&&(debug("do read"),state.reading=!0,state.sync=!0,0===state.length&&(state.needReadable=!0),this._read(state.highWaterMark),state.sync=!1,state.reading||(n=howMuchToRead(nOrig,state))),null===(ret=n>0?fromList(n,state):null)?(state.needReadable=!0,n=0):state.length-=n,0===state.length&&(state.ended||(state.needReadable=!0),nOrig!==n&&state.ended&&endReadable(this)),null!==ret&&this.emit("data",ret),ret},Readable.prototype._read=function(n){this.emit("error",Error("_read() is not implemented"))},Readable.prototype.pipe=function(dest,pipeOpts){var src=this,state=this._readableState;switch(state.pipesCount){case 0:state.pipes=dest;break;case 1:state.pipes=[state.pipes,dest];break;default:state.pipes.push(dest)}state.pipesCount+=1,debug("pipe count=%d opts=%j",state.pipesCount,pipeOpts);var endFn=pipeOpts&&!1===pipeOpts.end||dest===process.stdout||dest===process.stderr?unpipe:onend;function onend(){debug("onend"),dest.end()}state.endEmitted?pna.nextTick(endFn):src.once("end",endFn),dest.on("unpipe",function onunpipe(readable,unpipeInfo){debug("onunpipe"),readable===src&&unpipeInfo&&!1===unpipeInfo.hasUnpiped&&(unpipeInfo.hasUnpiped=!0,debug("cleanup"),dest.removeListener("close",onclose),dest.removeListener("finish",onfinish),dest.removeListener("drain",ondrain),dest.removeListener("error",onerror),dest.removeListener("unpipe",onunpipe),src.removeListener("end",onend),src.removeListener("end",unpipe),src.removeListener("data",ondata),cleanedUp=!0,state.awaitDrain&&(!dest._writableState||dest._writableState.needDrain)&&ondrain())});var ondrain=function(){var state=src._readableState;debug("pipeOnDrain",state.awaitDrain),state.awaitDrain&&state.awaitDrain--,0===state.awaitDrain&&EElistenerCount(src,"data")&&(state.flowing=!0,flow(src))};dest.on("drain",ondrain);var cleanedUp=!1,increasedAwaitDrain=!1;function ondata(chunk){debug("ondata"),increasedAwaitDrain=!1,!1!==dest.write(chunk)||increasedAwaitDrain||((1===state.pipesCount&&state.pipes===dest||state.pipesCount>1&&-1!==indexOf(state.pipes,dest))&&!cleanedUp&&(debug("false write response, pause",src._readableState.awaitDrain),src._readableState.awaitDrain++,increasedAwaitDrain=!0),src.pause())}function onerror(er){debug("onerror",er),unpipe(),dest.removeListener("error",onerror),0===EElistenerCount(dest,"error")&&dest.emit("error",er)}function onclose(){dest.removeListener("finish",onfinish),unpipe()}function onfinish(){debug("onfinish"),dest.removeListener("close",onclose),unpipe()}function unpipe(){debug("unpipe"),src.unpipe(dest)}return src.on("data",ondata),function(emitter,event,fn){if("function"==typeof emitter.prependListener)return emitter.prependListener(event,fn);emitter._events&&emitter._events[event]?isArray(emitter._events[event])?emitter._events[event].unshift(fn):emitter._events[event]=[fn,emitter._events[event]]:emitter.on(event,fn)}(dest,"error",onerror),dest.once("close",onclose),dest.once("finish",onfinish),dest.emit("pipe",src),state.flowing||(debug("pipe resume"),src.resume()),dest},Readable.prototype.unpipe=function(dest){var state=this._readableState,unpipeInfo={hasUnpiped:!1};if(0===state.pipesCount)return this;if(1===state.pipesCount)return dest&&dest!==state.pipes||(dest||(dest=state.pipes),state.pipes=null,state.pipesCount=0,state.flowing=!1,dest&&dest.emit("unpipe",this,unpipeInfo)),this;if(!dest){var dests=state.pipes,len=state.pipesCount;state.pipes=null,state.pipesCount=0,state.flowing=!1;for(var i=0;i<len;i++)dests[i].emit("unpipe",this,unpipeInfo);return this}var index=indexOf(state.pipes,dest);return -1===index||(state.pipes.splice(index,1),state.pipesCount-=1,1===state.pipesCount&&(state.pipes=state.pipes[0]),dest.emit("unpipe",this,unpipeInfo)),this},Readable.prototype.on=function(ev,fn){var res=Stream.prototype.on.call(this,ev,fn);if("data"===ev)!1!==this._readableState.flowing&&this.resume();else if("readable"===ev){var state=this._readableState;state.endEmitted||state.readableListening||(state.readableListening=state.needReadable=!0,state.emittedReadable=!1,state.reading?state.length&&emitReadable(this):pna.nextTick(nReadingNextTick,this))}return res},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var state,state1=this._readableState;return state1.flowing||(debug("resume"),state1.flowing=!0,(state=state1).resumeScheduled||(state.resumeScheduled=!0,pna.nextTick(resume_,this,state))),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(stream){var _this=this,state=this._readableState,paused=!1;for(var i in stream.on("end",function(){if(debug("wrapped end"),state.decoder&&!state.ended){var chunk=state.decoder.end();chunk&&chunk.length&&_this.push(chunk)}_this.push(null)}),stream.on("data",function(chunk){debug("wrapped data"),state.decoder&&(chunk=state.decoder.write(chunk)),(!state.objectMode||null!=chunk)&&(state.objectMode||chunk&&chunk.length)&&(_this.push(chunk)||(paused=!0,stream.pause()))}),stream)void 0===this[i]&&"function"==typeof stream[i]&&(this[i]=function(method){return function(){return stream[method].apply(stream,arguments)}}(i));for(var n=0;n<kProxyEvents.length;n++)stream.on(kProxyEvents[n],this.emit.bind(this,kProxyEvents[n]));return this._read=function(n){debug("wrapped _read",n),paused&&(paused=!1,stream.resume())},this},Object.defineProperty(Readable.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Readable._fromList=fromList},60062:function(module,__unused_webpack_exports,__webpack_require__){"use strict";module.exports=Transform;var Duplex=__webpack_require__(45867),util=Object.create(__webpack_require__(16497));function afterTransform(er,data){var ts=this._transformState;ts.transforming=!1;var cb=ts.writecb;if(!cb)return this.emit("error",Error("write callback called multiple times"));ts.writechunk=null,ts.writecb=null,null!=data&&this.push(data),cb(er);var rs=this._readableState;rs.reading=!1,(rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}function Transform(options){if(!(this instanceof Transform))return new Transform(options);Duplex.call(this,options),this._transformState={afterTransform:afterTransform.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,options&&("function"==typeof options.transform&&(this._transform=options.transform),"function"==typeof options.flush&&(this._flush=options.flush)),this.on("prefinish",prefinish)}function prefinish(){var _this=this;"function"==typeof this._flush?this._flush(function(er,data){done(_this,er,data)}):done(this,null,null)}function done(stream,er,data){if(er)return stream.emit("error",er);if(null!=data&&stream.push(data),stream._writableState.length)throw Error("Calling transform done when ws.length != 0");if(stream._transformState.transforming)throw Error("Calling transform done when still transforming");return stream.push(null)}util.inherits=__webpack_require__(93524),util.inherits(Transform,Duplex),Transform.prototype.push=function(chunk,encoding){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,chunk,encoding)},Transform.prototype._transform=function(chunk,encoding,cb){throw Error("_transform() is not implemented")},Transform.prototype._write=function(chunk,encoding,cb){var ts=this._transformState;if(ts.writecb=cb,ts.writechunk=chunk,ts.writeencoding=encoding,!ts.transforming){var rs=this._readableState;(ts.needTransform||rs.needReadable||rs.length<rs.highWaterMark)&&this._read(rs.highWaterMark)}},Transform.prototype._read=function(n){var ts=this._transformState;null!==ts.writechunk&&ts.writecb&&!ts.transforming?(ts.transforming=!0,this._transform(ts.writechunk,ts.writeencoding,ts.afterTransform)):ts.needTransform=!0},Transform.prototype._destroy=function(err,cb){var _this2=this;Duplex.prototype._destroy.call(this,err,function(err2){cb(err2),_this2.emit("close")})}},10759:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var Duplex,realHasInstance,pna=__webpack_require__(88212);function CorkedRequest(state){var _this=this;this.next=null,this.entry=null,this.finish=function(){(function(corkReq,state,err){var entry=corkReq.entry;for(corkReq.entry=null;entry;){var cb=entry.callback;state.pendingcb--,cb(void 0),entry=entry.next}state.corkedRequestsFree?state.corkedRequestsFree.next=corkReq:state.corkedRequestsFree=corkReq})(_this,state)}}module.exports=Writable;var asyncWrite=pna.nextTick;Writable.WritableState=WritableState;var util=Object.create(__webpack_require__(16497));util.inherits=__webpack_require__(93524);var internalUtil={deprecate:__webpack_require__(94927)},Stream=__webpack_require__(84104),Buffer=__webpack_require__(64591).Buffer,OurUint8Array=__webpack_require__.g.Uint8Array||function(){},destroyImpl=__webpack_require__(55513);function nop(){}function WritableState(options,stream){Duplex=Duplex||__webpack_require__(45867),options=options||{};var isDuplex=stream instanceof Duplex;this.objectMode=!!options.objectMode,isDuplex&&(this.objectMode=this.objectMode||!!options.writableObjectMode);var hwm=options.highWaterMark,writableHwm=options.writableHighWaterMark,defaultHwm=this.objectMode?16:16384;hwm||0===hwm?this.highWaterMark=hwm:isDuplex&&(writableHwm||0===writableHwm)?this.highWaterMark=writableHwm:this.highWaterMark=defaultHwm,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var noDecode=!1===options.decodeStrings;this.decodeStrings=!noDecode,this.defaultEncoding=options.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(er){(function(stream,er){var state,stream1,state1=stream._writableState,sync=state1.sync,cb=state1.writecb;if((state=state1).writing=!1,state.writecb=null,state.length-=state.writelen,state.writelen=0,er)stream1=stream,--state1.pendingcb,sync?(pna.nextTick(cb,er),pna.nextTick(finishMaybe,stream1,state1),stream1._writableState.errorEmitted=!0,stream1.emit("error",er)):(cb(er),stream1._writableState.errorEmitted=!0,stream1.emit("error",er),finishMaybe(stream1,state1));else{var finished=needFinish(state1);finished||state1.corked||state1.bufferProcessing||!state1.bufferedRequest||clearBuffer(stream,state1),sync?asyncWrite(afterWrite,stream,state1,finished,cb):afterWrite(stream,state1,finished,cb)}})(stream,er)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}function Writable(options){if(Duplex=Duplex||__webpack_require__(45867),!realHasInstance.call(Writable,this)&&!(this instanceof Duplex))return new Writable(options);this._writableState=new WritableState(options,this),this.writable=!0,options&&("function"==typeof options.write&&(this._write=options.write),"function"==typeof options.writev&&(this._writev=options.writev),"function"==typeof options.destroy&&(this._destroy=options.destroy),"function"==typeof options.final&&(this._final=options.final)),Stream.call(this)}function doWrite(stream,state,writev,len,chunk,encoding,cb){state.writelen=len,state.writecb=cb,state.writing=!0,state.sync=!0,writev?stream._writev(chunk,state.onwrite):stream._write(chunk,encoding,state.onwrite),state.sync=!1}function afterWrite(stream,state,finished,cb){var state1;finished||0===(state1=state).length&&state1.needDrain&&(state1.needDrain=!1,stream.emit("drain")),state.pendingcb--,cb(),finishMaybe(stream,state)}function clearBuffer(stream,state){state.bufferProcessing=!0;var entry=state.bufferedRequest;if(stream._writev&&entry&&entry.next){var buffer=Array(state.bufferedRequestCount),holder=state.corkedRequestsFree;holder.entry=entry;for(var count=0,allBuffers=!0;entry;)buffer[count]=entry,entry.isBuf||(allBuffers=!1),entry=entry.next,count+=1;buffer.allBuffers=allBuffers,doWrite(stream,state,!0,state.length,buffer,"",holder.finish),state.pendingcb++,state.lastBufferedRequest=null,holder.next?(state.corkedRequestsFree=holder.next,holder.next=null):state.corkedRequestsFree=new CorkedRequest(state),state.bufferedRequestCount=0}else{for(;entry;){var chunk=entry.chunk,encoding=entry.encoding,cb=entry.callback,len=state.objectMode?1:chunk.length;if(doWrite(stream,state,!1,len,chunk,encoding,cb),entry=entry.next,state.bufferedRequestCount--,state.writing)break}null===entry&&(state.lastBufferedRequest=null)}state.bufferedRequest=entry,state.bufferProcessing=!1}function needFinish(state){return state.ending&&0===state.length&&null===state.bufferedRequest&&!state.finished&&!state.writing}function callFinal(stream,state){stream._final(function(err){state.pendingcb--,err&&stream.emit("error",err),state.prefinished=!0,stream.emit("prefinish"),finishMaybe(stream,state)})}function finishMaybe(stream,state){var state1,need=needFinish(state);return need&&((state1=state).prefinished||state1.finalCalled||("function"==typeof stream._final?(state1.pendingcb++,state1.finalCalled=!0,pna.nextTick(callFinal,stream,state1)):(state1.prefinished=!0,stream.emit("prefinish"))),0===state.pendingcb&&(state.finished=!0,stream.emit("finish"))),need}util.inherits(Writable,Stream),WritableState.prototype.getBuffer=function(){for(var current=this.bufferedRequest,out=[];current;)out.push(current),current=current.next;return out},function(){try{Object.defineProperty(WritableState.prototype,"buffer",{get:internalUtil.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(_){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(realHasInstance=Function.prototype[Symbol.hasInstance],Object.defineProperty(Writable,Symbol.hasInstance,{value:function(object){return!!realHasInstance.call(this,object)||this===Writable&&object&&object._writableState instanceof WritableState}})):realHasInstance=function(object){return object instanceof this},Writable.prototype.pipe=function(){this.emit("error",Error("Cannot pipe, not readable"))},Writable.prototype.write=function(chunk,encoding,cb){var obj,chunk1,cb1,er,chunk2,cb2,valid,er1,state=this._writableState,ret=!1,isBuf=!state.objectMode&&(obj=chunk,Buffer.isBuffer(obj)||obj instanceof OurUint8Array);return isBuf&&!Buffer.isBuffer(chunk)&&(chunk1=chunk,chunk=Buffer.from(chunk1)),("function"==typeof encoding&&(cb=encoding,encoding=null),isBuf?encoding="buffer":encoding||(encoding=state.defaultEncoding),"function"!=typeof cb&&(cb=nop),state.ended)?(cb1=cb,er=Error("write after end"),this.emit("error",er),pna.nextTick(cb1,er)):(isBuf||(chunk2=chunk,cb2=cb,valid=!0,er1=!1,null===chunk2?er1=TypeError("May not write null values to stream"):"string"==typeof chunk2||void 0===chunk2||state.objectMode||(er1=TypeError("Invalid non-string/buffer chunk")),er1&&(this.emit("error",er1),pna.nextTick(cb2,er1),valid=!1),valid))&&(state.pendingcb++,ret=function(stream,state,isBuf,chunk,encoding,cb){if(!isBuf){var chunk1,encoding1,newChunk=(chunk1=chunk,encoding1=encoding,state.objectMode||!1===state.decodeStrings||"string"!=typeof chunk1||(chunk1=Buffer.from(chunk1,encoding1)),chunk1);chunk!==newChunk&&(isBuf=!0,encoding="buffer",chunk=newChunk)}var len=state.objectMode?1:chunk.length;state.length+=len;var ret=state.length<state.highWaterMark;if(ret||(state.needDrain=!0),state.writing||state.corked){var last=state.lastBufferedRequest;state.lastBufferedRequest={chunk:chunk,encoding:encoding,isBuf:isBuf,callback:cb,next:null},last?last.next=state.lastBufferedRequest:state.bufferedRequest=state.lastBufferedRequest,state.bufferedRequestCount+=1}else doWrite(stream,state,!1,len,chunk,encoding,cb);return ret}(this,state,isBuf,chunk,encoding,cb)),ret},Writable.prototype.cork=function(){var state=this._writableState;state.corked++},Writable.prototype.uncork=function(){var state=this._writableState;!state.corked||(state.corked--,state.writing||state.corked||state.finished||state.bufferProcessing||!state.bufferedRequest||clearBuffer(this,state))},Writable.prototype.setDefaultEncoding=function(encoding){if("string"==typeof encoding&&(encoding=encoding.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((encoding+"").toLowerCase())>-1))throw TypeError("Unknown encoding: "+encoding);return this._writableState.defaultEncoding=encoding,this},Object.defineProperty(Writable.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Writable.prototype._write=function(chunk,encoding,cb){cb(Error("_write() is not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(chunk,encoding,cb){var stream,state,cb1,state1=this._writableState;"function"==typeof chunk?(cb=chunk,chunk=null,encoding=null):"function"==typeof encoding&&(cb=encoding,encoding=null),null!=chunk&&this.write(chunk,encoding),state1.corked&&(state1.corked=1,this.uncork()),state1.ending||state1.finished||(stream=this,state=state1,cb1=cb,state.ending=!0,finishMaybe(stream,state),cb1&&(state.finished?pna.nextTick(cb1):stream.once("finish",cb1)),state.ended=!0,stream.writable=!1)},Object.defineProperty(Writable.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(value){this._writableState&&(this._writableState.destroyed=value)}}),Writable.prototype.destroy=destroyImpl.destroy,Writable.prototype._undestroy=destroyImpl.undestroy,Writable.prototype._destroy=function(err,cb){this.end(),cb(err)}},93912:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(64591).Buffer,util=__webpack_require__(50522);module.exports=function(){function BufferList(){(function(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")})(this,BufferList),this.head=null,this.tail=null,this.length=0}return BufferList.prototype.push=function(v){var entry={data:v,next:null};this.length>0?this.tail.next=entry:this.head=entry,this.tail=entry,++this.length},BufferList.prototype.unshift=function(v){var entry={data:v,next:this.head};0===this.length&&(this.tail=entry),this.head=entry,++this.length},BufferList.prototype.shift=function(){if(0!==this.length){var ret=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,ret}},BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0},BufferList.prototype.join=function(s){if(0===this.length)return"";for(var p=this.head,ret=""+p.data;p=p.next;)ret+=s+p.data;return ret},BufferList.prototype.concat=function(n){if(0===this.length)return Buffer.alloc(0);if(1===this.length)return this.head.data;for(var ret=Buffer.allocUnsafe(n>>>0),p=this.head,i=0;p;)(function(src,target,offset){src.copy(target,offset)})(p.data,ret,i),i+=p.data.length,p=p.next;return ret},BufferList}(),util&&util.inspect&&util.inspect.custom&&(module.exports.prototype[util.inspect.custom]=function(){var obj=util.inspect({length:this.length});return this.constructor.name+" "+obj})},55513:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var pna=__webpack_require__(88212);function emitErrorNT(self1,err){self1.emit("error",err)}module.exports={destroy:function(err,cb){var _this=this,readableDestroyed=this._readableState&&this._readableState.destroyed,writableDestroyed=this._writableState&&this._writableState.destroyed;return readableDestroyed||writableDestroyed?(cb?cb(err):!err||this._writableState&&this._writableState.errorEmitted||pna.nextTick(emitErrorNT,this,err),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(err||null,function(err){!cb&&err?(pna.nextTick(emitErrorNT,_this,err),_this._writableState&&(_this._writableState.errorEmitted=!0)):cb&&cb(err)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},84104:function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__(17187).EventEmitter},96801:function(module,exports,__webpack_require__){(exports=module.exports=__webpack_require__(44278)).Stream=exports,exports.Readable=exports,exports.Writable=__webpack_require__(10759),exports.Duplex=__webpack_require__(45867),exports.Transform=__webpack_require__(60062),exports.PassThrough=__webpack_require__(3431)},64591:function(module,exports,__webpack_require__){var buffer=__webpack_require__(48764),Buffer=buffer.Buffer;function copyProps(src,dst){for(var key in src)dst[key]=src[key]}function SafeBuffer(arg,encodingOrOffset,length){return Buffer(arg,encodingOrOffset,length)}Buffer.from&&Buffer.alloc&&Buffer.allocUnsafe&&Buffer.allocUnsafeSlow?module.exports=buffer:(copyProps(buffer,exports),exports.Buffer=SafeBuffer),copyProps(Buffer,SafeBuffer),SafeBuffer.from=function(arg,encodingOrOffset,length){if("number"==typeof arg)throw TypeError("Argument must not be a number");return Buffer(arg,encodingOrOffset,length)},SafeBuffer.alloc=function(size,fill,encoding){if("number"!=typeof size)throw TypeError("Argument must be a number");var buf=Buffer(size);return void 0!==fill?"string"==typeof encoding?buf.fill(fill,encoding):buf.fill(fill):buf.fill(0),buf},SafeBuffer.allocUnsafe=function(size){if("number"!=typeof size)throw TypeError("Argument must be a number");return Buffer(size)},SafeBuffer.allocUnsafeSlow=function(size){if("number"!=typeof size)throw TypeError("Argument must be a number");return buffer.SlowBuffer(size)}},47989:function(__unused_webpack_module,exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(64591).Buffer,isEncoding=Buffer.isEncoding||function(encoding){switch((encoding=""+encoding)&&encoding.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function StringDecoder(encoding){var nb;switch(this.encoding=function(enc){var nenc=function(enc){var retried;if(!enc)return"utf8";for(;;)switch(enc){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return enc;default:if(retried)return;enc=(""+enc).toLowerCase(),retried=!0}}(enc);if("string"!=typeof nenc&&(Buffer.isEncoding===isEncoding||!isEncoding(enc)))throw Error("Unknown encoding: "+enc);return nenc||enc}(encoding),this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,nb=4;break;case"utf8":this.fillLast=utf8FillLast,nb=4;break;case"base64":this.text=base64Text,this.end=base64End,nb=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer.allocUnsafe(nb)}function utf8CheckByte(byte){return byte<=127?0:byte>>5==6?2:byte>>4==14?3:byte>>3==30?4:byte>>6==2?-1:-2}function utf8FillLast(buf){var p=this.lastTotal-this.lastNeed,r=function(self1,buf,p){if((192&buf[0])!=128)return self1.lastNeed=0,"�";if(self1.lastNeed>1&&buf.length>1){if((192&buf[1])!=128)return self1.lastNeed=1,"�";if(self1.lastNeed>2&&buf.length>2&&(192&buf[2])!=128)return self1.lastNeed=2,"�"}}(this,buf,0);return void 0!==r?r:this.lastNeed<=buf.length?(buf.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(buf.copy(this.lastChar,p,0,buf.length),this.lastNeed-=buf.length)}function utf16Text(buf,i){if((buf.length-i)%2==0){var r=buf.toString("utf16le",i);if(r){var c=r.charCodeAt(r.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=buf[buf.length-1],buf.toString("utf16le",i,buf.length-1)}function utf16End(buf){var r=buf&&buf.length?this.write(buf):"";if(this.lastNeed){var end=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,end)}return r}function base64Text(buf,i){var n=(buf.length-i)%3;return 0===n?buf.toString("base64",i):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=buf[buf.length-1]:(this.lastChar[0]=buf[buf.length-2],this.lastChar[1]=buf[buf.length-1]),buf.toString("base64",i,buf.length-n))}function base64End(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function simpleWrite(buf){return buf.toString(this.encoding)}function simpleEnd(buf){return buf&&buf.length?this.write(buf):""}exports.s=StringDecoder,StringDecoder.prototype.write=function(buf){var r,i;if(0===buf.length)return"";if(this.lastNeed){if(void 0===(r=this.fillLast(buf)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<buf.length?r?r+this.text(buf,i):this.text(buf,i):r||""},StringDecoder.prototype.end=function(buf){var r=buf&&buf.length?this.write(buf):"";return this.lastNeed?r+"�":r},StringDecoder.prototype.text=function(buf,i){var total=function(self1,buf,i){var j=buf.length-1;if(j<i)return 0;var nb=utf8CheckByte(buf[j]);return nb>=0?(nb>0&&(self1.lastNeed=nb-1),nb):--j<i||-2===nb?0:(nb=utf8CheckByte(buf[j]))>=0?(nb>0&&(self1.lastNeed=nb-2),nb):--j<i||-2===nb?0:(nb=utf8CheckByte(buf[j]))>=0?(nb>0&&(2===nb?nb=0:self1.lastNeed=nb-3),nb):0}(this,buf,i);if(!this.lastNeed)return buf.toString("utf8",i);this.lastTotal=total;var end=buf.length-(total-this.lastNeed);return buf.copy(this.lastChar,0,end),buf.toString("utf8",i,end)},StringDecoder.prototype.fillLast=function(buf){if(this.lastNeed<=buf.length)return buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);buf.copy(this.lastChar,this.lastTotal-this.lastNeed,0,buf.length),this.lastNeed-=buf.length}},14650:function(module,__unused_webpack_exports,__webpack_require__){var process=__webpack_require__(34155),Transform=__webpack_require__(96801).Transform,inherits=__webpack_require__(89539).inherits,xtend=__webpack_require__(47529);function DestroyableTransform(opts){Transform.call(this,opts),this._destroyed=!1}function noop(chunk,enc,callback){callback(null,chunk)}function through2(construct){return function(options,transform,flush){return"function"==typeof options&&(flush=transform,transform=options,options={}),"function"!=typeof transform&&(transform=noop),"function"!=typeof flush&&(flush=null),construct(options,transform,flush)}}inherits(DestroyableTransform,Transform),DestroyableTransform.prototype.destroy=function(err){if(!this._destroyed){this._destroyed=!0;var self1=this;process.nextTick(function(){err&&self1.emit("error",err),self1.emit("close")})}},module.exports=through2(function(options,transform,flush){var t2=new DestroyableTransform(options);return t2._transform=transform,flush&&(t2._flush=flush),t2}),module.exports.ctor=through2(function(options,transform,flush){function Through2(override){if(!(this instanceof Through2))return new Through2(override);this.options=xtend(options,override),DestroyableTransform.call(this,this.options)}return inherits(Through2,DestroyableTransform),Through2.prototype._transform=transform,flush&&(Through2.prototype._flush=flush),Through2}),module.exports.obj=through2(function(options,transform,flush){var t2=new DestroyableTransform(xtend({objectMode:!0,highWaterMark:16},options));return t2._transform=transform,flush&&(t2._flush=flush),t2})}}]);