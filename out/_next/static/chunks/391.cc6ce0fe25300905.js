(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[391,940,702],{1482:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{v:function(){return BaseSolanaAdapter}});var _web3auth_base__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45624),bs58__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(77191),bs58__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(bs58__WEBPACK_IMPORTED_MODULE_1__);class BaseSolanaAdapter extends _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.J5{async authenticateUser(){var _this$chainConfig;if(!this.provider||!(null!==(_this$chainConfig=this.chainConfig)&&void 0!==_this$chainConfig&&_this$chainConfig.chainId))throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.notConnectedError();let{chainNamespace,chainId}=this.chainConfig;if(this.status!==_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.CONNECTED)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.notConnectedError("Not connected with wallet, Please login/connect first");let accounts=await this.provider.request({method:"getAccounts"});if(accounts&&accounts.length>0){let existingToken=(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.Cb)(accounts[0],this.name);if(existingToken){let isExpired=(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.$E)(existingToken);if(!isExpired)return{idToken:existingToken}}let payload={domain:window.location.origin,uri:window.location.href,address:accounts[0],chainId:parseInt(chainId,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},challenge=await (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.tV)(payload,chainNamespace),encodedMessage=new TextEncoder().encode(challenge),signedMessage=await this.provider.request({method:"signMessage",params:{message:encodedMessage,display:"utf8"}}),idToken=await (0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.rn)(chainNamespace,bs58__WEBPACK_IMPORTED_MODULE_1___default().encode(signedMessage),challenge,this.name,this.sessionTime);return(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.Fr)(accounts[0],this.name,idToken),{idToken}}throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnect(){if(this.status!==_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.CONNECTED)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.disconnectionError("Not connected with wallet");let accounts=await this.provider.request({method:"getAccounts"});accounts&&accounts.length>0&&(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.qz)(accounts[0],this.name)}}},42848:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PhantomAdapter:function(){return PhantomAdapter}});var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4942),_web3auth_base__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(45624),_web3auth_base_solana_adapter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1482),_web3auth_solana_provider__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(44445);let detectProvider=async function(){var _window$solana;let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interval:1e3,count:3},isPhantomAvailable="undefined"!=typeof window&&!!(null!==(_window$solana=window.solana)&&void 0!==_window$solana&&_window$solana.isPhantom);if(isPhantomAvailable)return window.solana;let isAvailable=await function poll(callback,interval,count){return new Promise((resolve,reject)=>{count>0?setTimeout(async()=>{let done=await callback();done&&resolve(done),done||poll(callback,interval,count-1).then(res=>(resolve(res),res)).catch(err=>reject(err))},interval):resolve(!1)})}(()=>{var _window$solana2;return null===(_window$solana2=window.solana)||void 0===_window$solana2?void 0:_window$solana2.isPhantom},options.interval,options.count);return isAvailable?window.solana:null};class PhantomAdapter extends _web3auth_base_solana_adapter__WEBPACK_IMPORTED_MODULE_1__.v{constructor(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"name",_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.rW.PHANTOM),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"adapterNamespace",_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.yk.SOLANA),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"currentChainNamespace",_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.EN.SOLANA),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"type",_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.hN.EXTERNAL),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"status",_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.NOT_READY),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"_wallet",null),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"phantomProvider",null),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"rehydrated",!1),(0,_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_3__.Z)(this,"_onDisconnect",()=>{this._wallet&&(this._wallet.off("disconnect",this._onDisconnect),this.rehydrated=!1,this.status=this.status===_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.CONNECTED?_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.READY:_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.NOT_READY,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.DISCONNECTED))}),this.chainConfig=options.chainConfig||null,this.sessionTime=options.sessionTime||86400}get isWalletConnected(){var _this$_wallet;return!!(null!==(_this$_wallet=this._wallet)&&void 0!==_this$_wallet&&_this$_wallet.isConnected&&this.status===_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.CONNECTED)}get provider(){var _this$phantomProvider;return(null===(_this$phantomProvider=this.phantomProvider)||void 0===_this$phantomProvider?void 0:_this$phantomProvider.provider)||null}set provider(_){throw Error("Not implemented")}setAdapterSettings(options){this.status!==_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.READY&&null!=options&&options.sessionTime&&(this.sessionTime=options.sessionTime)}async init(options){if(super.checkInitializationRequirements(),this.chainConfig||(this.chainConfig=(0,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.h2)(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.EN.SOLANA,"0x1")),this._wallet=await detectProvider({interval:500,count:3}),!this._wallet)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.Ty.notInstalled();this.phantomProvider=new _web3auth_solana_provider__WEBPACK_IMPORTED_MODULE_2__.PhantomInjectedProvider({config:{chainConfig:this.chainConfig}}),this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.READY,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.READY,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.rW.PHANTOM);try{_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.cM.debug("initializing phantom adapter"),options.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(error){_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.cM.error("Failed to connect with cached phantom provider",error),this.emit("ERRORED",error)}}async connect(){var _this=this;try{if(super.checkConnectionRequirements(),this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.CONNECTING,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.CONNECTING,{adapter:_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.rW.PHANTOM}),!this._wallet)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.Ty.notInstalled();if(this._wallet.isConnected)await this.connectWithProvider(this._wallet);else{let handleDisconnect=this._wallet._handleDisconnect;try{await new Promise((resolve,reject)=>{let connect=async()=>{await this.connectWithProvider(this._wallet),resolve(this.provider)};if(!this._wallet)return reject(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.Ty.notInstalled());this._wallet.once("connect",connect),this._wallet._handleDisconnect=function(){reject(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.Ty.windowClosed());for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return handleDisconnect.apply(_this._wallet,args)},this._wallet.connect().catch(reason=>{reject(reason)})})}catch(error){if(error instanceof _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.up)throw error;throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.connectionError(null==error?void 0:error.message)}finally{this._wallet._handleDisconnect=handleDisconnect}}if(!this._wallet.publicKey)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.connectionError();return this._wallet.on("disconnect",this._onDisconnect),this.provider}catch(error1){throw this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.READY,this.rehydrated=!1,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.ERRORED,error1),error1}}async disconnect(){let options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cleanup:!1};await super.disconnect();try{var _this$_wallet2;await (null===(_this$_wallet2=this._wallet)||void 0===_this$_wallet2?void 0:_this$_wallet2.disconnect()),options.cleanup&&(this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.NOT_READY,this.phantomProvider=null,this._wallet=null),this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.DISCONNECTED)}catch(error){this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.ERRORED,_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.disconnectionError(null==error?void 0:error.message))}}async getUserInfo(){if(!this.isWalletConnected)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.notConnectedError("Not connected with wallet, Please login/connect first");return{}}async connectWithProvider(injectedProvider){if(!this.phantomProvider)throw _web3auth_base__WEBPACK_IMPORTED_MODULE_0__.RM.connectionError("No phantom provider");return await this.phantomProvider.setupProvider(injectedProvider),this.status=_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.MP.CONNECTED,this.emit(_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.n2.CONNECTED,{adapter:_web3auth_base__WEBPACK_IMPORTED_MODULE_0__.rW.PHANTOM,reconnected:this.rehydrated}),this.provider}}},58162:function(module){"use strict";module.exports=function(ALPHABET){if(ALPHABET.length>=255)throw TypeError("Alphabet too long");for(var BASE_MAP=new Uint8Array(256),j=0;j<BASE_MAP.length;j++)BASE_MAP[j]=255;for(var i=0;i<ALPHABET.length;i++){var x=ALPHABET.charAt(i),xc=x.charCodeAt(0);if(255!==BASE_MAP[xc])throw TypeError(x+" is ambiguous");BASE_MAP[xc]=i}var BASE=ALPHABET.length,LEADER=ALPHABET.charAt(0),FACTOR=Math.log(BASE)/Math.log(256),iFACTOR=Math.log(256)/Math.log(BASE);function decodeUnsafe(source){if("string"!=typeof source)throw TypeError("Expected String");if(0===source.length)return new Uint8Array;for(var psz=0,zeroes=0,length=0;source[psz]===LEADER;)zeroes++,psz++;for(var size=(source.length-psz)*FACTOR+1>>>0,b256=new Uint8Array(size);source[psz];){var carry=BASE_MAP[source.charCodeAt(psz)];if(255===carry)return;for(var i=0,it3=size-1;(0!==carry||i<length)&&-1!==it3;it3--,i++)carry+=BASE*b256[it3]>>>0,b256[it3]=carry%256>>>0,carry=carry/256>>>0;if(0!==carry)throw Error("Non-zero carry");length=i,psz++}for(var it4=size-length;it4!==size&&0===b256[it4];)it4++;for(var vch=new Uint8Array(zeroes+(size-it4)),j=zeroes;it4!==size;)vch[j++]=b256[it4++];return vch}return{encode:function(source){if(source instanceof Uint8Array||(ArrayBuffer.isView(source)?source=new Uint8Array(source.buffer,source.byteOffset,source.byteLength):Array.isArray(source)&&(source=Uint8Array.from(source))),!(source instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===source.length)return"";for(var zeroes=0,length=0,pbegin=0,pend=source.length;pbegin!==pend&&0===source[pbegin];)pbegin++,zeroes++;for(var size=(pend-pbegin)*iFACTOR+1>>>0,b58=new Uint8Array(size);pbegin!==pend;){for(var carry=source[pbegin],i=0,it1=size-1;(0!==carry||i<length)&&-1!==it1;it1--,i++)carry+=256*b58[it1]>>>0,b58[it1]=carry%BASE>>>0,carry=carry/BASE>>>0;if(0!==carry)throw Error("Non-zero carry");length=i,pbegin++}for(var it2=size-length;it2!==size&&0===b58[it2];)it2++;for(var str=LEADER.repeat(zeroes);it2<size;++it2)str+=ALPHABET.charAt(b58[it2]);return str},decodeUnsafe:decodeUnsafe,decode:function(string){var buffer=decodeUnsafe(string);if(buffer)return buffer;throw Error("Non-base"+BASE+" character")}}}},77191:function(module,__unused_webpack_exports,__webpack_require__){let basex=__webpack_require__(58162);module.exports=basex("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},7420:function(){},95856:function(){},11922:function(){},78848:function(){},71456:function(){},27790:function(){}}]);