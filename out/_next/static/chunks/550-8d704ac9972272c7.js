(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[550],{18688:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:function(){return ALCHEMY_EVENT_TYPES},C:function(){return CustomNetworks},D:function(){return DEFAULT_ALCHEMY_API_KEY},E:function(){return EthersNetwork},I:function(){return IS_BROWSER},N:function(){return Network1},V:function(){return VERSION},_:function(){return __awaiter},a:function(){return DEFAULT_NETWORK},b:function(){return getAlchemyWsUrl},c:function(){return EthersEvent},d:function(){return getAlchemyEventTag},e:function(){return ALCHEMY_PENDING_TRANSACTIONS_EVENT_TYPE},f:function(){return fromHex},g:function(){return getAlchemyHttpUrl},h:function(){return AlchemySubscription1},i:function(){return isAlchemyEvent},j:function(){return ALCHEMY_MINED_TRANSACTIONS_EVENT_TYPE},k:function(){return Alchemy},l:function(){return logWarn},n:function(){return noop},t:function(){return toHex},v:function(){return verifyAlchemyEventName}});var Network,TokenBalanceType,AssetTransfersCategory,AssetTransfersOrder,NftTokenType,NftSpamClassification,NftExcludeFilters,NftFilters,SortingOrder,NftSaleMarketplace,NftSaleTakerType,RefreshState,OpenSeaSafelistRequestStatus,AlchemySubscription,GasOptimizedTransactionStatus,WebhookVersion,WebhookType,AlchemyApiType,LogLevel,Network1,TokenBalanceType1,AssetTransfersCategory1,AssetTransfersOrder1,NftTokenType1,NftSpamClassification1,NftExcludeFilters1,NftFilters1,NftOrdering,SortingOrder1,NftSaleMarketplace1,NftSaleTakerType1,RefreshState1,OpenSeaSafelistRequestStatus1,AlchemySubscription1,GasOptimizedTransactionStatus1,WebhookVersion1,WebhookType1,AlchemyApiType1,LogLevel1,_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2593),axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9669),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){var value;result.done?resolve(result.value):((value=result.value)instanceof P?value:new P(function(resolve){resolve(value)})).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,g=generator.apply(thisArg,_arguments||[]),q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){g[n]&&(i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v)})})}function resume(n,v){try{var r;(r=g[n](v)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}catch(e){settle(q[0][3],e)}}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){f(v),q.shift(),q.length&&resume(q[0][0],q[0][1])}}function __asyncValues(o){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,m=o[Symbol.asyncIterator];return m?m.call(o):(o=function(o){var s="function"==typeof Symbol&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&"number"==typeof o.length)return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}(o),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){!function(resolve,reject,d,v){Promise.resolve(v).then(function(v){resolve({value:v,done:d})},reject)}(resolve,reject,(v=o[n](v)).done,v.value)})}}}(Network=Network1||(Network1={})).ETH_MAINNET="eth-mainnet",Network.ETH_ROPSTEN="eth-ropsten",Network.ETH_GOERLI="eth-goerli",Network.ETH_KOVAN="eth-kovan",Network.ETH_RINKEBY="eth-rinkeby",Network.OPT_MAINNET="opt-mainnet",Network.OPT_KOVAN="opt-kovan",Network.OPT_GOERLI="opt-goerli",Network.ARB_MAINNET="arb-mainnet",Network.ARB_RINKEBY="arb-rinkeby",Network.ARB_GOERLI="arb-goerli",Network.MATIC_MAINNET="polygon-mainnet",Network.MATIC_MUMBAI="polygon-mumbai",Network.ASTAR_MAINNET="astar-mainnet",(TokenBalanceType=TokenBalanceType1||(TokenBalanceType1={})).DEFAULT_TOKENS="DEFAULT_TOKENS",TokenBalanceType.ERC20="erc20",(AssetTransfersCategory=AssetTransfersCategory1||(AssetTransfersCategory1={})).EXTERNAL="external",AssetTransfersCategory.INTERNAL="internal",AssetTransfersCategory.ERC20="erc20",AssetTransfersCategory.ERC721="erc721",AssetTransfersCategory.ERC1155="erc1155",AssetTransfersCategory.SPECIALNFT="specialnft",(AssetTransfersOrder=AssetTransfersOrder1||(AssetTransfersOrder1={})).ASCENDING="asc",AssetTransfersOrder.DESCENDING="desc",(NftTokenType=NftTokenType1||(NftTokenType1={})).ERC721="ERC721",NftTokenType.ERC1155="ERC1155",NftTokenType.UNKNOWN="UNKNOWN",(NftSpamClassification=NftSpamClassification1||(NftSpamClassification1={})).Erc721TooManyOwners="Erc721TooManyOwners",NftSpamClassification.Erc721TooManyTokens="Erc721TooManyTokens",NftSpamClassification.Erc721DishonestTotalSupply="Erc721DishonestTotalSupply",NftSpamClassification.MostlyHoneyPotOwners="MostlyHoneyPotOwners",NftSpamClassification.OwnedByMostHoneyPots="OwnedByMostHoneyPots",(NftExcludeFilters=NftExcludeFilters1||(NftExcludeFilters1={})).SPAM="SPAM",NftExcludeFilters.AIRDROPS="AIRDROPS",(NftFilters=NftFilters1||(NftFilters1={})).SPAM="SPAM",NftFilters.AIRDROPS="AIRDROPS",(NftOrdering||(NftOrdering={})).TRANSFERTIME="TRANSFERTIME",(SortingOrder=SortingOrder1||(SortingOrder1={})).ASCENDING="asc",SortingOrder.DESCENDING="desc",(NftSaleMarketplace=NftSaleMarketplace1||(NftSaleMarketplace1={})).SEAPORT="seaport",NftSaleMarketplace.LOOKSRARE="looksrare",NftSaleMarketplace.X2Y2="x2y2",NftSaleMarketplace.UNKNOWN="unknown",(NftSaleTakerType=NftSaleTakerType1||(NftSaleTakerType1={})).BUYER="buyer",NftSaleTakerType.SELLER="seller",(RefreshState=RefreshState1||(RefreshState1={})).DOES_NOT_EXIST="does_not_exist",RefreshState.ALREADY_QUEUED="already_queued",RefreshState.IN_PROGRESS="in_progress",RefreshState.FINISHED="finished",RefreshState.QUEUED="queued",RefreshState.QUEUE_FAILED="queue_failed",(OpenSeaSafelistRequestStatus=OpenSeaSafelistRequestStatus1||(OpenSeaSafelistRequestStatus1={})).VERIFIED="verified",OpenSeaSafelistRequestStatus.APPROVED="approved",OpenSeaSafelistRequestStatus.REQUESTED="requested",OpenSeaSafelistRequestStatus.NOT_REQUESTED="not_requested",(AlchemySubscription=AlchemySubscription1||(AlchemySubscription1={})).PENDING_TRANSACTIONS="alchemy_pendingTransactions",AlchemySubscription.MINED_TRANSACTIONS="alchemy_minedTransactions",(GasOptimizedTransactionStatus=GasOptimizedTransactionStatus1||(GasOptimizedTransactionStatus1={})).UNSPECIFIED="TRANSACTION_JOB_STATUS_UNSPECIFIED",GasOptimizedTransactionStatus.IN_PROGRESS="IN_PROGRESS",GasOptimizedTransactionStatus.COMPLETE="COMPLETE",GasOptimizedTransactionStatus.ABANDONED="ABANDONED",(WebhookVersion=WebhookVersion1||(WebhookVersion1={})).V1="V1",WebhookVersion.V2="V2",(WebhookType=WebhookType1||(WebhookType1={})).MINED_TRANSACTION="MINED_TRANSACTION",WebhookType.DROPPED_TRANSACTION="DROPPED_TRANSACTION",WebhookType.ADDRESS_ACTIVITY="ADDRESS_ACTIVITY",WebhookType.NFT_ACTIVITY="NFT_ACTIVITY";let DEFAULT_ALCHEMY_API_KEY="demo",DEFAULT_NETWORK=Network1.ETH_MAINNET;function getAlchemyHttpUrl(network,apiKey){return`https://${network}.g.alchemy.com/v2/${apiKey}`}function getAlchemyWsUrl(network,apiKey){return`wss://${network}.g.alchemy.com/v2/${apiKey}`}(AlchemyApiType=AlchemyApiType1||(AlchemyApiType1={}))[AlchemyApiType.BASE=0]="BASE",AlchemyApiType[AlchemyApiType.NFT=1]="NFT",AlchemyApiType[AlchemyApiType.WEBHOOK=2]="WEBHOOK";let EthersNetwork={[Network1.ETH_MAINNET]:"mainnet",[Network1.ETH_ROPSTEN]:"ropsten",[Network1.ETH_GOERLI]:"goerli",[Network1.ETH_KOVAN]:"kovan",[Network1.ETH_RINKEBY]:"rinkeby",[Network1.OPT_MAINNET]:"optimism",[Network1.OPT_KOVAN]:"optimism-kovan",[Network1.OPT_GOERLI]:"optimism-goerli",[Network1.ARB_MAINNET]:"arbitrum",[Network1.ARB_RINKEBY]:"arbitrum-rinkeby",[Network1.ARB_GOERLI]:"arbitrum-goerli",[Network1.MATIC_MAINNET]:"matic",[Network1.MATIC_MUMBAI]:"maticmum",[Network1.ASTAR_MAINNET]:"astar-mainnet"},CustomNetworks={"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},"astar-mainnet":{chainId:592,name:"astar-mainnet"}};function noop(){}class AlchemyConfig{constructor(config){this.apiKey=(null==config?void 0:config.apiKey)||DEFAULT_ALCHEMY_API_KEY,this.network=(null==config?void 0:config.network)||DEFAULT_NETWORK,this.maxRetries=(null==config?void 0:config.maxRetries)||5,this.url=null==config?void 0:config.url,this.authToken=null==config?void 0:config.authToken,this.batchRequests=(null==config?void 0:config.batchRequests)||!1}_getRequestUrl(apiType){return void 0!==this.url?this.url:apiType===AlchemyApiType1.NFT?`https://${this.network}.g.alchemy.com/nft/v2/${this.apiKey}`:apiType===AlchemyApiType1.WEBHOOK?"https://dashboard.alchemy.com/api":getAlchemyHttpUrl(this.network,this.apiKey)}getProvider(){return this._baseAlchemyProvider||(this._baseAlchemyProvider=__awaiter(this,void 0,void 0,function*(){let{AlchemyProvider}=yield Promise.all([__webpack_require__.e(366),__webpack_require__.e(808)]).then(__webpack_require__.bind(__webpack_require__,72366));return new AlchemyProvider(this)})),this._baseAlchemyProvider}getWebSocketProvider(){return this._baseAlchemyWssProvider||(this._baseAlchemyWssProvider=__awaiter(this,void 0,void 0,function*(){let{AlchemyWebSocketProvider}=yield Promise.all([__webpack_require__.e(366),__webpack_require__.e(39),__webpack_require__.e(608)]).then(__webpack_require__.bind(__webpack_require__,93039));return new AlchemyWebSocketProvider(this)})),this._baseAlchemyWssProvider}}function fromHex(hexString){return _ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__.O$.from(hexString).toNumber()}function toHex(num){return _ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__.O$.from(num).toHexString()}function formatBlock(block){return"string"==typeof block?block:Number.isInteger(block)?toHex(block):block.toString()}function getNftContractFromRaw(rawNftContract){return{address:rawNftContract.address,name:rawNftContract.contractMetadata.name,symbol:rawNftContract.contractMetadata.symbol,totalSupply:rawNftContract.contractMetadata.totalSupply,tokenType:parseNftTokenType(rawNftContract.contractMetadata.tokenType),openSea:parseOpenSeaMetadata(rawNftContract.contractMetadata.openSea)}}function getBaseNftFromRaw(rawBaseNft,contractAddress){var _a;return{contract:contractAddress?{address:contractAddress}:rawBaseNft.contract,tokenId:_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__.O$.from(rawBaseNft.id.tokenId).toString(),tokenType:parseNftTokenType(null===(_a=rawBaseNft.id.tokenMetadata)||void 0===_a?void 0:_a.tokenType)}}function getNftFromRaw(rawNft){var _a,_b,_c,_d,_e,tokenId,description,arr;try{let tokenType=parseNftTokenType(null===(_a=rawNft.id.tokenMetadata)||void 0===_a?void 0:_a.tokenType),spamInfo=function(spamInfo){if(!spamInfo)return;let{isSpam,classifications}=spamInfo;return{isSpam:"true"===isSpam,classifications}}(rawNft.spamInfo);return{contract:{address:rawNft.contract.address,name:null===(_b=rawNft.contractMetadata)||void 0===_b?void 0:_b.name,symbol:null===(_c=rawNft.contractMetadata)||void 0===_c?void 0:_c.symbol,totalSupply:null===(_d=rawNft.contractMetadata)||void 0===_d?void 0:_d.totalSupply,tokenType,openSea:parseOpenSeaMetadata(null===(_e=rawNft.contractMetadata)||void 0===_e?void 0:_e.openSea)},tokenId:(tokenId=rawNft.id.tokenId,_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__.O$.from(tokenId).toString()),tokenType,title:rawNft.title,description:(description=rawNft.description,void 0===description?"":Array.isArray(description)||"object"!=typeof description?"string"==typeof description?description:description.join(" "):JSON.stringify(description)),timeLastUpdated:rawNft.timeLastUpdated,metadataError:rawNft.error,rawMetadata:rawNft.metadata,tokenUri:parseNftTokenUri(rawNft.tokenUri),media:(arr=rawNft.media,void 0===arr?[]:arr.filter(uri=>void 0!==parseNftTokenUri(uri))),spamInfo}}catch(e){throw Error("Error parsing the NFT response: "+e)}}function parseNftTokenType(tokenType){switch(tokenType){case"erc721":case"ERC721":return NftTokenType1.ERC721;case"erc1155":case"ERC1155":return NftTokenType1.ERC1155;default:return NftTokenType1.UNKNOWN}}function parseNftTokenUri(uri){if(!uri||0!==uri.raw.length||0!=uri.gateway.length)return uri}function parseOpenSeaMetadata(openSea){var x;if(void 0!==openSea)return{floorPrice:openSea.floorPrice,collectionName:openSea.collectionName,safelistRequestStatus:void 0!==openSea.safelistRequestStatus?(x=openSea.safelistRequestStatus,Object.values(OpenSeaSafelistRequestStatus1).includes(x)?x:void 0):void 0,imageUrl:openSea.imageUrl,description:openSea.description,externalUrl:openSea.externalUrl,twitterUsername:openSea.twitterUsername,discordUrl:openSea.discordUrl,lastIngestedAt:openSea.lastIngestedAt}}let IS_BROWSER="undefined"!=typeof window&&null!==window;class CoreNamespace{constructor(config){this.config=config}getBalance(addressOrName,blockTag){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getBalance(addressOrName,blockTag)})}getCode(addressOrName,blockTag){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getCode(addressOrName,blockTag)})}getStorageAt(addressOrName,position,blockTag){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getStorageAt(addressOrName,position,blockTag)})}getTransactionCount(addressOrName,blockTag){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getTransactionCount(addressOrName,blockTag)})}getBlock(blockHashOrBlockTag){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getBlock(blockHashOrBlockTag)})}getBlockWithTransactions(blockHashOrBlockTag){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getBlockWithTransactions(blockHashOrBlockTag)})}getNetwork(){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getNetwork()})}getBlockNumber(){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getBlockNumber()})}getGasPrice(){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getGasPrice()})}getFeeData(){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getFeeData()})}ready(){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.ready})}call(transaction,blockTag){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.call(transaction,blockTag)})}estimateGas(transaction){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.estimateGas(transaction)})}getTransaction(transactionHash){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getTransaction(transactionHash)})}getTransactionReceipt(transactionHash){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getTransactionReceipt(transactionHash)})}sendTransaction(signedTransaction){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.sendTransaction(signedTransaction)})}waitForTransaction(transactionHash,confirmations,timeout){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.waitForTransaction(transactionHash,confirmations,timeout)})}getLogs(filter){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getLogs(filter)})}send(method,params){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.send(method,params)})}findContractDeployer(contractAddress){var _a;return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider(),currentBlockNum=yield provider.getBlockNumber();if((yield provider.getCode(contractAddress,currentBlockNum))==="0x")throw Error(`Contract '${contractAddress}' does not exist`);let firstBlock=yield function binarySearchFirstBlock(start,end,address,config){return __awaiter(this,void 0,void 0,function*(){if(start>=end)return end;let mid=Math.floor((start+end)/2),provider=yield config.getProvider(),code=yield provider.getCode(address,mid);return"0x"===code?binarySearchFirstBlock(mid+1,end,address,config):binarySearchFirstBlock(start,mid,address,config)})}(0,currentBlockNum+1,contractAddress,this.config),txReceipts=yield this.getTransactionReceipts({blockNumber:toHex(firstBlock)}),matchingReceipt=null===(_a=txReceipts.receipts)||void 0===_a?void 0:_a.find(receipt=>receipt.contractAddress===contractAddress.toLowerCase());return{deployerAddress:null==matchingReceipt?void 0:matchingReceipt.from,blockNumber:firstBlock}})}getTokenBalances(addressOrName,contractAddressesOrOptions){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider(),address=yield provider._getAddress(addressOrName);if(Array.isArray(contractAddressesOrOptions)){if(contractAddressesOrOptions.length>1500)throw Error("You cannot pass in more than 1500 contract addresses to getTokenBalances()");if(0===contractAddressesOrOptions.length)throw Error("getTokenBalances() requires at least one contractAddress when using an array");return provider._send("alchemy_getTokenBalances",[address,contractAddressesOrOptions],"getTokenBalances")}{let tokenType=void 0===contractAddressesOrOptions?TokenBalanceType1.ERC20:contractAddressesOrOptions.type,params=[address,tokenType];return(null==contractAddressesOrOptions?void 0:contractAddressesOrOptions.type)===TokenBalanceType1.ERC20&&contractAddressesOrOptions.pageKey&&params.push({pageKey:contractAddressesOrOptions.pageKey}),provider._send("alchemy_getTokenBalances",params,"getTokenBalances")}})}getTokenMetadata(address){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider._send("alchemy_getTokenMetadata",[address],"getTokenMetadata")})}getAssetTransfers(params){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return params.fromAddress&&(params.fromAddress=yield provider._getAddress(params.fromAddress)),params.toAddress&&(params.toAddress=yield provider._getAddress(params.toAddress)),provider._send("alchemy_getAssetTransfers",[Object.assign(Object.assign({},params),{fromBlock:null!=params.fromBlock?formatBlock(params.fromBlock):void 0,toBlock:null!=params.toBlock?formatBlock(params.toBlock):void 0,maxCount:null!=params.maxCount?toHex(params.maxCount):void 0})],"getAssetTransfers")})}getTransactionReceipts(params){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider._send("alchemy_getTransactionReceipts",[params],"getTransactionReceipts")})}resolveName(name){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.resolveName(name)})}lookupAddress(address){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.lookupAddress(address)})}}(LogLevel=LogLevel1||(LogLevel1={}))[LogLevel.DEBUG=0]="DEBUG",LogLevel[LogLevel.INFO=1]="INFO",LogLevel[LogLevel.WARN=2]="WARN",LogLevel[LogLevel.ERROR=3]="ERROR",LogLevel[LogLevel.SILENT=4]="SILENT",LogLevel1.DEBUG,LogLevel1.INFO,LogLevel1.WARN,LogLevel1.ERROR,LogLevel1.SILENT;let logLevelToConsoleFn={[LogLevel1.DEBUG]:"log",[LogLevel1.INFO]:"info",[LogLevel1.WARN]:"warn",[LogLevel1.ERROR]:"error"},DEFAULT_LOG_LEVEL=LogLevel1.INFO;function logDebug(message,...args){loggerClient.debug(message,args)}function logInfo(message,...args){loggerClient.info(message,args)}function logWarn(message,...args){loggerClient.warn(message,args)}function stringify(obj){if("string"==typeof obj)return obj;try{return JSON.stringify(obj)}catch(e){return obj}}let loggerClient=new class{constructor(){this._logLevel=DEFAULT_LOG_LEVEL}get logLevel(){return this._logLevel}set logLevel(val){if(!(val in LogLevel1))throw TypeError(`Invalid value "${val}" assigned to \`logLevel\``);this._logLevel=val}debug(...args){this._log(LogLevel1.DEBUG,...args)}info(...args){this._log(LogLevel1.INFO,...args)}warn(...args){this._log(LogLevel1.WARN,...args)}error(...args){this._log(LogLevel1.ERROR,...args)}_log(logLevel,...args){if(logLevel<this._logLevel)return;let now=new Date().toISOString(),method=logLevelToConsoleFn[logLevel];if(method)console[method](`[${now}] Alchemy:`,...args.map(stringify));else throw Error(`Logger received an invalid logLevel (value: ${logLevel})`)}},VERSION="2.2.5";class ExponentialBackoff{constructor(maxAttempts=5){this.maxAttempts=maxAttempts,this.initialDelayMs=1e3,this.backoffMultiplier=1.5,this.maxDelayMs=3e4,this.numAttempts=0,this.currentDelayMs=0,this.isInBackoff=!1}backoff(){if(this.numAttempts>=this.maxAttempts)return Promise.reject(Error(`Exceeded maximum number of attempts: ${this.maxAttempts}`));if(this.isInBackoff)return Promise.reject(Error("A backoff operation is already in progress"));let backoffDelayWithJitterMs=this.withJitterMs(this.currentDelayMs);return backoffDelayWithJitterMs>0&&logDebug("ExponentialBackoff.backoff",`Backing off for ${backoffDelayWithJitterMs}ms`),this.currentDelayMs*=this.backoffMultiplier,this.currentDelayMs=Math.max(this.currentDelayMs,this.initialDelayMs),this.currentDelayMs=Math.min(this.currentDelayMs,this.maxDelayMs),this.numAttempts+=1,new Promise(resolve=>{this.isInBackoff=!0,setTimeout(()=>{this.isInBackoff=!1,resolve()},backoffDelayWithJitterMs)})}withJitterMs(delayMs){return Math.min(delayMs+(Math.random()-.5)*delayMs,this.maxDelayMs)}}function requestHttpWithBackoff(config,apiType,restApiName,methodName,params,overrides){return __awaiter(this,void 0,void 0,function*(){let lastError;let backoff=new ExponentialBackoff(config.maxRetries);for(let attempt=0;attempt<config.maxRetries+1;attempt++)try{void 0!==lastError&&logInfo("requestHttp",`Retrying after error: ${lastError.message}`);try{yield backoff.backoff()}catch(err){break}let response=yield function(baseUrl,restApiName,methodName,params,overrides){var _a;let config=Object.assign(Object.assign({},overrides),{headers:Object.assign(Object.assign(Object.assign({},null==overrides?void 0:overrides.headers),!IS_BROWSER&&{"Accept-Encoding":"gzip"}),{"Alchemy-Ethers-Sdk-Version":VERSION,"Alchemy-Ethers-Sdk-Method":methodName}),method:null!==(_a=null==overrides?void 0:overrides.method)&&void 0!==_a?_a:"GET",url:baseUrl+"/"+restApiName,params});return axios__WEBPACK_IMPORTED_MODULE_0___default()(config)}(config._getRequestUrl(apiType),restApiName,methodName,params,overrides);if(200===response.status)return logDebug(restApiName,`Successful request: ${restApiName}`),response.data;logInfo(restApiName,`Request failed: ${restApiName}, ${response.status}, ${response.data}`),lastError=Error(response.status+": "+response.data)}catch(err1){if(!axios__WEBPACK_IMPORTED_MODULE_0___default().isAxiosError(err1)||void 0===err1.response)throw err1;if(lastError=Error(err1.response.status+": "+err1.response.data),!function(err,apiType){let retryableCodes=apiType===AlchemyApiType1.WEBHOOK?[429,500]:[429];return void 0!==err.response&&retryableCodes.includes(err.response.status)}(err1,apiType))break}return Promise.reject(lastError)})}function paginateEndpoint(config,apiType,restApiName,methodName,reqPageKey,resPageKey,params){return __asyncGenerator(this,arguments,function*(){let hasNext=!0,requestParams=Object.assign({},params);for(;hasNext;){let response=yield __await(requestHttpWithBackoff(config,apiType,restApiName,methodName,requestParams));yield yield __await(response),void 0!==response[resPageKey]?requestParams[reqPageKey]=response[resPageKey]:hasNext=!1}})}function getNftMetadata(config,contractAddress,tokenId,tokenType,tokenUriTimeoutInMs,srcMethod="getNftMetadata"){return __awaiter(this,void 0,void 0,function*(){let response=yield requestHttpWithBackoff(config,AlchemyApiType1.NFT,"getNFTMetadata",srcMethod,{contractAddress,tokenId:_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__.O$.from(tokenId).toString(),tokenType:tokenType!==NftTokenType1.UNKNOWN?tokenType:void 0,tokenUriTimeoutInMs});return getNftFromRaw(response)})}function getNftsForOwner(config,owner,options,srcMethod="getNftsForOwner"){return __awaiter(this,void 0,void 0,function*(){let withMetadata=omitMetadataToWithMetadata(null==options?void 0:options.omitMetadata),response=yield requestHttpWithBackoff(config,AlchemyApiType1.NFT,"getNFTs",srcMethod,{contractAddresses:null==options?void 0:options.contractAddresses,pageKey:null==options?void 0:options.pageKey,filters:null==options?void 0:options.excludeFilters,excludeFilters:null==options?void 0:options.excludeFilters,includeFilters:null==options?void 0:options.includeFilters,owner,pageSize:null==options?void 0:options.pageSize,withMetadata,tokenUriTimeoutInMs:null==options?void 0:options.tokenUriTimeoutInMs,orderBy:null==options?void 0:options.orderBy});return{ownedNfts:response.ownedNfts.map(res=>Object.assign(Object.assign({},nftFromGetNftResponse(res)),{balance:parseInt(res.balance)})),pageKey:response.pageKey,totalCount:response.totalCount}})}function nftFromGetNftResponse(ownedNft){return isNftWithMetadata(ownedNft)?getNftFromRaw(ownedNft):getBaseNftFromRaw(ownedNft)}function nftFromGetNftContractResponse(ownedNft,contractAddress){return isNftWithMetadata(ownedNft)?getNftFromRaw(ownedNft):getBaseNftFromRaw(ownedNft,contractAddress)}function isNftWithMetadata(response){return void 0!==response.title}function omitMetadataToWithMetadata(omitMetadata){return void 0===omitMetadata||!omitMetadata}class NftNamespace{constructor(config){this.config=config}getNftMetadata(contractAddress,tokenId,tokenType,tokenUriTimeoutInMs){return getNftMetadata(this.config,contractAddress,tokenId,tokenType,tokenUriTimeoutInMs)}getNftMetadataBatch(tokens,options){return function(config,tokens,options){return __awaiter(this,void 0,void 0,function*(){let data={tokens,tokenUriTimeoutInMs:null==options?void 0:options.tokenUriTimeoutInMs,refreshCache:null==options?void 0:options.refreshCache},response=yield requestHttpWithBackoff(config,AlchemyApiType1.NFT,"getNFTMetadataBatch","getNftMetadataBatch",{},{method:"POST",data});return response.map(getNftFromRaw)})}(this.config,tokens,options)}getContractMetadata(contractAddress){return function(config,contractAddress,srcMethod="getContractMetadata"){return __awaiter(this,void 0,void 0,function*(){let response=yield requestHttpWithBackoff(config,AlchemyApiType1.NFT,"getContractMetadata",srcMethod,{contractAddress});return getNftContractFromRaw(response)})}(this.config,contractAddress)}getNftsForOwnerIterator(owner,options){return function(config,owner,options,srcMethod="getNftsForOwnerIterator"){return __asyncGenerator(this,arguments,function*(){var e_1,_a;let withMetadata=omitMetadataToWithMetadata(null==options?void 0:options.omitMetadata);try{for(var _c,_b=__asyncValues(paginateEndpoint(config,AlchemyApiType1.NFT,"getNFTs",srcMethod,"pageKey","pageKey",{contractAddresses:null==options?void 0:options.contractAddresses,pageKey:null==options?void 0:options.pageKey,filters:null==options?void 0:options.excludeFilters,owner,withMetadata}));!(_c=yield __await(_b.next())).done;){let response=_c.value;for(let ownedNft of response.ownedNfts)yield yield __await(Object.assign(Object.assign({},nftFromGetNftResponse(ownedNft)),{balance:parseInt(ownedNft.balance)}))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&(yield __await(_a.call(_b)))}finally{if(e_1)throw e_1.error}}})}(this.config,owner,options)}getNftsForOwner(owner,options){return getNftsForOwner(this.config,owner,options)}getNftsForContract(contractAddress,options){return function(config,contractAddress,options,srcMethod="getNftsForContract"){var _a;return __awaiter(this,void 0,void 0,function*(){let withMetadata=omitMetadataToWithMetadata(null==options?void 0:options.omitMetadata),response=yield requestHttpWithBackoff(config,AlchemyApiType1.NFT,"getNFTsForCollection",srcMethod,{contractAddress,startToken:null==options?void 0:options.pageKey,withMetadata,limit:null!==(_a=null==options?void 0:options.pageSize)&&void 0!==_a?_a:void 0,tokenUriTimeoutInMs:50});return{nfts:response.nfts.map(res=>nftFromGetNftContractResponse(res,contractAddress)),pageKey:response.nextToken}})}(this.config,contractAddress,options)}getNftsForContractIterator(contractAddress,options){return function(config,contractAddress,options,srcMethod="getNftsForContractIterator"){return __asyncGenerator(this,arguments,function*(){var e_2,_a;let withMetadata=omitMetadataToWithMetadata(null==options?void 0:options.omitMetadata);try{for(var _c,_b=__asyncValues(paginateEndpoint(config,AlchemyApiType1.NFT,"getNFTsForCollection",srcMethod,"startToken","nextToken",{contractAddress,startToken:null==options?void 0:options.pageKey,withMetadata}));!(_c=yield __await(_b.next())).done;){let response=_c.value;for(let nft of response.nfts)yield yield __await(nftFromGetNftContractResponse(nft,contractAddress))}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&(yield __await(_a.call(_b)))}finally{if(e_2)throw e_2.error}}})}(this.config,contractAddress,options)}getOwnersForContract(contractAddress,options){return function(config,contractAddress,options,srcMethod="getOwnersForContract"){return __awaiter(this,void 0,void 0,function*(){let response=yield requestHttpWithBackoff(config,AlchemyApiType1.NFT,"getOwnersForCollection",srcMethod,Object.assign(Object.assign({},options),{contractAddress}));return Object.assign({owners:response.ownerAddresses},void 0!==response.pageKey&&{pageKey:response.pageKey})})}(this.config,contractAddress,options)}getOwnersForNft(contractAddress,tokenId){return function(config,contractAddress,tokenId,srcMethod="getOwnersForNft"){return __awaiter(this,void 0,void 0,function*(){return requestHttpWithBackoff(config,AlchemyApiType1.NFT,"getOwnersForToken",srcMethod,{contractAddress,tokenId:_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__.O$.from(tokenId).toString()})})}(this.config,contractAddress,tokenId)}getContractsForOwner(owner,options){return function(config,owner,options,srcMethod="getContractsForOwner"){return __awaiter(this,void 0,void 0,function*(){let response=yield requestHttpWithBackoff(config,AlchemyApiType1.NFT,"getContractsForOwner",srcMethod,{owner,excludeFilters:null==options?void 0:options.excludeFilters,includeFilters:null==options?void 0:options.includeFilters,pageKey:null==options?void 0:options.pageKey,orderBy:null==options?void 0:options.orderBy});return{pageKey:null==response?void 0:response.pageKey,totalCount:response.totalCount,contracts:response.contracts.map(contract=>({address:contract.address,totalSupply:contract.totalSupply,isSpam:contract.isSpam,media:contract.media,numDistinctTokensOwned:contract.numDistinctTokensOwned,tokenId:contract.tokenId,totalBalance:contract.totalBalance,name:contract.name,openSea:parseOpenSeaMetadata(null==contract?void 0:contract.opensea),symbol:null==contract?void 0:contract.symbol,tokenType:parseNftTokenType(null==contract?void 0:contract.tokenType)}))}})}(this.config,owner,options)}checkNftOwnership(owner,contractAddresses){return function(config,owner,contractAddresses,srcMethod="checkNftOwnership"){return __awaiter(this,void 0,void 0,function*(){if(0===contractAddresses.length)throw Error("Must provide at least one contract address");let response=yield getNftsForOwner(config,owner,{contractAddresses,omitMetadata:!0},srcMethod);return response.ownedNfts.length>0})}(this.config,owner,contractAddresses)}verifyNftOwnership(owner,contractAddress){return function(config,owner,contractAddresses,srcMethod="verifyNftOwnership"){return __awaiter(this,void 0,void 0,function*(){if("string"==typeof contractAddresses){let response=yield getNftsForOwner(config,owner,{contractAddresses:[contractAddresses],omitMetadata:!0},srcMethod);return response.ownedNfts.length>0}{if(0===contractAddresses.length)throw Error("Must provide at least one contract address");let response1=yield getNftsForOwner(config,owner,{contractAddresses,omitMetadata:!0},srcMethod),result=contractAddresses.reduce((acc,curr)=>(acc[curr]=!1,acc),{});for(let nft of response1.ownedNfts)result[nft.contract.address]=!0;return result}})}(this.config,owner,contractAddress)}isSpamContract(contractAddress){return function(config,contractAddress,srcMethod="isSpamContract"){return __awaiter(this,void 0,void 0,function*(){return requestHttpWithBackoff(config,AlchemyApiType1.NFT,"isSpamContract",srcMethod,{contractAddress})})}(this.config,contractAddress)}getSpamContracts(){return function(config,srcMethod="getSpamContracts"){return __awaiter(this,void 0,void 0,function*(){return requestHttpWithBackoff(config,AlchemyApiType1.NFT,"getSpamContracts",srcMethod,void 0)})}(this.config)}getFloorPrice(contractAddress){return function(config,contractAddress,srcMethod="getFloorPrice"){return __awaiter(this,void 0,void 0,function*(){return requestHttpWithBackoff(config,AlchemyApiType1.NFT,"getFloorPrice",srcMethod,{contractAddress})})}(this.config,contractAddress)}getNftSales(options){return function(config,options={},srcMethod="getNftSales"){return __awaiter(this,void 0,void 0,function*(){let params=Object.assign({},options),response=yield requestHttpWithBackoff(config,AlchemyApiType1.NFT,"getNFTSales",srcMethod,{fromBlock:null==params?void 0:params.fromBlock,toBlock:null==params?void 0:params.toBlock,order:null==params?void 0:params.order,marketplace:null==params?void 0:params.marketplace,contractAddress:null==params?void 0:params.contractAddress,tokenId:(null==params?void 0:params.tokenId)?_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__.O$.from(null==params?void 0:params.tokenId).toString():void 0,sellerAddress:null==params?void 0:params.sellerAddress,buyerAddress:null==params?void 0:params.buyerAddress,taker:null==params?void 0:params.taker,limit:null==params?void 0:params.limit,pageKey:null==params?void 0:params.pageKey});return{pageKey:null==response?void 0:response.pageKey,nftSales:response.nftSales.map(rawNftSale=>({marketplace:function(marketplace){switch(marketplace){case"looksrare":return NftSaleMarketplace1.LOOKSRARE;case"seaport":return NftSaleMarketplace1.SEAPORT;case"x2y2":return NftSaleMarketplace1.X2Y2;default:return NftSaleMarketplace1.UNKNOWN}}(rawNftSale.marketplace),contractAddress:rawNftSale.contractAddress,tokenId:rawNftSale.tokenId,quantity:rawNftSale.quantity,buyerAddress:rawNftSale.buyerAddress,sellerAddress:rawNftSale.sellerAddress,taker:function(taker){switch(taker.toLowerCase()){case"buyer":return NftSaleTakerType1.BUYER;case"seller":return NftSaleTakerType1.SELLER;default:throw Error(`Unsupported NftSaleTakerType ${taker}`)}}(rawNftSale.taker),sellerFee:null==rawNftSale?void 0:rawNftSale.sellerFee,marketplaceFee:null==rawNftSale?void 0:rawNftSale.marketplaceFee,royaltyFee:null==rawNftSale?void 0:rawNftSale.royaltyFee,blockNumber:null==rawNftSale?void 0:rawNftSale.blockNumber,logIndex:rawNftSale.logIndex,bundleIndex:rawNftSale.bundleIndex,transactionHash:rawNftSale.transactionHash}))}})}(this.config,options)}computeRarity(contractAddress,tokenId){return function(config,contractAddress,tokenId,srcMethod="computeRarity"){return __awaiter(this,void 0,void 0,function*(){let response=yield requestHttpWithBackoff(config,AlchemyApiType1.NFT,"computeRarity",srcMethod,{contractAddress,tokenId:_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__.O$.from(tokenId).toString()});return response.map(({prevalence,trait_type,value})=>({prevalence,traitType:trait_type,value}))})}(this.config,contractAddress,tokenId)}searchContractMetadata(query){return function(config,query,srcMethod="searchContractMetadata"){return __awaiter(this,void 0,void 0,function*(){let response=yield requestHttpWithBackoff(config,AlchemyApiType1.NFT,"searchContractMetadata",srcMethod,{query});return response.map(getNftContractFromRaw)})}(this.config,query)}summarizeNftAttributes(contractAddress){return function(config,contractAddress,srcMethod="summarizeNftAttributes"){return __awaiter(this,void 0,void 0,function*(){return requestHttpWithBackoff(config,AlchemyApiType1.NFT,"summarizeNftAttributes",srcMethod,{contractAddress})})}(this.config,contractAddress)}refreshNftMetadata(contractAddress,tokenId){return function(config,contractAddress,tokenId,srcMethod="refreshNftMetadata"){return __awaiter(this,void 0,void 0,function*(){let tokenIdString=_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__.O$.from(tokenId).toString(),first=yield getNftMetadata(config,contractAddress,tokenIdString,void 0,void 0,srcMethod),second=yield function(config,contractAddress,tokenId,srcMethod){return __awaiter(this,void 0,void 0,function*(){let response=yield requestHttpWithBackoff(config,AlchemyApiType1.NFT,"getNFTMetadata",srcMethod,{contractAddress,tokenId:_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__.O$.from(tokenId).toString(),refreshCache:!0});return getNftFromRaw(response)})}(config,contractAddress,tokenIdString,srcMethod);return first.timeLastUpdated!==second.timeLastUpdated})}(this.config,contractAddress,tokenId)}refreshContract(contractAddress){return function(config,contractAddress,srcMethod="refreshContract"){return __awaiter(this,void 0,void 0,function*(){let response=yield requestHttpWithBackoff(config,AlchemyApiType1.NFT,"reingestContract",srcMethod,{contractAddress});return{contractAddress:response.contractAddress,refreshState:function(reingestionState){switch(reingestionState){case"does_not_exist":return RefreshState1.DOES_NOT_EXIST;case"already_queued":return RefreshState1.ALREADY_QUEUED;case"in_progress":return RefreshState1.IN_PROGRESS;case"finished":return RefreshState1.FINISHED;case"queued":return RefreshState1.QUEUED;case"queue_failed":return RefreshState1.QUEUE_FAILED;default:throw Error("Unknown reingestion state: "+reingestionState)}}(response.reingestionState),progress:response.progress}})}(this.config,contractAddress)}}class NotifyNamespace{constructor(config){this.config=config}getAllWebhooks(){return __awaiter(this,void 0,void 0,function*(){this.verifyConfig();let response=yield this.sendWebhookRequest("team-webhooks","getAllWebhooks",{});return{webhooks:response.data.map(parseRawWebhook),totalCount:response.data.length}})}getAddresses(webhookOrId,options){return __awaiter(this,void 0,void 0,function*(){this.verifyConfig();let webhookId="string"==typeof webhookOrId?webhookOrId:webhookOrId.id,response=yield this.sendWebhookRequest("webhook-addresses","getAddresses",{webhook_id:webhookId,limit:null==options?void 0:options.limit,after:null==options?void 0:options.pageKey});return{addresses:response.data,totalCount:response.pagination.total_count,pageKey:response.pagination.cursors.after}})}getNftFilters(webhookOrId,options){return __awaiter(this,void 0,void 0,function*(){this.verifyConfig();let webhookId="string"==typeof webhookOrId?webhookOrId:webhookOrId.id,response=yield this.sendWebhookRequest("webhook-nft-filters","getNftFilters",{webhook_id:webhookId,limit:null==options?void 0:options.limit,after:null==options?void 0:options.pageKey});return{filters:response.data.map(f=>({contractAddress:f.contract_address,tokenId:_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__.O$.from(f.token_id).toString()})),totalCount:response.pagination.total_count,pageKey:response.pagination.cursors.after}})}updateWebhook(webhookOrId,update){return __awaiter(this,void 0,void 0,function*(){let restApiName,methodName,method,data;let webhookId="string"==typeof webhookOrId?webhookOrId:webhookOrId.id;if("isActive"in update)restApiName="update-webhook",methodName="updateWebhook",method="PUT",data={webhook_id:webhookId,is_active:update.isActive};else if("addFilters"in update||"removeFilters"in update)restApiName="update-webhook-nft-filters",methodName="updateWebhookNftFilters",method="PATCH",data={webhook_id:webhookId,nft_filters_to_add:update.addFilters?update.addFilters.map(nftFilterToParam):[],nft_filters_to_remove:update.removeFilters?update.removeFilters.map(nftFilterToParam):[]};else if("addAddresses"in update||"removeAddresses"in update)restApiName="update-webhook-addresses",methodName="webhook:updateWebhookAddresses",method="PATCH",data={webhook_id:webhookId,addresses_to_add:yield this.resolveAddresses(update.addAddresses),addresses_to_remove:yield this.resolveAddresses(update.removeAddresses)};else if("newAddresses"in update)restApiName="update-webhook-addresses",methodName="webhook:updateWebhookAddress",method="PUT",data={webhook_id:webhookId,addresses:yield this.resolveAddresses(update.newAddresses)};else throw Error("Invalid `update` param passed into `updateWebhook`");yield this.sendWebhookRequest(restApiName,methodName,{},{method,data})})}createWebhook(url,type,params){return __awaiter(this,void 0,void 0,function*(){let appId,filters,addresses;if(type===WebhookType1.MINED_TRANSACTION||type===WebhookType1.DROPPED_TRANSACTION){if(!("appId"in params))throw Error("Transaction Webhooks require an app id.");appId=params.appId}let network=NETWORK_TO_WEBHOOK_NETWORK.get(this.config.network);if(type===WebhookType1.NFT_ACTIVITY){if(!("filters"in params)||0===params.filters.length)throw Error("Nft Activity Webhooks require a non-empty array input.");network=params.network?NETWORK_TO_WEBHOOK_NETWORK.get(params.network):network,filters=params.filters.map(filter=>({contract_address:filter.contractAddress,token_id:_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__.O$.from(filter.tokenId).toString()}))}else if(type===WebhookType1.ADDRESS_ACTIVITY){if(void 0===params||!("addresses"in params)||0===params.addresses.length)throw Error("Address Activity Webhooks require a non-empty array input.");network=params.network?NETWORK_TO_WEBHOOK_NETWORK.get(params.network):network,addresses=yield this.resolveAddresses(params.addresses)}let data=Object.assign(Object.assign(Object.assign({network,webhook_type:type,webhook_url:url},appId&&{app_id:appId}),filters&&{nft_filters:filters}),addresses&&{addresses}),response=yield this.sendWebhookRequest("create-webhook","createWebhook",{},{method:"POST",data});return parseRawWebhook(response.data)})}deleteWebhook(webhookOrId){return __awaiter(this,void 0,void 0,function*(){this.verifyConfig();let webhookId="string"==typeof webhookOrId?webhookOrId:webhookOrId.id,response=yield this.sendWebhookRequest("delete-webhook","deleteWebhook",{webhook_id:webhookId},{method:"DELETE"});if("message"in response)throw Error(`Webhook not found. Failed to delete webhook: ${webhookId}`)})}verifyConfig(){if(void 0===this.config.authToken)throw Error("Using the Notify API requires setting the Alchemy Auth Token in the settings object when initializing Alchemy.")}sendWebhookRequest(restApiName,methodName,params,overrides){return requestHttpWithBackoff(this.config,AlchemyApiType1.WEBHOOK,restApiName,methodName,params,Object.assign(Object.assign({},overrides),{headers:Object.assign({"X-Alchemy-Token":this.config.authToken},null==overrides?void 0:overrides.headers)}))}resolveAddresses(addresses){return __awaiter(this,void 0,void 0,function*(){if(void 0===addresses)return[];let resolvedAddresses=[],provider=yield this.config.getProvider();for(let address of addresses){let rawAddress=yield provider.resolveName(address);if(null===rawAddress)throw Error(`Unable to resolve the ENS address: ${address}`);resolvedAddresses.push(rawAddress)}return resolvedAddresses})}}let WEBHOOK_NETWORK_TO_NETWORK={ETH_MAINNET:Network1.ETH_MAINNET,ETH_GOERLI:Network1.ETH_GOERLI,ETH_ROPSTEN:Network1.ETH_ROPSTEN,ETH_RINKEBY:Network1.ETH_RINKEBY,ETH_KOVAN:Network1.ETH_KOVAN,MATIC_MAINNET:Network1.MATIC_MAINNET,MATIC_MUMBAI:Network1.MATIC_MUMBAI,ARB_MAINNET:Network1.ARB_MAINNET,ARB_RINKEBY:Network1.ARB_RINKEBY,OPT_MAINNET:Network1.OPT_MAINNET,OPT_KOVAN:Network1.OPT_KOVAN},NETWORK_TO_WEBHOOK_NETWORK=Object.keys(Network1).reduce((map,key)=>(key in WEBHOOK_NETWORK_TO_NETWORK&&map.set(WEBHOOK_NETWORK_TO_NETWORK[key],key),map),new Map);function parseRawWebhook(rawWebhook){return Object.assign({id:rawWebhook.id,network:WEBHOOK_NETWORK_TO_NETWORK[rawWebhook.network],type:rawWebhook.webhook_type,url:rawWebhook.webhook_url,isActive:rawWebhook.is_active,timeCreated:new Date(rawWebhook.time_created).toISOString(),signingKey:rawWebhook.signing_key,version:rawWebhook.version},void 0!==rawWebhook.app_id&&{appId:rawWebhook.app_id})}function nftFilterToParam(filter){return{contract_address:filter.contractAddress,token_id:_ethersproject_bignumber__WEBPACK_IMPORTED_MODULE_1__.O$.from(filter.tokenId).toString()}}let GAS_OPTIMIZED_TX_FEE_MULTIPLES=[.9,1,1.1,1.2,1.3];class TransactNamespace{constructor(config){this.config=config}sendPrivateTransaction(signedTransaction,maxBlockNumber,options){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider(),hexBlockNumber=maxBlockNumber?toHex(maxBlockNumber):void 0;return provider._send("eth_sendPrivateTransaction",[{tx:signedTransaction,maxBlockNumber:hexBlockNumber,preferences:options}],"sendPrivateTransaction")})}cancelPrivateTransaction(transactionHash){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider._send("eth_cancelPrivateTransaction",[{txHash:transactionHash}],"cancelPrivateTransaction")})}getTransaction(transactionHash){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.getTransaction(transactionHash)})}sendTransaction(signedTransaction){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.sendTransaction(signedTransaction)})}estimateGas(transaction){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.estimateGas(transaction)})}getMaxPriorityFeePerGas(){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider(),feeHex=yield provider._send("eth_maxPriorityFeePerGas",[],"getMaxPriorityFeePerGas");return fromHex(feeHex)})}waitForTransaction(transactionHash,confirmations,timeout){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider.waitForTransaction(transactionHash,confirmations,timeout)})}sendGasOptimizedTransaction(transactionOrSignedTxs,wallet){return __awaiter(this,void 0,void 0,function*(){var gasLimit,baseFee,priorityFee;let gasLimit1,priorityFee1,baseFee1;if(Array.isArray(transactionOrSignedTxs))return this._sendGasOptimizedTransaction(transactionOrSignedTxs,"sendGasOptimizedTransactionPreSigned");let provider=yield this.config.getProvider();try{gasLimit1=yield this.estimateGas(transactionOrSignedTxs),priorityFee1=yield this.getMaxPriorityFeePerGas();let currentBlock=yield provider.getBlock("latest");baseFee1=currentBlock.baseFeePerGas.toNumber()}catch(e){throw Error(`Failed to estimate gas for transaction: ${e}`)}let gasSpreadTransactions=(gasLimit=gasLimit1.toNumber(),baseFee=baseFee1,priorityFee=priorityFee1,GAS_OPTIMIZED_TX_FEE_MULTIPLES.map(feeMultiplier=>Object.assign(Object.assign({},transactionOrSignedTxs),{gasLimit,maxFeePerGas:Math.round(baseFee*feeMultiplier+priorityFee*feeMultiplier),maxPriorityFeePerGas:Math.round(feeMultiplier*priorityFee)}))),signedTransactions=yield Promise.all(gasSpreadTransactions.map(tx=>wallet.signTransaction(tx)));return this._sendGasOptimizedTransaction(signedTransactions,"sendGasOptimizedTransactionGenerated")})}getGasOptimizedTransactionStatus(trackingId){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider._send("alchemy_getGasOptimizedTransactionStatus",[trackingId],"getGasOptimizedTransactionStatus")})}_sendGasOptimizedTransaction(signedTransactions,methodName){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider();return provider._send("alchemy_sendGasOptimizedTransaction",[{rawTransactions:signedTransactions}],methodName)})}}let ALCHEMY_PENDING_TRANSACTIONS_EVENT_TYPE="alchemy-pending-transactions",ALCHEMY_MINED_TRANSACTIONS_EVENT_TYPE="alchemy-mined-transactions",ALCHEMY_EVENT_TYPES=[ALCHEMY_PENDING_TRANSACTIONS_EVENT_TYPE,ALCHEMY_MINED_TRANSACTIONS_EVENT_TYPE];class Event1{constructor(tag,listener,once){this.listener=listener,this.tag=tag,this.once=once,this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter;default:return this.tag}}get type(){return this.tag.split(":")[0]}get hash(){let comps=this.tag.split(":");if("tx"!==comps[0])throw Error("Not a transaction event");return comps[1]}get filter(){var data;let comps=this.tag.split(":");if("filter"!==comps[0])throw Error("Not a transaction event");let address=comps[1],topics=""===(data=comps[2])?[]:data.split(/&/g).map(topic=>{if(""===topic)return[];let comps=topic.split("|").map(topic=>"null"===topic?null:topic);return 1===comps.length?comps[0]:comps}),filter={};return topics.length>0&&(filter.topics=topics),address&&"*"!==address&&(filter.address=address),filter}pollable(){return this.tag.indexOf(":")>=0||["block","network","pending","poll"].indexOf(this.tag)>=0}}class EthersEvent extends Event1{get fromAddress(){let comps=this.tag.split(":");return comps[0]!==ALCHEMY_PENDING_TRANSACTIONS_EVENT_TYPE?void 0:comps[1]&&"*"!==comps[1]?deserializeAddressField(comps[1]):void 0}get toAddress(){let comps=this.tag.split(":");return comps[0]!==ALCHEMY_PENDING_TRANSACTIONS_EVENT_TYPE?void 0:comps[2]&&"*"!==comps[2]?deserializeAddressField(comps[2]):void 0}get hashesOnly(){let comps=this.tag.split(":");return ALCHEMY_EVENT_TYPES.includes(comps[0])&&comps[3]&&"*"!==comps[3]?"true"===comps[3]:void 0}get includeRemoved(){let comps=this.tag.split(":");return comps[0]!==ALCHEMY_MINED_TRANSACTIONS_EVENT_TYPE?void 0:comps[2]&&"*"!==comps[2]?"true"===comps[2]:void 0}get addresses(){let comps=this.tag.split(":");return comps[0]!==ALCHEMY_MINED_TRANSACTIONS_EVENT_TYPE?void 0:comps[1]&&"*"!==comps[1]?function(data){if(""!==data)return data.split("|").map(addressStr=>addressStr.split(",")).map(addressPair=>Object.assign(Object.assign({},"*"!==addressPair[0]&&{to:addressPair[0]}),"*"!==addressPair[1]&&{from:addressPair[1]}))}(comps[1]):void 0}}function isAlchemyEvent(event){return"object"==typeof event&&"method"in event}function getAlchemyEventTag(event){if(!isAlchemyEvent(event))throw Error("Event tag requires AlchemyEventType");if(event.method===AlchemySubscription1.PENDING_TRANSACTIONS)return function(event){let fromAddress=serializeAddressField(event.fromAddress),toAddress=serializeAddressField(event.toAddress),hashesOnly=serializeBooleanField(event.hashesOnly);return ALCHEMY_PENDING_TRANSACTIONS_EVENT_TYPE+":"+fromAddress+":"+toAddress+":"+hashesOnly}(event);if(event.method===AlchemySubscription1.MINED_TRANSACTIONS)return function(event){var addresses;let addresses1=void 0===(addresses=event.addresses)?"*":addresses.map(filter=>serializeAddressField(filter.to)+","+serializeAddressField(filter.from)).join("|"),includeRemoved=serializeBooleanField(event.includeRemoved),hashesOnly=serializeBooleanField(event.hashesOnly);return ALCHEMY_MINED_TRANSACTIONS_EVENT_TYPE+":"+addresses1+":"+includeRemoved+":"+hashesOnly}(event);throw Error(`Unrecognized AlchemyFilterEvent: ${event}`)}function verifyAlchemyEventName(eventName){if(!Object.values(AlchemySubscription1).includes(eventName.method))throw Error(`Invalid method name ${eventName.method}. Accepted method names: ${Object.values(AlchemySubscription1)}`)}function serializeAddressField(field){return void 0===field?"*":Array.isArray(field)?field.join("|"):field}function serializeBooleanField(field){return void 0===field?"*":field.toString()}function deserializeAddressField(data){if(""===data)return;let addresses=data.split("|");return 1===addresses.length?addresses[0]:addresses}class WebSocketNamespace{constructor(config){this.config=config}on(eventName,listener){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getWebSocketProvider(),processedEvent=yield this._resolveEnsAlchemyEvent(eventName);provider.on(processedEvent,listener)}),this}once(eventName,listener){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getWebSocketProvider(),processedEvent=yield this._resolveEnsAlchemyEvent(eventName);provider.once(processedEvent,listener)}),this}off(eventName,listener){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getWebSocketProvider(),processedEvent=yield this._resolveEnsAlchemyEvent(eventName);return provider.off(processedEvent,listener)}),this}removeAllListeners(eventName){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getWebSocketProvider(),processedEvent=eventName?yield this._resolveEnsAlchemyEvent(eventName):void 0;provider.removeAllListeners(processedEvent)}),this}listenerCount(eventName){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getWebSocketProvider(),processedEvent=eventName?yield this._resolveEnsAlchemyEvent(eventName):void 0;return provider.listenerCount(processedEvent)})}listeners(eventName){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getWebSocketProvider(),processedEvent=eventName?yield this._resolveEnsAlchemyEvent(eventName):void 0;return provider.listeners(processedEvent)})}_resolveEnsAlchemyEvent(eventName){return __awaiter(this,void 0,void 0,function*(){if(!isAlchemyEvent(eventName))return eventName;if(eventName.method===AlchemySubscription1.MINED_TRANSACTIONS&&eventName.addresses){let processedAddresses=[];for(let address of eventName.addresses)address.to&&(address.to=yield this._resolveNameOrError(address.to)),address.from&&(address.from=yield this._resolveNameOrError(address.from)),processedAddresses.push(address);eventName.addresses=processedAddresses}else eventName.method===AlchemySubscription1.PENDING_TRANSACTIONS&&(eventName.fromAddress&&("string"==typeof eventName.fromAddress?eventName.fromAddress=yield this._resolveNameOrError(eventName.fromAddress):eventName.fromAddress=yield Promise.all(eventName.fromAddress.map(this._resolveNameOrError))),eventName.toAddress&&("string"==typeof eventName.toAddress?eventName.toAddress=yield this._resolveNameOrError(eventName.toAddress):eventName.toAddress=yield Promise.all(eventName.toAddress.map(this._resolveNameOrError))));return eventName})}_resolveNameOrError(name){return __awaiter(this,void 0,void 0,function*(){let provider=yield this.config.getProvider(),resolved=yield provider.resolveName(name);if(null===resolved)throw Error(`Unable to resolve the ENS address: ${name}`);return resolved})}}class Alchemy{constructor(settings){this.config=new AlchemyConfig(settings),this.core=new CoreNamespace(this.config),this.nft=new NftNamespace(this.config),this.ws=new WebSocketNamespace(this.config),this.transact=new TransactNamespace(this.config),this.notify=new NotifyNamespace(this.config)}}},17283:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ps:function(){return gql}});var DirectiveLocation,TokenKind,gql_1,DirectiveLocation1,tokenKind_TokenKind,tslib_es6=__webpack_require__(70655);let LineRegExp=/\r\n|[\n\r]/g;function getLocation(source,position){let lastLineStart=0,line=1;for(let match of source.body.matchAll(LineRegExp)){if("number"==typeof match.index||function(condition,message){let booleanCondition=Boolean(condition);if(!booleanCondition)throw Error(null!=message?message:"Unexpected invariant triggered.")}(!1),match.index>=position)break;lastLineStart=match.index+match[0].length,line+=1}return{line,column:position+1-lastLineStart}}function printSourceLocation(source,sourceLocation){let firstLineColumnOffset=source.locationOffset.column-1,body="".padStart(firstLineColumnOffset)+source.body,lineIndex=sourceLocation.line-1,lineOffset=source.locationOffset.line-1,lineNum=sourceLocation.line+lineOffset,columnOffset=1===sourceLocation.line?firstLineColumnOffset:0,columnNum=sourceLocation.column+columnOffset,locationStr=`${source.name}:${lineNum}:${columnNum}
`,lines=body.split(/\r\n|[\n\r]/g),locationLine=lines[lineIndex];if(locationLine.length>120){let subLineIndex=Math.floor(columnNum/80),subLines=[];for(let i=0;i<locationLine.length;i+=80)subLines.push(locationLine.slice(i,i+80));return locationStr+printPrefixedLines([[`${lineNum} |`,subLines[0]],...subLines.slice(1,subLineIndex+1).map(subLine=>["|",subLine]),["|","^".padStart(columnNum%80)],["|",subLines[subLineIndex+1]]])}return locationStr+printPrefixedLines([[`${lineNum-1} |`,lines[lineIndex-1]],[`${lineNum} |`,locationLine],["|","^".padStart(columnNum)],[`${lineNum+1} |`,lines[lineIndex+1]]])}function printPrefixedLines(lines){let existingLines=lines.filter(([_,line])=>void 0!==line),padLen=Math.max(...existingLines.map(([prefix])=>prefix.length));return existingLines.map(([prefix,line])=>prefix.padStart(padLen)+(line?" "+line:"")).join("\n")}class GraphQLError extends Error{constructor(message,...rawArgs){var _this$nodes,_nodeLocations$,_ref,value;let{nodes,source,positions,path,originalError,extensions}=function(args){let firstArg=args[0];return null==firstArg||"kind"in firstArg||"length"in firstArg?{nodes:firstArg,source:args[1],positions:args[2],path:args[3],originalError:args[4],extensions:args[5]}:firstArg}(rawArgs);super(message),this.name="GraphQLError",this.path=null!=path?path:void 0,this.originalError=null!=originalError?originalError:void 0,this.nodes=undefinedIfEmpty(Array.isArray(nodes)?nodes:nodes?[nodes]:void 0);let nodeLocations=undefinedIfEmpty(null===(_this$nodes=this.nodes)||void 0===_this$nodes?void 0:_this$nodes.map(node=>node.loc).filter(loc=>null!=loc));this.source=null!=source?source:null==nodeLocations?void 0:null===(_nodeLocations$=nodeLocations[0])||void 0===_nodeLocations$?void 0:_nodeLocations$.source,this.positions=null!=positions?positions:null==nodeLocations?void 0:nodeLocations.map(loc=>loc.start),this.locations=positions&&source?positions.map(pos=>getLocation(source,pos)):null==nodeLocations?void 0:nodeLocations.map(loc=>getLocation(loc.source,loc.start));let originalExtensions="object"==typeof(value=null==originalError?void 0:originalError.extensions)&&null!==value?null==originalError?void 0:originalError.extensions:void 0;this.extensions=null!==(_ref=null!=extensions?extensions:originalExtensions)&&void 0!==_ref?_ref:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=originalError&&originalError.stack?Object.defineProperty(this,"stack",{value:originalError.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,GraphQLError):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let output=this.message;if(this.nodes){for(let node of this.nodes)if(node.loc){var location;output+="\n\n"+printSourceLocation((location=node.loc).source,getLocation(location.source,location.start))}}else if(this.source&&this.locations)for(let location1 of this.locations)output+="\n\n"+printSourceLocation(this.source,location1);return output}toJSON(){let formattedError={message:this.message};return null!=this.locations&&(formattedError.locations=this.locations),null!=this.path&&(formattedError.path=this.path),null!=this.extensions&&Object.keys(this.extensions).length>0&&(formattedError.extensions=this.extensions),formattedError}}function undefinedIfEmpty(array){return void 0===array||0===array.length?void 0:array}function syntaxError(source,position,description){return new GraphQLError(`Syntax Error: ${description}`,{source,positions:[position]})}var ast=__webpack_require__(72380);(DirectiveLocation=DirectiveLocation1||(DirectiveLocation1={})).QUERY="QUERY",DirectiveLocation.MUTATION="MUTATION",DirectiveLocation.SUBSCRIPTION="SUBSCRIPTION",DirectiveLocation.FIELD="FIELD",DirectiveLocation.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",DirectiveLocation.FRAGMENT_SPREAD="FRAGMENT_SPREAD",DirectiveLocation.INLINE_FRAGMENT="INLINE_FRAGMENT",DirectiveLocation.VARIABLE_DEFINITION="VARIABLE_DEFINITION",DirectiveLocation.SCHEMA="SCHEMA",DirectiveLocation.SCALAR="SCALAR",DirectiveLocation.OBJECT="OBJECT",DirectiveLocation.FIELD_DEFINITION="FIELD_DEFINITION",DirectiveLocation.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",DirectiveLocation.INTERFACE="INTERFACE",DirectiveLocation.UNION="UNION",DirectiveLocation.ENUM="ENUM",DirectiveLocation.ENUM_VALUE="ENUM_VALUE",DirectiveLocation.INPUT_OBJECT="INPUT_OBJECT",DirectiveLocation.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION";var kinds=__webpack_require__(97359),blockString=__webpack_require__(87392),characterClasses=__webpack_require__(68297);(TokenKind=tokenKind_TokenKind||(tokenKind_TokenKind={})).SOF="<SOF>",TokenKind.EOF="<EOF>",TokenKind.BANG="!",TokenKind.DOLLAR="$",TokenKind.AMP="&",TokenKind.PAREN_L="(",TokenKind.PAREN_R=")",TokenKind.SPREAD="...",TokenKind.COLON=":",TokenKind.EQUALS="=",TokenKind.AT="@",TokenKind.BRACKET_L="[",TokenKind.BRACKET_R="]",TokenKind.BRACE_L="{",TokenKind.PIPE="|",TokenKind.BRACE_R="}",TokenKind.NAME="Name",TokenKind.INT="Int",TokenKind.FLOAT="Float",TokenKind.STRING="String",TokenKind.BLOCK_STRING="BlockString",TokenKind.COMMENT="Comment";class Lexer{constructor(source){let startOfFileToken=new ast.WU(tokenKind_TokenKind.SOF,0,0,0,0);this.source=source,this.lastToken=startOfFileToken,this.token=startOfFileToken,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){this.lastToken=this.token;let token=this.token=this.lookahead();return token}lookahead(){let token=this.token;if(token.kind!==tokenKind_TokenKind.EOF)do if(token.next)token=token.next;else{let nextToken=function(lexer,start){let body=lexer.source.body,bodyLength=body.length,position=start;for(;position<bodyLength;){let code=body.charCodeAt(position);switch(code){case 65279:case 9:case 32:case 44:++position;continue;case 10:++position,++lexer.line,lexer.lineStart=position;continue;case 13:10===body.charCodeAt(position+1)?position+=2:++position,++lexer.line,lexer.lineStart=position;continue;case 35:return function(lexer,start){let body=lexer.source.body,bodyLength=body.length,position=start+1;for(;position<bodyLength;){let code=body.charCodeAt(position);if(10===code||13===code)break;if(isUnicodeScalarValue(code))++position;else if(isSupplementaryCodePoint(body,position))position+=2;else break}return createToken(lexer,tokenKind_TokenKind.COMMENT,start,position,body.slice(start+1,position))}(lexer,position);case 33:return createToken(lexer,tokenKind_TokenKind.BANG,position,position+1);case 36:return createToken(lexer,tokenKind_TokenKind.DOLLAR,position,position+1);case 38:return createToken(lexer,tokenKind_TokenKind.AMP,position,position+1);case 40:return createToken(lexer,tokenKind_TokenKind.PAREN_L,position,position+1);case 41:return createToken(lexer,tokenKind_TokenKind.PAREN_R,position,position+1);case 46:if(46===body.charCodeAt(position+1)&&46===body.charCodeAt(position+2))return createToken(lexer,tokenKind_TokenKind.SPREAD,position,position+3);break;case 58:return createToken(lexer,tokenKind_TokenKind.COLON,position,position+1);case 61:return createToken(lexer,tokenKind_TokenKind.EQUALS,position,position+1);case 64:return createToken(lexer,tokenKind_TokenKind.AT,position,position+1);case 91:return createToken(lexer,tokenKind_TokenKind.BRACKET_L,position,position+1);case 93:return createToken(lexer,tokenKind_TokenKind.BRACKET_R,position,position+1);case 123:return createToken(lexer,tokenKind_TokenKind.BRACE_L,position,position+1);case 124:return createToken(lexer,tokenKind_TokenKind.PIPE,position,position+1);case 125:return createToken(lexer,tokenKind_TokenKind.BRACE_R,position,position+1);case 34:if(34===body.charCodeAt(position+1)&&34===body.charCodeAt(position+2))return function(lexer,start){let body=lexer.source.body,bodyLength=body.length,lineStart=lexer.lineStart,position=start+3,chunkStart=position,currentLine="",blockLines=[];for(;position<bodyLength;){let code=body.charCodeAt(position);if(34===code&&34===body.charCodeAt(position+1)&&34===body.charCodeAt(position+2)){currentLine+=body.slice(chunkStart,position),blockLines.push(currentLine);let token=createToken(lexer,tokenKind_TokenKind.BLOCK_STRING,start,position+3,(0,blockString.wv)(blockLines).join("\n"));return lexer.line+=blockLines.length-1,lexer.lineStart=lineStart,token}if(92===code&&34===body.charCodeAt(position+1)&&34===body.charCodeAt(position+2)&&34===body.charCodeAt(position+3)){currentLine+=body.slice(chunkStart,position),chunkStart=position+1,position+=4;continue}if(10===code||13===code){currentLine+=body.slice(chunkStart,position),blockLines.push(currentLine),13===code&&10===body.charCodeAt(position+1)?position+=2:++position,currentLine="",chunkStart=position,lineStart=position;continue}if(isUnicodeScalarValue(code))++position;else if(isSupplementaryCodePoint(body,position))position+=2;else throw syntaxError(lexer.source,position,`Invalid character within String: ${printCodePointAt(lexer,position)}.`)}throw syntaxError(lexer.source,position,"Unterminated string.")}(lexer,position);return function(lexer,start){let body=lexer.source.body,bodyLength=body.length,position=start+1,chunkStart=position,value="";for(;position<bodyLength;){let code=body.charCodeAt(position);if(34===code)return value+=body.slice(chunkStart,position),createToken(lexer,tokenKind_TokenKind.STRING,start,position+1,value);if(92===code){value+=body.slice(chunkStart,position);let escape=117===body.charCodeAt(position+1)?123===body.charCodeAt(position+2)?function(lexer,position){let body=lexer.source.body,point=0,size=3;for(;size<12;){let code=body.charCodeAt(position+size++);if(125===code){if(size<5||!isUnicodeScalarValue(point))break;return{value:String.fromCodePoint(point),size}}if((point=point<<4|readHexDigit(code))<0)break}throw syntaxError(lexer.source,position,`Invalid Unicode escape sequence: "${body.slice(position,position+size)}".`)}(lexer,position):function(lexer,position){let body=lexer.source.body,code=read16BitHexCode(body,position+2);if(isUnicodeScalarValue(code))return{value:String.fromCodePoint(code),size:6};if(isLeadingSurrogate(code)&&92===body.charCodeAt(position+6)&&117===body.charCodeAt(position+7)){let trailingCode=read16BitHexCode(body,position+8);if(isTrailingSurrogate(trailingCode))return{value:String.fromCodePoint(code,trailingCode),size:12}}throw syntaxError(lexer.source,position,`Invalid Unicode escape sequence: "${body.slice(position,position+6)}".`)}(lexer,position):function(lexer,position){let body=lexer.source.body,code=body.charCodeAt(position+1);switch(code){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:"\n",size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw syntaxError(lexer.source,position,`Invalid character escape sequence: "${body.slice(position,position+2)}".`)}(lexer,position);value+=escape.value,position+=escape.size,chunkStart=position;continue}if(10===code||13===code)break;if(isUnicodeScalarValue(code))++position;else if(isSupplementaryCodePoint(body,position))position+=2;else throw syntaxError(lexer.source,position,`Invalid character within String: ${printCodePointAt(lexer,position)}.`)}throw syntaxError(lexer.source,position,"Unterminated string.")}(lexer,position)}if((0,characterClasses.X1)(code)||45===code)return function(lexer,start,firstCode){let body=lexer.source.body,position=start,code=firstCode,isFloat=!1;if(45===code&&(code=body.charCodeAt(++position)),48===code){if(code=body.charCodeAt(++position),(0,characterClasses.X1)(code))throw syntaxError(lexer.source,position,`Invalid number, unexpected digit after 0: ${printCodePointAt(lexer,position)}.`)}else position=readDigits(lexer,position,code),code=body.charCodeAt(position);if(46===code&&(isFloat=!0,code=body.charCodeAt(++position),position=readDigits(lexer,position,code),code=body.charCodeAt(position)),(69===code||101===code)&&(isFloat=!0,(43===(code=body.charCodeAt(++position))||45===code)&&(code=body.charCodeAt(++position)),position=readDigits(lexer,position,code),code=body.charCodeAt(position)),46===code||(0,characterClasses.LQ)(code))throw syntaxError(lexer.source,position,`Invalid number, expected digit but got: ${printCodePointAt(lexer,position)}.`);return createToken(lexer,isFloat?tokenKind_TokenKind.FLOAT:tokenKind_TokenKind.INT,start,position,body.slice(start,position))}(lexer,position,code);if((0,characterClasses.LQ)(code))return function(lexer,start){let body=lexer.source.body,bodyLength=body.length,position=start+1;for(;position<bodyLength;){let code=body.charCodeAt(position);if((0,characterClasses.HQ)(code))++position;else break}return createToken(lexer,tokenKind_TokenKind.NAME,start,position,body.slice(start,position))}(lexer,position);throw syntaxError(lexer.source,position,39===code?"Unexpected single quote character ('), did you mean to use a double quote (\")?":isUnicodeScalarValue(code)||isSupplementaryCodePoint(body,position)?`Unexpected character: ${printCodePointAt(lexer,position)}.`:`Invalid character: ${printCodePointAt(lexer,position)}.`)}return createToken(lexer,tokenKind_TokenKind.EOF,bodyLength,bodyLength)}(this,token.end);token.next=nextToken,nextToken.prev=token,token=nextToken}while(token.kind===tokenKind_TokenKind.COMMENT);return token}}function isUnicodeScalarValue(code){return code>=0&&code<=55295||code>=57344&&code<=1114111}function isSupplementaryCodePoint(body,location){return isLeadingSurrogate(body.charCodeAt(location))&&isTrailingSurrogate(body.charCodeAt(location+1))}function isLeadingSurrogate(code){return code>=55296&&code<=56319}function isTrailingSurrogate(code){return code>=56320&&code<=57343}function printCodePointAt(lexer,location){let code=lexer.source.body.codePointAt(location);if(void 0===code)return tokenKind_TokenKind.EOF;if(code>=32&&code<=126){let char=String.fromCodePoint(code);return'"'===char?"'\"'":`"${char}"`}return"U+"+code.toString(16).toUpperCase().padStart(4,"0")}function createToken(lexer,kind,start,end,value){let line=lexer.line,col=1+start-lexer.lineStart;return new ast.WU(kind,start,end,line,col,value)}function readDigits(lexer,start,firstCode){if(!(0,characterClasses.X1)(firstCode))throw syntaxError(lexer.source,start,`Invalid number, expected digit but got: ${printCodePointAt(lexer,start)}.`);let body=lexer.source.body,position=start+1;for(;(0,characterClasses.X1)(body.charCodeAt(position));)++position;return position}function read16BitHexCode(body,position){return readHexDigit(body.charCodeAt(position))<<12|readHexDigit(body.charCodeAt(position+1))<<8|readHexDigit(body.charCodeAt(position+2))<<4|readHexDigit(body.charCodeAt(position+3))}function readHexDigit(code){return code>=48&&code<=57?code-48:code>=65&&code<=70?code-55:code>=97&&code<=102?code-87:-1}var language_source=__webpack_require__(51270);class Parser{constructor(source,options={}){let sourceObj=(0,language_source.T)(source)?source:new language_source.H(source);this._lexer=new Lexer(sourceObj),this._options=options,this._tokenCounter=0}parseName(){let token=this.expectToken(tokenKind_TokenKind.NAME);return this.node(token,{kind:kinds.h.NAME,value:token.value})}parseDocument(){return this.node(this._lexer.token,{kind:kinds.h.DOCUMENT,definitions:this.many(tokenKind_TokenKind.SOF,this.parseDefinition,tokenKind_TokenKind.EOF)})}parseDefinition(){if(this.peek(tokenKind_TokenKind.BRACE_L))return this.parseOperationDefinition();let hasDescription=this.peekDescription(),keywordToken=hasDescription?this._lexer.lookahead():this._lexer.token;if(keywordToken.kind===tokenKind_TokenKind.NAME){switch(keywordToken.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(hasDescription)throw syntaxError(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(keywordToken.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(keywordToken)}parseOperationDefinition(){let name;let start=this._lexer.token;if(this.peek(tokenKind_TokenKind.BRACE_L))return this.node(start,{kind:kinds.h.OPERATION_DEFINITION,operation:ast.ku.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});let operation=this.parseOperationType();return this.peek(tokenKind_TokenKind.NAME)&&(name=this.parseName()),this.node(start,{kind:kinds.h.OPERATION_DEFINITION,operation,name,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){let operationToken=this.expectToken(tokenKind_TokenKind.NAME);switch(operationToken.value){case"query":return ast.ku.QUERY;case"mutation":return ast.ku.MUTATION;case"subscription":return ast.ku.SUBSCRIPTION}throw this.unexpected(operationToken)}parseVariableDefinitions(){return this.optionalMany(tokenKind_TokenKind.PAREN_L,this.parseVariableDefinition,tokenKind_TokenKind.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:kinds.h.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(tokenKind_TokenKind.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(tokenKind_TokenKind.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){let start=this._lexer.token;return this.expectToken(tokenKind_TokenKind.DOLLAR),this.node(start,{kind:kinds.h.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:kinds.h.SELECTION_SET,selections:this.many(tokenKind_TokenKind.BRACE_L,this.parseSelection,tokenKind_TokenKind.BRACE_R)})}parseSelection(){return this.peek(tokenKind_TokenKind.SPREAD)?this.parseFragment():this.parseField()}parseField(){let alias,name;let start=this._lexer.token,nameOrAlias=this.parseName();return this.expectOptionalToken(tokenKind_TokenKind.COLON)?(alias=nameOrAlias,name=this.parseName()):name=nameOrAlias,this.node(start,{kind:kinds.h.FIELD,alias,name,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(tokenKind_TokenKind.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(isConst){let item=isConst?this.parseConstArgument:this.parseArgument;return this.optionalMany(tokenKind_TokenKind.PAREN_L,item,tokenKind_TokenKind.PAREN_R)}parseArgument(isConst=!1){let start=this._lexer.token,name=this.parseName();return this.expectToken(tokenKind_TokenKind.COLON),this.node(start,{kind:kinds.h.ARGUMENT,name,value:this.parseValueLiteral(isConst)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){let start=this._lexer.token;this.expectToken(tokenKind_TokenKind.SPREAD);let hasTypeCondition=this.expectOptionalKeyword("on");return!hasTypeCondition&&this.peek(tokenKind_TokenKind.NAME)?this.node(start,{kind:kinds.h.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(start,{kind:kinds.h.INLINE_FRAGMENT,typeCondition:hasTypeCondition?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){let start=this._lexer.token;return(this.expectKeyword("fragment"),!0===this._options.allowLegacyFragmentVariables)?this.node(start,{kind:kinds.h.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(start,{kind:kinds.h.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()}parseValueLiteral(isConst){let token=this._lexer.token;switch(token.kind){case tokenKind_TokenKind.BRACKET_L:return this.parseList(isConst);case tokenKind_TokenKind.BRACE_L:return this.parseObject(isConst);case tokenKind_TokenKind.INT:return this.advanceLexer(),this.node(token,{kind:kinds.h.INT,value:token.value});case tokenKind_TokenKind.FLOAT:return this.advanceLexer(),this.node(token,{kind:kinds.h.FLOAT,value:token.value});case tokenKind_TokenKind.STRING:case tokenKind_TokenKind.BLOCK_STRING:return this.parseStringLiteral();case tokenKind_TokenKind.NAME:switch(this.advanceLexer(),token.value){case"true":return this.node(token,{kind:kinds.h.BOOLEAN,value:!0});case"false":return this.node(token,{kind:kinds.h.BOOLEAN,value:!1});case"null":return this.node(token,{kind:kinds.h.NULL});default:return this.node(token,{kind:kinds.h.ENUM,value:token.value})}case tokenKind_TokenKind.DOLLAR:if(isConst){if(this.expectToken(tokenKind_TokenKind.DOLLAR),this._lexer.token.kind===tokenKind_TokenKind.NAME){let varName=this._lexer.token.value;throw syntaxError(this._lexer.source,token.start,`Unexpected variable "$${varName}" in constant value.`)}throw this.unexpected(token)}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){let token=this._lexer.token;return this.advanceLexer(),this.node(token,{kind:kinds.h.STRING,value:token.value,block:token.kind===tokenKind_TokenKind.BLOCK_STRING})}parseList(isConst){let item=()=>this.parseValueLiteral(isConst);return this.node(this._lexer.token,{kind:kinds.h.LIST,values:this.any(tokenKind_TokenKind.BRACKET_L,item,tokenKind_TokenKind.BRACKET_R)})}parseObject(isConst){let item=()=>this.parseObjectField(isConst);return this.node(this._lexer.token,{kind:kinds.h.OBJECT,fields:this.any(tokenKind_TokenKind.BRACE_L,item,tokenKind_TokenKind.BRACE_R)})}parseObjectField(isConst){let start=this._lexer.token,name=this.parseName();return this.expectToken(tokenKind_TokenKind.COLON),this.node(start,{kind:kinds.h.OBJECT_FIELD,name,value:this.parseValueLiteral(isConst)})}parseDirectives(isConst){let directives=[];for(;this.peek(tokenKind_TokenKind.AT);)directives.push(this.parseDirective(isConst));return directives}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(isConst){let start=this._lexer.token;return this.expectToken(tokenKind_TokenKind.AT),this.node(start,{kind:kinds.h.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(isConst)})}parseTypeReference(){let type;let start=this._lexer.token;if(this.expectOptionalToken(tokenKind_TokenKind.BRACKET_L)){let innerType=this.parseTypeReference();this.expectToken(tokenKind_TokenKind.BRACKET_R),type=this.node(start,{kind:kinds.h.LIST_TYPE,type:innerType})}else type=this.parseNamedType();return this.expectOptionalToken(tokenKind_TokenKind.BANG)?this.node(start,{kind:kinds.h.NON_NULL_TYPE,type}):type}parseNamedType(){return this.node(this._lexer.token,{kind:kinds.h.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(tokenKind_TokenKind.STRING)||this.peek(tokenKind_TokenKind.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){let start=this._lexer.token,description=this.parseDescription();this.expectKeyword("schema");let directives=this.parseConstDirectives(),operationTypes=this.many(tokenKind_TokenKind.BRACE_L,this.parseOperationTypeDefinition,tokenKind_TokenKind.BRACE_R);return this.node(start,{kind:kinds.h.SCHEMA_DEFINITION,description,directives,operationTypes})}parseOperationTypeDefinition(){let start=this._lexer.token,operation=this.parseOperationType();this.expectToken(tokenKind_TokenKind.COLON);let type=this.parseNamedType();return this.node(start,{kind:kinds.h.OPERATION_TYPE_DEFINITION,operation,type})}parseScalarTypeDefinition(){let start=this._lexer.token,description=this.parseDescription();this.expectKeyword("scalar");let name=this.parseName(),directives=this.parseConstDirectives();return this.node(start,{kind:kinds.h.SCALAR_TYPE_DEFINITION,description,name,directives})}parseObjectTypeDefinition(){let start=this._lexer.token,description=this.parseDescription();this.expectKeyword("type");let name=this.parseName(),interfaces=this.parseImplementsInterfaces(),directives=this.parseConstDirectives(),fields=this.parseFieldsDefinition();return this.node(start,{kind:kinds.h.OBJECT_TYPE_DEFINITION,description,name,interfaces,directives,fields})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(tokenKind_TokenKind.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(tokenKind_TokenKind.BRACE_L,this.parseFieldDefinition,tokenKind_TokenKind.BRACE_R)}parseFieldDefinition(){let start=this._lexer.token,description=this.parseDescription(),name=this.parseName(),args=this.parseArgumentDefs();this.expectToken(tokenKind_TokenKind.COLON);let type=this.parseTypeReference(),directives=this.parseConstDirectives();return this.node(start,{kind:kinds.h.FIELD_DEFINITION,description,name,arguments:args,type,directives})}parseArgumentDefs(){return this.optionalMany(tokenKind_TokenKind.PAREN_L,this.parseInputValueDef,tokenKind_TokenKind.PAREN_R)}parseInputValueDef(){let defaultValue;let start=this._lexer.token,description=this.parseDescription(),name=this.parseName();this.expectToken(tokenKind_TokenKind.COLON);let type=this.parseTypeReference();this.expectOptionalToken(tokenKind_TokenKind.EQUALS)&&(defaultValue=this.parseConstValueLiteral());let directives=this.parseConstDirectives();return this.node(start,{kind:kinds.h.INPUT_VALUE_DEFINITION,description,name,type,defaultValue,directives})}parseInterfaceTypeDefinition(){let start=this._lexer.token,description=this.parseDescription();this.expectKeyword("interface");let name=this.parseName(),interfaces=this.parseImplementsInterfaces(),directives=this.parseConstDirectives(),fields=this.parseFieldsDefinition();return this.node(start,{kind:kinds.h.INTERFACE_TYPE_DEFINITION,description,name,interfaces,directives,fields})}parseUnionTypeDefinition(){let start=this._lexer.token,description=this.parseDescription();this.expectKeyword("union");let name=this.parseName(),directives=this.parseConstDirectives(),types=this.parseUnionMemberTypes();return this.node(start,{kind:kinds.h.UNION_TYPE_DEFINITION,description,name,directives,types})}parseUnionMemberTypes(){return this.expectOptionalToken(tokenKind_TokenKind.EQUALS)?this.delimitedMany(tokenKind_TokenKind.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){let start=this._lexer.token,description=this.parseDescription();this.expectKeyword("enum");let name=this.parseName(),directives=this.parseConstDirectives(),values=this.parseEnumValuesDefinition();return this.node(start,{kind:kinds.h.ENUM_TYPE_DEFINITION,description,name,directives,values})}parseEnumValuesDefinition(){return this.optionalMany(tokenKind_TokenKind.BRACE_L,this.parseEnumValueDefinition,tokenKind_TokenKind.BRACE_R)}parseEnumValueDefinition(){let start=this._lexer.token,description=this.parseDescription(),name=this.parseEnumValueName(),directives=this.parseConstDirectives();return this.node(start,{kind:kinds.h.ENUM_VALUE_DEFINITION,description,name,directives})}parseEnumValueName(){if("true"===this._lexer.token.value||"false"===this._lexer.token.value||"null"===this._lexer.token.value)throw syntaxError(this._lexer.source,this._lexer.token.start,`${getTokenDesc(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){let start=this._lexer.token,description=this.parseDescription();this.expectKeyword("input");let name=this.parseName(),directives=this.parseConstDirectives(),fields=this.parseInputFieldsDefinition();return this.node(start,{kind:kinds.h.INPUT_OBJECT_TYPE_DEFINITION,description,name,directives,fields})}parseInputFieldsDefinition(){return this.optionalMany(tokenKind_TokenKind.BRACE_L,this.parseInputValueDef,tokenKind_TokenKind.BRACE_R)}parseTypeSystemExtension(){let keywordToken=this._lexer.lookahead();if(keywordToken.kind===tokenKind_TokenKind.NAME)switch(keywordToken.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(keywordToken)}parseSchemaExtension(){let start=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");let directives=this.parseConstDirectives(),operationTypes=this.optionalMany(tokenKind_TokenKind.BRACE_L,this.parseOperationTypeDefinition,tokenKind_TokenKind.BRACE_R);if(0===directives.length&&0===operationTypes.length)throw this.unexpected();return this.node(start,{kind:kinds.h.SCHEMA_EXTENSION,directives,operationTypes})}parseScalarTypeExtension(){let start=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");let name=this.parseName(),directives=this.parseConstDirectives();if(0===directives.length)throw this.unexpected();return this.node(start,{kind:kinds.h.SCALAR_TYPE_EXTENSION,name,directives})}parseObjectTypeExtension(){let start=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");let name=this.parseName(),interfaces=this.parseImplementsInterfaces(),directives=this.parseConstDirectives(),fields=this.parseFieldsDefinition();if(0===interfaces.length&&0===directives.length&&0===fields.length)throw this.unexpected();return this.node(start,{kind:kinds.h.OBJECT_TYPE_EXTENSION,name,interfaces,directives,fields})}parseInterfaceTypeExtension(){let start=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");let name=this.parseName(),interfaces=this.parseImplementsInterfaces(),directives=this.parseConstDirectives(),fields=this.parseFieldsDefinition();if(0===interfaces.length&&0===directives.length&&0===fields.length)throw this.unexpected();return this.node(start,{kind:kinds.h.INTERFACE_TYPE_EXTENSION,name,interfaces,directives,fields})}parseUnionTypeExtension(){let start=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");let name=this.parseName(),directives=this.parseConstDirectives(),types=this.parseUnionMemberTypes();if(0===directives.length&&0===types.length)throw this.unexpected();return this.node(start,{kind:kinds.h.UNION_TYPE_EXTENSION,name,directives,types})}parseEnumTypeExtension(){let start=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");let name=this.parseName(),directives=this.parseConstDirectives(),values=this.parseEnumValuesDefinition();if(0===directives.length&&0===values.length)throw this.unexpected();return this.node(start,{kind:kinds.h.ENUM_TYPE_EXTENSION,name,directives,values})}parseInputObjectTypeExtension(){let start=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");let name=this.parseName(),directives=this.parseConstDirectives(),fields=this.parseInputFieldsDefinition();if(0===directives.length&&0===fields.length)throw this.unexpected();return this.node(start,{kind:kinds.h.INPUT_OBJECT_TYPE_EXTENSION,name,directives,fields})}parseDirectiveDefinition(){let start=this._lexer.token,description=this.parseDescription();this.expectKeyword("directive"),this.expectToken(tokenKind_TokenKind.AT);let name=this.parseName(),args=this.parseArgumentDefs(),repeatable=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");let locations=this.parseDirectiveLocations();return this.node(start,{kind:kinds.h.DIRECTIVE_DEFINITION,description,name,arguments:args,repeatable,locations})}parseDirectiveLocations(){return this.delimitedMany(tokenKind_TokenKind.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){let start=this._lexer.token,name=this.parseName();if(Object.prototype.hasOwnProperty.call(DirectiveLocation1,name.value))return name;throw this.unexpected(start)}node(startToken,node){return!0!==this._options.noLocation&&(node.loc=new ast.Ye(startToken,this._lexer.lastToken,this._lexer.source)),node}peek(kind){return this._lexer.token.kind===kind}expectToken(kind){let token=this._lexer.token;if(token.kind===kind)return this.advanceLexer(),token;throw syntaxError(this._lexer.source,token.start,`Expected ${getTokenKindDesc(kind)}, found ${getTokenDesc(token)}.`)}expectOptionalToken(kind){let token=this._lexer.token;return token.kind===kind&&(this.advanceLexer(),!0)}expectKeyword(value){let token=this._lexer.token;if(token.kind===tokenKind_TokenKind.NAME&&token.value===value)this.advanceLexer();else throw syntaxError(this._lexer.source,token.start,`Expected "${value}", found ${getTokenDesc(token)}.`)}expectOptionalKeyword(value){let token=this._lexer.token;return token.kind===tokenKind_TokenKind.NAME&&token.value===value&&(this.advanceLexer(),!0)}unexpected(atToken){let token=null!=atToken?atToken:this._lexer.token;return syntaxError(this._lexer.source,token.start,`Unexpected ${getTokenDesc(token)}.`)}any(openKind,parseFn,closeKind){this.expectToken(openKind);let nodes=[];for(;!this.expectOptionalToken(closeKind);)nodes.push(parseFn.call(this));return nodes}optionalMany(openKind,parseFn,closeKind){if(this.expectOptionalToken(openKind)){let nodes=[];do nodes.push(parseFn.call(this));while(!this.expectOptionalToken(closeKind));return nodes}return[]}many(openKind,parseFn,closeKind){this.expectToken(openKind);let nodes=[];do nodes.push(parseFn.call(this));while(!this.expectOptionalToken(closeKind));return nodes}delimitedMany(delimiterKind,parseFn){this.expectOptionalToken(delimiterKind);let nodes=[];do nodes.push(parseFn.call(this));while(this.expectOptionalToken(delimiterKind));return nodes}advanceLexer(){let{maxTokens}=this._options,token=this._lexer.advance();if(void 0!==maxTokens&&token.kind!==tokenKind_TokenKind.EOF&&(++this._tokenCounter,this._tokenCounter>maxTokens))throw syntaxError(this._lexer.source,token.start,`Document contains more that ${maxTokens} tokens. Parsing aborted.`)}}function getTokenDesc(token){let value=token.value;return getTokenKindDesc(token.kind)+(null!=value?` "${value}"`:"")}function getTokenKindDesc(kind){return kind===tokenKind_TokenKind.BANG||kind===tokenKind_TokenKind.DOLLAR||kind===tokenKind_TokenKind.AMP||kind===tokenKind_TokenKind.PAREN_L||kind===tokenKind_TokenKind.PAREN_R||kind===tokenKind_TokenKind.SPREAD||kind===tokenKind_TokenKind.COLON||kind===tokenKind_TokenKind.EQUALS||kind===tokenKind_TokenKind.AT||kind===tokenKind_TokenKind.BRACKET_L||kind===tokenKind_TokenKind.BRACKET_R||kind===tokenKind_TokenKind.BRACE_L||kind===tokenKind_TokenKind.PIPE||kind===tokenKind_TokenKind.BRACE_R?`"${kind}"`:kind}var docCache=new Map,fragmentSourceMap=new Map,printFragmentWarnings=!0,experimentalFragmentVariables=!1;function normalize(string){return string.replace(/[\s,]+/g," ").trim()}function gql(literals){for(var args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];"string"==typeof literals&&(literals=[literals]);var result=literals[0];return args.forEach(function(arg,i){arg&&"Document"===arg.kind?result+=arg.loc.source.body:result+=arg,result+=literals[i+1]}),function(source){var cacheKey=normalize(source);if(!docCache.has(cacheKey)){var seenKeys,definitions,doc,workSet,loc,parsed=function(source,options){let parser=new Parser(source,options);return parser.parseDocument()}(source,{experimentalFragmentVariables:experimentalFragmentVariables,allowLegacyFragmentVariables:experimentalFragmentVariables});if(!parsed||"Document"!==parsed.kind)throw Error("Not a valid GraphQL document.");docCache.set(cacheKey,(seenKeys=new Set,definitions=[],parsed.definitions.forEach(function(fragmentDefinition){if("FragmentDefinition"===fragmentDefinition.kind){var loc,fragmentName=fragmentDefinition.name.value,sourceKey=normalize((loc=fragmentDefinition.loc).source.body.substring(loc.start,loc.end)),sourceKeySet=fragmentSourceMap.get(fragmentName);sourceKeySet&&!sourceKeySet.has(sourceKey)?printFragmentWarnings&&console.warn("Warning: fragment with name "+fragmentName+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"):sourceKeySet||fragmentSourceMap.set(fragmentName,sourceKeySet=new Set),sourceKeySet.add(sourceKey),seenKeys.has(sourceKey)||(seenKeys.add(sourceKey),definitions.push(fragmentDefinition))}else definitions.push(fragmentDefinition)}),doc=(0,tslib_es6.__assign)((0,tslib_es6.__assign)({},parsed),{definitions:definitions}),(workSet=new Set(doc.definitions)).forEach(function(node){node.loc&&delete node.loc,Object.keys(node).forEach(function(key){var value=node[key];value&&"object"==typeof value&&workSet.add(value)})}),(loc=doc.loc)&&(delete loc.startToken,delete loc.endToken),doc))}return docCache.get(cacheKey)}(result)}var extras={gql:gql,resetCaches:function(){docCache.clear(),fragmentSourceMap.clear()},disableFragmentWarnings:function(){printFragmentWarnings=!1},enableExperimentalFragmentVariables:function(){experimentalFragmentVariables=!0},disableExperimentalFragmentVariables:function(){experimentalFragmentVariables=!1}};(gql_1=gql||(gql={})).gql=extras.gql,gql_1.resetCaches=extras.resetCaches,gql_1.disableFragmentWarnings=extras.disableFragmentWarnings,gql_1.enableExperimentalFragmentVariables=extras.enableExperimentalFragmentVariables,gql_1.disableExperimentalFragmentVariables=extras.disableExperimentalFragmentVariables,gql.default=gql},19749:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(_param){let blurWidth,blurHeight;var src,{src:src1,sizes,unoptimized=!1,priority=!1,loading,className,quality,width,height,fill,style,onLoad,onLoadingComplete,placeholder="empty",blurDataURL,layout,objectFit,objectPosition,lazyBoundary,lazyRoot}=_param,all=_object_without_properties_loose(_param,["src","sizes","unoptimized","priority","loading","className","quality","width","height","fill","style","onLoad","onLoadingComplete","placeholder","blurDataURL","layout","objectFit","objectPosition","lazyBoundary","lazyRoot"]);let configContext=_react.useContext(_imageConfigContext.ImageConfigContext),config=_react.useMemo(()=>{let c=configEnv||configContext||_imageConfig.imageConfigDefault,allSizes=[...c.deviceSizes,...c.imageSizes].sort((a,b)=>a-b),deviceSizes=c.deviceSizes.sort((a,b)=>a-b);return _extends({},c,{allSizes,deviceSizes})},[configContext]),rest=all,loader=rest.loader||_imageLoader.default;if(delete rest.loader,"__next_img_default"in loader){if("custom"===config.loader)throw Error('Image with src "'.concat(src1,'" is missing "loader" prop.')+"\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader")}else{let customImageLoader=loader;loader=obj=>{let{config:_}=obj,opts=_object_without_properties_loose(obj,["config"]);return customImageLoader(opts)}}if(layout){"fill"===layout&&(fill=!0);let layoutStyle={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[layout];layoutStyle&&(style=_extends({},style,layoutStyle));let layoutSizes={responsive:"100vw",fill:"100vw"}[layout];layoutSizes&&!sizes&&(sizes=layoutSizes)}let staticSrc="",widthInt=getInt(width),heightInt=getInt(height);if("object"==typeof(src=src1)&&(isStaticRequire(src)||void 0!==src.src)){let staticImageData=isStaticRequire(src1)?src1.default:src1;if(!staticImageData.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ".concat(JSON.stringify(staticImageData)));if(!staticImageData.height||!staticImageData.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ".concat(JSON.stringify(staticImageData)));if(blurWidth=staticImageData.blurWidth,blurHeight=staticImageData.blurHeight,blurDataURL=blurDataURL||staticImageData.blurDataURL,staticSrc=staticImageData.src,!fill){if(widthInt||heightInt){if(widthInt&&!heightInt){let ratio=widthInt/staticImageData.width;heightInt=Math.round(staticImageData.height*ratio)}else if(!widthInt&&heightInt){let ratio1=heightInt/staticImageData.height;widthInt=Math.round(staticImageData.width*ratio1)}}else widthInt=staticImageData.width,heightInt=staticImageData.height}}let isLazy=!priority&&("lazy"===loading||void 0===loading);((src1="string"==typeof src1?src1:staticSrc).startsWith("data:")||src1.startsWith("blob:"))&&(unoptimized=!0,isLazy=!1),config.unoptimized&&(unoptimized=!0);let[blurComplete,setBlurComplete]=_react.useState(!1),[showAltText,setShowAltText]=_react.useState(!1),qualityInt=getInt(quality),imgStyle=Object.assign(fill?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit,objectPosition}:{},showAltText?{}:{color:"transparent"},style),blurStyle="blur"===placeholder&&blurDataURL&&!blurComplete?{backgroundSize:imgStyle.objectFit||"cover",backgroundPosition:imgStyle.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:'url("data:image/svg+xml;charset=utf-8,'.concat(_imageBlurSvg.getImageBlurSvg({widthInt,heightInt,blurWidth,blurHeight,blurDataURL}),'")')}:{},imgAttributes=function(param){let{config,src,unoptimized,width,quality,sizes,loader}=param;if(unoptimized)return{src,srcSet:void 0,sizes:void 0};let{widths,kind}=function(param,width,sizes){let{deviceSizes,allSizes}=param;if(sizes){let viewportWidthRe=/(^|\s)(1?\d?\d)vw/g,percentSizes=[];for(let match;match=viewportWidthRe.exec(sizes);match)percentSizes.push(parseInt(match[2]));if(percentSizes.length){let smallestRatio=.01*Math.min(...percentSizes);return{widths:allSizes.filter(s=>s>=deviceSizes[0]*smallestRatio),kind:"w"}}return{widths:allSizes,kind:"w"}}if("number"!=typeof width)return{widths:deviceSizes,kind:"w"};let widths=[...new Set([width,2*width].map(w=>allSizes.find(p=>p>=w)||allSizes[allSizes.length-1]))];return{widths,kind:"x"}}(config,width,sizes),last=widths.length-1;return{sizes:sizes||"w"!==kind?sizes:"100vw",srcSet:widths.map((w,i)=>"".concat(loader({config,src,quality,width:w})," ").concat("w"===kind?w:i+1).concat(kind)).join(", "),src:loader({config,src,quality,width:widths[last]})}}({config,src:src1,unoptimized,width:widthInt,quality:qualityInt,sizes,loader}),srcString=src1,linkProps={imageSrcSet:imgAttributes.srcSet,imageSizes:imgAttributes.sizes,crossOrigin:rest.crossOrigin},onLoadRef=_react.useRef(onLoad);_react.useEffect(()=>{onLoadRef.current=onLoad},[onLoad]);let onLoadingCompleteRef=_react.useRef(onLoadingComplete);_react.useEffect(()=>{onLoadingCompleteRef.current=onLoadingComplete},[onLoadingComplete]);let imgElementArgs=_extends({isLazy,imgAttributes,heightInt,widthInt,qualityInt,className,imgStyle,blurStyle,loading,config,fill,unoptimized,placeholder,loader,srcString,onLoadRef,onLoadingCompleteRef,setBlurComplete,setShowAltText},rest);return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement(ImageElement,Object.assign({},imgElementArgs)),priority?_react.default.createElement(_head.default,null,_react.default.createElement("link",Object.assign({key:"__nimg-"+imgAttributes.src+imgAttributes.srcSet+imgAttributes.sizes,rel:"preload",as:"image",href:imgAttributes.srcSet?void 0:imgAttributes.src},linkProps))):null)};var _extends=__webpack_require__(6495).Z,_interop_require_default=__webpack_require__(92648).Z,_interop_require_wildcard=__webpack_require__(91598).Z,_object_without_properties_loose=__webpack_require__(17273).Z,_react=_interop_require_wildcard(__webpack_require__(67294)),_head=_interop_require_default(__webpack_require__(83121)),_imageBlurSvg=__webpack_require__(2675),_imageConfig=__webpack_require__(10139),_imageConfigContext=__webpack_require__(28730);__webpack_require__(57238);var _imageLoader=_interop_require_default(__webpack_require__(23078));let configEnv={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function isStaticRequire(src){return void 0!==src.default}function getInt(x){return"number"==typeof x||void 0===x?x:"string"==typeof x&&/^[0-9]+$/.test(x)?parseInt(x,10):NaN}function handleLoading(img,src,placeholder,onLoadRef,onLoadingCompleteRef,setBlurComplete,unoptimized){if(!img||img["data-loaded-src"]===src)return;img["data-loaded-src"]=src;let p="decode"in img?img.decode():Promise.resolve();p.catch(()=>{}).then(()=>{if(img.parentNode){if("blur"===placeholder&&setBlurComplete(!0),null==onLoadRef?void 0:onLoadRef.current){let event=new Event("load");Object.defineProperty(event,"target",{writable:!1,value:img});let prevented=!1,stopped=!1;onLoadRef.current(_extends({},event,{nativeEvent:event,currentTarget:img,target:img,isDefaultPrevented:()=>prevented,isPropagationStopped:()=>stopped,persist(){},preventDefault(){prevented=!0,event.preventDefault()},stopPropagation(){stopped=!0,event.stopPropagation()}}))}(null==onLoadingCompleteRef?void 0:onLoadingCompleteRef.current)&&onLoadingCompleteRef.current(img)}})}let ImageElement=_param=>{var{imgAttributes,heightInt,widthInt,qualityInt,className,imgStyle,blurStyle,isLazy,fill,placeholder,loading,srcString,config,unoptimized,loader,onLoadRef,onLoadingCompleteRef,setBlurComplete,setShowAltText,onLoad,onError}=_param,rest=_object_without_properties_loose(_param,["imgAttributes","heightInt","widthInt","qualityInt","className","imgStyle","blurStyle","isLazy","fill","placeholder","loading","srcString","config","unoptimized","loader","onLoadRef","onLoadingCompleteRef","setBlurComplete","setShowAltText","onLoad","onError"]);return loading=isLazy?"lazy":loading,_react.default.createElement(_react.default.Fragment,null,_react.default.createElement("img",Object.assign({},rest,imgAttributes,{width:widthInt,height:heightInt,decoding:"async","data-nimg":fill?"fill":"1",className:className,loading:loading,style:_extends({},imgStyle,blurStyle),ref:_react.useCallback(img=>{img&&(onError&&(img.src=img.src),img.complete&&handleLoading(img,srcString,placeholder,onLoadRef,onLoadingCompleteRef,setBlurComplete,unoptimized))},[srcString,placeholder,onLoadRef,onLoadingCompleteRef,setBlurComplete,onError,unoptimized]),onLoad(event){let img=event.currentTarget;handleLoading(img,srcString,placeholder,onLoadRef,onLoadingCompleteRef,setBlurComplete,unoptimized)},onError(event){setShowAltText(!0),"blur"===placeholder&&setBlurComplete(!0),onError&&onError(event)}})))};("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default)},2675:function(__unused_webpack_module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImageBlurSvg=function(param){let{widthInt,heightInt,blurWidth,blurHeight,blurDataURL}=param,svgWidth=blurWidth||widthInt,svgHeight=blurHeight||heightInt,feComponentTransfer=blurDataURL.startsWith("data:image/jpeg")?"%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'/%3E%3C/feComponentTransfer%3E%":"";return svgWidth&&svgHeight?"%3Csvg xmlns='http%3A//www.w3.org/2000/svg' viewBox='0 0 ".concat(svgWidth," ").concat(svgHeight,"'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='").concat(blurWidth&&blurHeight?"1":"20","'/%3E").concat(feComponentTransfer,"%3C/filter%3E%3Cimage preserveAspectRatio='none' filter='url(%23b)' x='0' y='0' height='100%25' width='100%25' href='").concat(blurDataURL,"'/%3E%3C/svg%3E"):"%3Csvg xmlns='http%3A//www.w3.org/2000/svg'%3E%3Cimage style='filter:blur(20px)' x='0' y='0' height='100%25' width='100%25' href='".concat(blurDataURL,"'/%3E%3C/svg%3E")}},23078:function(__unused_webpack_module,exports){"use strict";function defaultLoader(param){let{config,src,width,quality}=param;return src.endsWith(".svg")&&!config.dangerouslyAllowSVG?src:"".concat(config.path,"?url=").concat(encodeURIComponent(src),"&w=").concat(width,"&q=").concat(quality||75)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,defaultLoader.__next_img_default=!0,exports.default=defaultLoader},25675:function(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__(19749)},16991:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{a:function(){return useQuery}});var DocumentType,DocumentType1,tslib_es6=__webpack_require__(70655),globals=__webpack_require__(13917),react=__webpack_require__(67294),react_namespaceObject=__webpack_require__.t(react,2),canUse=__webpack_require__(30320),didWarnUncachedGetSnapshot=!1,useSyncExternalStore=react_namespaceObject.useSyncExternalStore||function(subscribe,getSnapshot,getServerSnapshot){var value=getSnapshot();__DEV__&&!didWarnUncachedGetSnapshot&&value!==getSnapshot()&&(didWarnUncachedGetSnapshot=!0,__DEV__&&globals.kG.error("The result of getSnapshot should be cached to avoid an infinite loop"));var _a=react.useState({inst:{value:value,getSnapshot:getSnapshot}}),inst=_a[0].inst,forceUpdate=_a[1];return canUse.JC?react.useLayoutEffect(function(){Object.assign(inst,{value:value,getSnapshot:getSnapshot}),checkIfSnapshotChanged(inst)&&forceUpdate({inst:inst})},[subscribe,value,getSnapshot]):Object.assign(inst,{value:value,getSnapshot:getSnapshot}),react.useEffect(function(){return checkIfSnapshotChanged(inst)&&forceUpdate({inst:inst}),subscribe(function(){checkIfSnapshotChanged(inst)&&forceUpdate({inst:inst})})},[subscribe]),value};function checkIfSnapshotChanged(_a){var value=_a.value,getSnapshot=_a.getSnapshot;try{return value!==getSnapshot()}catch(_b){return!0}}var equality_esm=__webpack_require__(82152),mergeOptions=__webpack_require__(14012),ApolloContext=__webpack_require__(85317),errors=__webpack_require__(30990),networkStatus=__webpack_require__(1644);(DocumentType=DocumentType1||(DocumentType1={}))[DocumentType.Query=0]="Query",DocumentType[DocumentType.Mutation=1]="Mutation",DocumentType[DocumentType.Subscription=2]="Subscription";var cache=new Map;function operationName(type){var name;switch(type){case DocumentType1.Query:name="Query";break;case DocumentType1.Mutation:name="Mutation";break;case DocumentType1.Subscription:name="Subscription"}return name}var maybeDeepFreeze=__webpack_require__(48702),compact=__webpack_require__(53712),arrays=__webpack_require__(21436),useQuery_hasOwnProperty=Object.prototype.hasOwnProperty;function useQuery(query,options){var override,context,client,stateRef,state,_a,setTick;return void 0===options&&(options=Object.create(null)),(override=options.client,context=(0,react.useContext)((0,ApolloContext.K)()),client=override||context.client,__DEV__?(0,globals.kG)(!!client,'Could not find "client" in the context or passed in as an option. Wrap the root component in an <ApolloProvider>, or pass an ApolloClient instance in via options.'):(0,globals.kG)(!!client,31),(stateRef=(0,react.useRef)()).current&&client===stateRef.current.client&&query===stateRef.current.query||(stateRef.current=new InternalState(client,query,stateRef.current)),state=stateRef.current,(_a=(0,react.useState)(0))[0],setTick=_a[1],state.forceUpdate=function(){setTick(function(tick){return tick+1})},state).useQuery(options)}var InternalState=function(){function InternalState(client,query,previous){this.client=client,this.query=query,this.asyncResolveFns=new Set,this.optionsToIgnoreOnce=new(canUse.sy?WeakSet:Set),this.ssrDisabledResult=(0,maybeDeepFreeze.J)({loading:!0,data:void 0,error:void 0,networkStatus:networkStatus.I.loading}),this.skipStandbyResult=(0,maybeDeepFreeze.J)({loading:!1,data:void 0,error:void 0,networkStatus:networkStatus.I.ready}),this.toQueryResultCache=new(canUse.mr?WeakMap:Map),type=DocumentType1.Query,operation=function(document){var variables,type,cached=cache.get(document);if(cached)return cached;__DEV__?(0,globals.kG)(!!document&&!!document.kind,"Argument of ".concat(document," passed to parser was not a valid GraphQL ")+"DocumentNode. You may need to use 'graphql-tag' or another method to convert your operation into a document"):(0,globals.kG)(!!document&&!!document.kind,32);for(var fragments=[],queries=[],mutations=[],subscriptions=[],_i=0,_a=document.definitions;_i<_a.length;_i++){var x=_a[_i];if("FragmentDefinition"===x.kind){fragments.push(x);continue}if("OperationDefinition"===x.kind)switch(x.operation){case"query":queries.push(x);break;case"mutation":mutations.push(x);break;case"subscription":subscriptions.push(x)}}__DEV__?(0,globals.kG)(!fragments.length||queries.length||mutations.length||subscriptions.length,"Passing only a fragment to 'graphql' is not yet supported. You must include a query, subscription or mutation as well"):(0,globals.kG)(!fragments.length||queries.length||mutations.length||subscriptions.length,33),__DEV__?(0,globals.kG)(queries.length+mutations.length+subscriptions.length<=1,"react-apollo only supports a query, subscription, or a mutation per HOC. "+"".concat(document," had ").concat(queries.length," queries, ").concat(subscriptions.length," ")+"subscriptions and ".concat(mutations.length," mutations. ")+"You can use 'compose' to join multiple operation types to a component"):(0,globals.kG)(queries.length+mutations.length+subscriptions.length<=1,34),type=queries.length?DocumentType1.Query:DocumentType1.Mutation,queries.length||mutations.length||(type=DocumentType1.Subscription);var definitions=queries.length?queries:mutations.length?mutations:subscriptions;__DEV__?(0,globals.kG)(1===definitions.length,"react-apollo only supports one definition per HOC. ".concat(document," had ")+"".concat(definitions.length," definitions. ")+"You can use 'compose' to join multiple operation types to a component"):(0,globals.kG)(1===definitions.length,35);var definition=definitions[0];variables=definition.variableDefinitions||[];var payload={name:definition.name&&"Name"===definition.name.kind?definition.name.value:"data",type:type,variables:variables};return cache.set(document,payload),payload}(query),requiredOperationName=operationName(type),usedOperationName=operationName(operation.type),__DEV__?(0,globals.kG)(operation.type===type,"Running a ".concat(requiredOperationName," requires a graphql ")+"".concat(requiredOperationName,", but a ").concat(usedOperationName," was used instead.")):(0,globals.kG)(operation.type===type,36);var type,operation,requiredOperationName,usedOperationName,previousResult=previous&&previous.result,previousData=previousResult&&previousResult.data;previousData&&(this.previousData=previousData)}return InternalState.prototype.forceUpdate=function(){__DEV__&&globals.kG.warn("Calling default no-op implementation of InternalState#forceUpdate")},InternalState.prototype.asyncUpdate=function(){var _this=this;return new Promise(function(resolve){_this.asyncResolveFns.add(resolve),_this.optionsToIgnoreOnce.add(_this.watchQueryOptions),_this.forceUpdate()})},InternalState.prototype.useQuery=function(options){var _this=this;this.renderPromises=(0,react.useContext)((0,ApolloContext.K)()).renderPromises,this.useOptions(options);var obsQuery=this.useObservableQuery(),result=useSyncExternalStore((0,react.useCallback)(function(){if(_this.renderPromises)return function(){};var onNext=function(){var previousResult=_this.result,result=obsQuery.getCurrentResult();previousResult&&previousResult.loading===result.loading&&previousResult.networkStatus===result.networkStatus&&(0,equality_esm.D)(previousResult.data,result.data)||_this.setResult(result)},onError=function(error){var last=obsQuery.last;subscription.unsubscribe();try{obsQuery.resetLastResults(),subscription=obsQuery.subscribe(onNext,onError)}finally{obsQuery.last=last}if(!useQuery_hasOwnProperty.call(error,"graphQLErrors"))throw error;var previousResult=_this.result;(!previousResult||previousResult&&previousResult.loading||!(0,equality_esm.D)(error,previousResult.error))&&_this.setResult({data:previousResult&&previousResult.data,error:error,loading:!1,networkStatus:networkStatus.I.error})},subscription=obsQuery.subscribe(onNext,onError);return function(){return subscription.unsubscribe()}},[obsQuery,this.renderPromises,this.client.disableNetworkFetches]),function(){return _this.getCurrentResult()},function(){return _this.getCurrentResult()});this.unsafeHandlePartialRefetch(result);var queryResult=this.toQueryResult(result);return!queryResult.loading&&this.asyncResolveFns.size&&(this.asyncResolveFns.forEach(function(resolve){return resolve(queryResult)}),this.asyncResolveFns.clear()),queryResult},InternalState.prototype.useOptions=function(options){var _a,watchQueryOptions=this.createWatchQueryOptions(this.queryHookOptions=options),currentWatchQueryOptions=this.watchQueryOptions;(this.optionsToIgnoreOnce.has(currentWatchQueryOptions)||!(0,equality_esm.D)(watchQueryOptions,currentWatchQueryOptions))&&(this.watchQueryOptions=watchQueryOptions,currentWatchQueryOptions&&this.observable&&(this.optionsToIgnoreOnce.delete(currentWatchQueryOptions),this.observable.reobserve(this.getObsQueryOptions()),this.previousData=(null===(_a=this.result)||void 0===_a?void 0:_a.data)||this.previousData,this.result=void 0)),this.onCompleted=options.onCompleted||InternalState.prototype.onCompleted,this.onError=options.onError||InternalState.prototype.onError,(this.renderPromises||this.client.disableNetworkFetches)&&!1===this.queryHookOptions.ssr&&!this.queryHookOptions.skip?this.result=this.ssrDisabledResult:this.queryHookOptions.skip||"standby"===this.watchQueryOptions.fetchPolicy?this.result=this.skipStandbyResult:(this.result===this.ssrDisabledResult||this.result===this.skipStandbyResult)&&(this.result=void 0)},InternalState.prototype.getObsQueryOptions=function(){var toMerge=[],globalDefaults=this.client.defaultOptions.watchQuery;return globalDefaults&&toMerge.push(globalDefaults),this.queryHookOptions.defaultOptions&&toMerge.push(this.queryHookOptions.defaultOptions),toMerge.push((0,compact.o)(this.observable&&this.observable.options,this.watchQueryOptions)),toMerge.reduce(mergeOptions.J)},InternalState.prototype.createWatchQueryOptions=function(_a){void 0===_a&&(_a={});var _b,skip=_a.skip,watchQueryOptions=Object.assign((_a.ssr,_a.onCompleted,_a.onError,_a.defaultOptions,(0,tslib_es6.__rest)(_a,["skip","ssr","onCompleted","onError","defaultOptions"])),{query:this.query});if(this.renderPromises&&("network-only"===watchQueryOptions.fetchPolicy||"cache-and-network"===watchQueryOptions.fetchPolicy)&&(watchQueryOptions.fetchPolicy="cache-first"),watchQueryOptions.variables||(watchQueryOptions.variables={}),skip){var _c=watchQueryOptions.fetchPolicy,fetchPolicy=void 0===_c?this.getDefaultFetchPolicy():_c,_d=watchQueryOptions.initialFetchPolicy;Object.assign(watchQueryOptions,{initialFetchPolicy:void 0===_d?fetchPolicy:_d,fetchPolicy:"standby"})}else watchQueryOptions.fetchPolicy||(watchQueryOptions.fetchPolicy=(null===(_b=this.observable)||void 0===_b?void 0:_b.options.initialFetchPolicy)||this.getDefaultFetchPolicy());return watchQueryOptions},InternalState.prototype.getDefaultFetchPolicy=function(){var _a,_b;return(null===(_a=this.queryHookOptions.defaultOptions)||void 0===_a?void 0:_a.fetchPolicy)||(null===(_b=this.client.defaultOptions.watchQuery)||void 0===_b?void 0:_b.fetchPolicy)||"cache-first"},InternalState.prototype.onCompleted=function(data){},InternalState.prototype.onError=function(error){},InternalState.prototype.useObservableQuery=function(){var obsQuery=this.observable=this.renderPromises&&this.renderPromises.getSSRObservable(this.watchQueryOptions)||this.observable||this.client.watchQuery(this.getObsQueryOptions());this.obsQueryFields=(0,react.useMemo)(function(){return{refetch:obsQuery.refetch.bind(obsQuery),reobserve:obsQuery.reobserve.bind(obsQuery),fetchMore:obsQuery.fetchMore.bind(obsQuery),updateQuery:obsQuery.updateQuery.bind(obsQuery),startPolling:obsQuery.startPolling.bind(obsQuery),stopPolling:obsQuery.stopPolling.bind(obsQuery),subscribeToMore:obsQuery.subscribeToMore.bind(obsQuery)}},[obsQuery]);var ssrAllowed=!(!1===this.queryHookOptions.ssr||this.queryHookOptions.skip);return this.renderPromises&&ssrAllowed&&(this.renderPromises.registerSSRObservable(obsQuery),obsQuery.getCurrentResult().loading&&this.renderPromises.addObservableQueryPromise(obsQuery)),obsQuery},InternalState.prototype.setResult=function(nextResult){var previousResult=this.result;previousResult&&previousResult.data&&(this.previousData=previousResult.data),this.result=nextResult,this.forceUpdate(),this.handleErrorOrCompleted(nextResult)},InternalState.prototype.handleErrorOrCompleted=function(result){var _this=this;result.loading||Promise.resolve().then(function(){result.error?_this.onError(result.error):result.data&&_this.onCompleted(result.data)}).catch(function(error){__DEV__&&globals.kG.warn(error)})},InternalState.prototype.getCurrentResult=function(){return this.result||this.handleErrorOrCompleted(this.result=this.observable.getCurrentResult()),this.result},InternalState.prototype.toQueryResult=function(result){var queryResult=this.toQueryResultCache.get(result);if(queryResult)return queryResult;var data=result.data,resultWithoutPartial=(result.partial,(0,tslib_es6.__rest)(result,["data","partial"]));return this.toQueryResultCache.set(result,queryResult=(0,tslib_es6.__assign)((0,tslib_es6.__assign)((0,tslib_es6.__assign)({data:data},resultWithoutPartial),this.obsQueryFields),{client:this.client,observable:this.observable,variables:this.observable.variables,called:!this.queryHookOptions.skip,previousData:this.previousData})),!queryResult.error&&(0,arrays.O)(result.errors)&&(queryResult.error=new errors.c({graphQLErrors:result.errors})),queryResult},InternalState.prototype.unsafeHandlePartialRefetch=function(result){result.partial&&this.queryHookOptions.partialRefetch&&!result.loading&&(!result.data||0===Object.keys(result.data).length)&&"cache-only"!==this.observable.options.fetchPolicy&&(Object.assign(result,{loading:!0,networkStatus:networkStatus.I.refetch}),this.observable.refetch())},InternalState}()},7297:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function _taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}__webpack_require__.d(__webpack_exports__,{Z:function(){return _taggedTemplateLiteral}})}}]);