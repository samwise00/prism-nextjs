(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[54],{6335:function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){(window.__NEXT_P=window.__NEXT_P||[]).push(["/trade",function(){return __webpack_require__(72387)}])},72387:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return Trade}});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(85893),alchemy_sdk__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(18688),react_moralis__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(83078),_constants_networkMapping_json__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(48036),_constants_subgraphQueries__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(69071),_apollo_client__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(16991),web3uikit__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(41942),_components_NFTBox__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(31717),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(67294),_styles__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(99176),process=__webpack_require__(34155);function Trade(){let{switchNetwork}=(0,react_moralis__WEBPACK_IMPORTED_MODULE_1__.Ab)(),{account,isWeb3Enabled,chainId}=(0,react_moralis__WEBPACK_IMPORTED_MODULE_1__.Nr)(),marketplaceAddress=_constants_networkMapping_json__WEBPACK_IMPORTED_MODULE_2__[5].Wf[0],prismNftAddress=_constants_networkMapping_json__WEBPACK_IMPORTED_MODULE_2__[5].G3[0],[chainString,setChainString]=(0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(parseInt(chainId).toString()),[myNfts,setMyNfts]=(0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(null),alchemySettings={apiKey:process.env.ALCHEMY_KEY,network:alchemy_sdk__WEBPACK_IMPORTED_MODULE_7__.N.ETH_GOERLI},alchemy=new alchemy_sdk__WEBPACK_IMPORTED_MODULE_7__.k(alchemySettings);(0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(()=>{if(isWeb3Enabled){let nftsForOwner=async()=>{setMyNfts(await alchemy.nft.getNftsForOwner(account,{contractAddresses:[prismNftAddress]}))};nftsForOwner().catch(console.error),setChainString(parseInt(chainId).toString())}},[isWeb3Enabled,chainId]);let{loading,error,data:listedNfts}=(0,_apollo_client__WEBPACK_IMPORTED_MODULE_8__.a)(_constants_subgraphQueries__WEBPACK_IMPORTED_MODULE_3__.Z),checkIfListed=myNft=>{let isListed;return listedNfts.activeItems.map(item=>{item.tokenId==myNft.tokenId&&(isListed=!0)}),isListed};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"".concat(_styles__WEBPACK_IMPORTED_MODULE_6__.Z.xPaddings," py-8 relative"),children:isWeb3Enabled?"5"!=chainString&&isWeb3Enabled?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col items-center h-screen",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"pt-20 text-2xl text-white",children:"Unsupported Chain."}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-white",children:["Please connect to \xa0",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{onClick:()=>switchNetwork("0x5"),className:"text-xl text-transparent bg-clip-text bg-gradient-to-br from-pink-400 to-red-600 font-bold",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:"Goerli Testnet"})})})]})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{className:"flex md:justify-start justify-center py-4 px-4 font-bold text-2xl text-white",children:"Prism NFTs For Sale"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex flex-wrap md:justify-start justify-center",children:isWeb3Enabled?loading||!listedNfts?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{backgroundColor:"#ECECFE",borderRadius:"8px",padding:"20px"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(web3uikit__WEBPACK_IMPORTED_MODULE_9__.M,{size:12,spinnerColor:"#2E7DAF",spinnerType:"wave"})}):listedNfts.activeItems.map(nft=>{let{price,nftAddress,tokenId,seller}=nft;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"p-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_NFTBox__WEBPACK_IMPORTED_MODULE_4__.Z,{price:price,nftAddress:nftAddress,tokenId:tokenId,marketplaceAddress:marketplaceAddress,seller:seller,isListed:!0,isActive:!0})},"".concat(nft.tokenId).concat(account))}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-white md:p-4",children:"Web3 Currently Not Enabled"})}),isWeb3Enabled?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{className:"flex md:justify-start justify-center py-4 pt-20 px-4 font-bold text-2xl text-white",children:"My Prisms"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex flex-wrap md:justify-start justify-center",children:myNfts&&!loading&&myNfts.ownedNfts.map(nft=>{let isListed=checkIfListed(nft);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"p-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_NFTBox__WEBPACK_IMPORTED_MODULE_4__.Z,{nftAddress:nft.contract.address,tokenId:nft.tokenId,marketplaceAddress:marketplaceAddress,isListed:isListed,isActive:!1})},"".concat(nft.contract.address).concat(nft.tokenId))})})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{children:"hi"})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"flex justify-center text-white pt-8 h-screen",children:"Please connect to Web3."})})}}},function(__webpack_require__){__webpack_require__.O(0,[553,550,205,774,888,179],function(){return __webpack_require__(__webpack_require__.s=6335)}),_N_E=__webpack_require__.O()}]);